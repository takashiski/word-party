(()=>{var Le=Object.create;var ee=Object.defineProperty;var Be=Object.getOwnPropertyDescriptor;var Fe=Object.getOwnPropertyNames;var Oe=Object.getPrototypeOf,De=Object.prototype.hasOwnProperty;var Ne=w=>ee(w,"__esModule",{value:!0});var We=(w,T)=>()=>(T||w((T={exports:{}}).exports,T),T.exports);var He=(w,T,f,e)=>{if(T&&typeof T=="object"||typeof T=="function")for(let s of Fe(T))!De.call(w,s)&&(f||s!=="default")&&ee(w,s,{get:()=>T[s],enumerable:!(e=Be(T,s))||e.enumerable});return w},ke=(w,T)=>He(Ne(ee(w!=null?Le(Oe(w)):{},"default",!T&&w&&w.__esModule?{get:()=>w.default,enumerable:!0}:{value:w,enumerable:!0})),w);var Ie=We((J,se)=>{(function(T,f){typeof J=="object"&&typeof se=="object"?se.exports=f():typeof define=="function"&&define.amd?define("Matter",[],f):typeof J=="object"?J.Matter=f():T.Matter=f()})(J,function(){return function(w){var T={};function f(e){if(T[e])return T[e].exports;var s=T[e]={i:e,l:!1,exports:{}};return w[e].call(s.exports,s,s.exports,f),s.l=!0,s.exports}return f.m=w,f.c=T,f.d=function(e,s,a){f.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:a})},f.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(e,s){if(s&1&&(e=f(e)),s&8||s&4&&typeof e=="object"&&e&&e.__esModule)return e;var a=Object.create(null);if(f.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),s&2&&typeof e!="string")for(var i in e)f.d(a,i,function(h){return e[h]}.bind(null,i));return a},f.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(s,"a",s),s},f.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},f.p="",f(f.s=21)}([function(w,T){var f={};w.exports=f,function(){f._nextId=0,f._seed=0,f._nowStartTime=+new Date,f._warnedOnce={},f._decomp=null,f.extend=function(s,a){var i,h,o;typeof a=="boolean"?(i=2,o=a):(i=1,o=!0);for(var u=i;u<arguments.length;u++){var r=arguments[u];if(r)for(var l in r)o&&r[l]&&r[l].constructor===Object&&(!s[l]||s[l].constructor===Object)?(s[l]=s[l]||{},f.extend(s[l],o,r[l])):s[l]=r[l]}return s},f.clone=function(s,a){return f.extend({},a,s)},f.keys=function(s){if(Object.keys)return Object.keys(s);var a=[];for(var i in s)a.push(i);return a},f.values=function(s){var a=[];if(Object.keys){for(var i=Object.keys(s),h=0;h<i.length;h++)a.push(s[i[h]]);return a}for(var o in s)a.push(s[o]);return a},f.get=function(s,a,i,h){a=a.split(".").slice(i,h);for(var o=0;o<a.length;o+=1)s=s[a[o]];return s},f.set=function(s,a,i,h,o){var u=a.split(".").slice(h,o);return f.get(s,a,0,-1)[u[u.length-1]]=i,i},f.shuffle=function(s){for(var a=s.length-1;a>0;a--){var i=Math.floor(f.random()*(a+1)),h=s[a];s[a]=s[i],s[i]=h}return s},f.choose=function(s){return s[Math.floor(f.random()*s.length)]},f.isElement=function(s){return typeof HTMLElement<"u"?s instanceof HTMLElement:!!(s&&s.nodeType&&s.nodeName)},f.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},f.isFunction=function(s){return typeof s=="function"},f.isPlainObject=function(s){return typeof s=="object"&&s.constructor===Object},f.isString=function(s){return toString.call(s)==="[object String]"},f.clamp=function(s,a,i){return s<a?a:s>i?i:s},f.sign=function(s){return s<0?-1:1},f.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-f._nowStartTime},f.random=function(s,a){return s=typeof s<"u"?s:0,a=typeof a<"u"?a:1,s+e()*(a-s)};var e=function(){return f._seed=(f._seed*9301+49297)%233280,f._seed/233280};f.colorToNumber=function(s){return s=s.replace("#",""),s.length==3&&(s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2)),parseInt(s,16)},f.logLevel=1,f.log=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.info=function(){console&&f.logLevel>0&&f.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warn=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warnOnce=function(){var s=Array.prototype.slice.call(arguments).join(" ");f._warnedOnce[s]||(f.warn(s),f._warnedOnce[s]=!0)},f.deprecated=function(s,a,i){s[a]=f.chain(function(){f.warnOnce("\u{1F505} deprecated \u{1F505}",i)},s[a])},f.nextId=function(){return f._nextId++},f.indexOf=function(s,a){if(s.indexOf)return s.indexOf(a);for(var i=0;i<s.length;i++)if(s[i]===a)return i;return-1},f.map=function(s,a){if(s.map)return s.map(a);for(var i=[],h=0;h<s.length;h+=1)i.push(a(s[h]));return i},f.topologicalSort=function(s){var a=[],i=[],h=[];for(var o in s)!i[o]&&!h[o]&&f._topologicalSort(o,i,h,s,a);return a},f._topologicalSort=function(s,a,i,h,o){var u=h[s]||[];i[s]=!0;for(var r=0;r<u.length;r+=1){var l=u[r];i[l]||a[l]||f._topologicalSort(l,a,i,h,o)}i[s]=!1,a[s]=!0,o.push(s)},f.chain=function(){for(var s=[],a=0;a<arguments.length;a+=1){var i=arguments[a];i._chained?s.push.apply(s,i._chained):s.push(i)}var h=function(){for(var o,u=new Array(arguments.length),r=0,l=arguments.length;r<l;r++)u[r]=arguments[r];for(r=0;r<s.length;r+=1){var t=s[r].apply(o,u);typeof t<"u"&&(o=t)}return o};return h._chained=s,h},f.chainPathBefore=function(s,a,i){return f.set(s,a,f.chain(i,f.get(s,a)))},f.chainPathAfter=function(s,a,i){return f.set(s,a,f.chain(f.get(s,a),i))},f.setDecomp=function(s){f._decomp=s},f.getDecomp=function(){var s=f._decomp;try{!s&&typeof window<"u"&&(s=window.decomp),!s&&typeof global<"u"&&(s=global.decomp)}catch{s=null}return s}}()},function(w,T){var f={};w.exports=f,function(){f.create=function(e){var s={min:{x:0,y:0},max:{x:0,y:0}};return e&&f.update(s,e),s},f.update=function(e,s,a){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<s.length;i++){var h=s[i];h.x>e.max.x&&(e.max.x=h.x),h.x<e.min.x&&(e.min.x=h.x),h.y>e.max.y&&(e.max.y=h.y),h.y<e.min.y&&(e.min.y=h.y)}a&&(a.x>0?e.max.x+=a.x:e.min.x+=a.x,a.y>0?e.max.y+=a.y:e.min.y+=a.y)},f.contains=function(e,s){return s.x>=e.min.x&&s.x<=e.max.x&&s.y>=e.min.y&&s.y<=e.max.y},f.overlaps=function(e,s){return e.min.x<=s.max.x&&e.max.x>=s.min.x&&e.max.y>=s.min.y&&e.min.y<=s.max.y},f.translate=function(e,s){e.min.x+=s.x,e.max.x+=s.x,e.min.y+=s.y,e.max.y+=s.y},f.shift=function(e,s){var a=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=s.x,e.max.x=s.x+a,e.min.y=s.y,e.max.y=s.y+i}}()},function(w,T){var f={};w.exports=f,function(){f.create=function(e,s){return{x:e||0,y:s||0}},f.clone=function(e){return{x:e.x,y:e.y}},f.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},f.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},f.rotate=function(e,s,a){var i=Math.cos(s),h=Math.sin(s);a||(a={});var o=e.x*i-e.y*h;return a.y=e.x*h+e.y*i,a.x=o,a},f.rotateAbout=function(e,s,a,i){var h=Math.cos(s),o=Math.sin(s);i||(i={});var u=a.x+((e.x-a.x)*h-(e.y-a.y)*o);return i.y=a.y+((e.x-a.x)*o+(e.y-a.y)*h),i.x=u,i},f.normalise=function(e){var s=f.magnitude(e);return s===0?{x:0,y:0}:{x:e.x/s,y:e.y/s}},f.dot=function(e,s){return e.x*s.x+e.y*s.y},f.cross=function(e,s){return e.x*s.y-e.y*s.x},f.cross3=function(e,s,a){return(s.x-e.x)*(a.y-e.y)-(s.y-e.y)*(a.x-e.x)},f.add=function(e,s,a){return a||(a={}),a.x=e.x+s.x,a.y=e.y+s.y,a},f.sub=function(e,s,a){return a||(a={}),a.x=e.x-s.x,a.y=e.y-s.y,a},f.mult=function(e,s){return{x:e.x*s,y:e.y*s}},f.div=function(e,s){return{x:e.x/s,y:e.y/s}},f.perp=function(e,s){return s=s===!0?-1:1,{x:s*-e.y,y:s*e.x}},f.neg=function(e){return{x:-e.x,y:-e.y}},f.angle=function(e,s){return Math.atan2(s.y-e.y,s.x-e.x)},f._temp=[f.create(),f.create(),f.create(),f.create(),f.create(),f.create()]}()},function(w,T,f){var e={};w.exports=e;var s=f(2),a=f(0);(function(){e.create=function(i,h){for(var o=[],u=0;u<i.length;u++){var r=i[u],l={x:r.x,y:r.y,index:u,body:h,isInternal:!1};o.push(l)}return o},e.fromPath=function(i,h){var o=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return i.replace(o,function(r,l,t){u.push({x:parseFloat(l),y:parseFloat(t)})}),e.create(u,h)},e.centre=function(i){for(var h=e.area(i,!0),o={x:0,y:0},u,r,l,t=0;t<i.length;t++)l=(t+1)%i.length,u=s.cross(i[t],i[l]),r=s.mult(s.add(i[t],i[l]),u),o=s.add(o,r);return s.div(o,6*h)},e.mean=function(i){for(var h={x:0,y:0},o=0;o<i.length;o++)h.x+=i[o].x,h.y+=i[o].y;return s.div(h,i.length)},e.area=function(i,h){for(var o=0,u=i.length-1,r=0;r<i.length;r++)o+=(i[u].x-i[r].x)*(i[u].y+i[r].y),u=r;return h?o/2:Math.abs(o)/2},e.inertia=function(i,h){for(var o=0,u=0,r=i,l,t,n=0;n<r.length;n++)t=(n+1)%r.length,l=Math.abs(s.cross(r[t],r[n])),o+=l*(s.dot(r[t],r[t])+s.dot(r[t],r[n])+s.dot(r[n],r[n])),u+=l;return h/6*(o/u)},e.translate=function(i,h,o){o=typeof o<"u"?o:1;var u=i.length,r=h.x*o,l=h.y*o,t;for(t=0;t<u;t++)i[t].x+=r,i[t].y+=l;return i},e.rotate=function(i,h,o){if(h!==0){var u=Math.cos(h),r=Math.sin(h),l=o.x,t=o.y,n=i.length,g,c,y,C;for(C=0;C<n;C++)g=i[C],c=g.x-l,y=g.y-t,g.x=l+(c*u-y*r),g.y=t+(c*r+y*u);return i}},e.contains=function(i,h){for(var o=h.x,u=h.y,r=i.length,l=i[r-1],t,n=0;n<r;n++){if(t=i[n],(o-l.x)*(t.y-l.y)+(u-l.y)*(l.x-t.x)>0)return!1;l=t}return!0},e.scale=function(i,h,o,u){if(h===1&&o===1)return i;u=u||e.centre(i);for(var r,l,t=0;t<i.length;t++)r=i[t],l=s.sub(r,u),i[t].x=u.x+l.x*h,i[t].y=u.y+l.y*o;return i},e.chamfer=function(i,h,o,u,r){typeof h=="number"?h=[h]:h=h||[8],o=typeof o<"u"?o:-1,u=u||2,r=r||14;for(var l=[],t=0;t<i.length;t++){var n=i[t-1>=0?t-1:i.length-1],g=i[t],c=i[(t+1)%i.length],y=h[t<h.length?t:h.length-1];if(y===0){l.push(g);continue}var C=s.normalise({x:g.y-n.y,y:n.x-g.x}),v=s.normalise({x:c.y-g.y,y:g.x-c.x}),m=Math.sqrt(2*Math.pow(y,2)),d=s.mult(a.clone(C),y),p=s.normalise(s.mult(s.add(C,v),.5)),S=s.sub(g,s.mult(p,m)),I=o;o===-1&&(I=Math.pow(y,.32)*1.75),I=a.clamp(I,u,r),I%2===1&&(I+=1);for(var x=Math.acos(s.dot(C,v)),M=x/I,P=0;P<I;P++)l.push(s.add(s.rotate(d,M*P),S))}return l},e.clockwiseSort=function(i){var h=e.mean(i);return i.sort(function(o,u){return s.angle(h,o)-s.angle(h,u)}),i},e.isConvex=function(i){var h=0,o=i.length,u,r,l,t;if(o<3)return null;for(u=0;u<o;u++)if(r=(u+1)%o,l=(u+2)%o,t=(i[r].x-i[u].x)*(i[l].y-i[r].y),t-=(i[r].y-i[u].y)*(i[l].x-i[r].x),t<0?h|=1:t>0&&(h|=2),h===3)return!1;return h!==0?!0:null},e.hull=function(i){var h=[],o=[],u,r;for(i=i.slice(0),i.sort(function(l,t){var n=l.x-t.x;return n!==0?n:l.y-t.y}),r=0;r<i.length;r+=1){for(u=i[r];o.length>=2&&s.cross3(o[o.length-2],o[o.length-1],u)<=0;)o.pop();o.push(u)}for(r=i.length-1;r>=0;r-=1){for(u=i[r];h.length>=2&&s.cross3(h[h.length-2],h[h.length-1],u)<=0;)h.pop();h.push(u)}return h.pop(),o.pop(),h.concat(o)}})()},function(w,T,f){var e={};w.exports=e;var s=f(0);(function(){e.on=function(a,i,h){for(var o=i.split(" "),u,r=0;r<o.length;r++)u=o[r],a.events=a.events||{},a.events[u]=a.events[u]||[],a.events[u].push(h);return h},e.off=function(a,i,h){if(!i){a.events={};return}typeof i=="function"&&(h=i,i=s.keys(a.events).join(" "));for(var o=i.split(" "),u=0;u<o.length;u++){var r=a.events[o[u]],l=[];if(h&&r)for(var t=0;t<r.length;t++)r[t]!==h&&l.push(r[t]);a.events[o[u]]=l}},e.trigger=function(a,i,h){var o,u,r,l,t=a.events;if(t&&s.keys(t).length>0){h||(h={}),o=i.split(" ");for(var n=0;n<o.length;n++)if(u=o[n],r=t[u],r){l=s.clone(h,!1),l.name=u,l.source=a;for(var g=0;g<r.length;g++)r[g].apply(a,[l])}}}})()},function(w,T,f){var e={};w.exports=e;var s=f(4),a=f(0),i=f(1),h=f(6);(function(){e.create=function(o){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},o)},e.setModified=function(o,u,r,l){if(o.isModified=u,u&&o.cache&&(o.cache.allBodies=null,o.cache.allConstraints=null,o.cache.allComposites=null),r&&o.parent&&e.setModified(o.parent,u,r,l),l)for(var t=0;t<o.composites.length;t++){var n=o.composites[t];e.setModified(n,u,r,l)}},e.add=function(o,u){var r=[].concat(u);s.trigger(o,"beforeAdd",{object:u});for(var l=0;l<r.length;l++){var t=r[l];switch(t.type){case"body":if(t.parent!==t){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(o,t);break;case"constraint":e.addConstraint(o,t);break;case"composite":e.addComposite(o,t);break;case"mouseConstraint":e.addConstraint(o,t.constraint);break}}return s.trigger(o,"afterAdd",{object:u}),o},e.remove=function(o,u,r){var l=[].concat(u);s.trigger(o,"beforeRemove",{object:u});for(var t=0;t<l.length;t++){var n=l[t];switch(n.type){case"body":e.removeBody(o,n,r);break;case"constraint":e.removeConstraint(o,n,r);break;case"composite":e.removeComposite(o,n,r);break;case"mouseConstraint":e.removeConstraint(o,n.constraint);break}}return s.trigger(o,"afterRemove",{object:u}),o},e.addComposite=function(o,u){return o.composites.push(u),u.parent=o,e.setModified(o,!0,!0,!1),o},e.removeComposite=function(o,u,r){var l=a.indexOf(o.composites,u);if(l!==-1&&e.removeCompositeAt(o,l),r)for(var t=0;t<o.composites.length;t++)e.removeComposite(o.composites[t],u,!0);return o},e.removeCompositeAt=function(o,u){return o.composites.splice(u,1),e.setModified(o,!0,!0,!1),o},e.addBody=function(o,u){return o.bodies.push(u),e.setModified(o,!0,!0,!1),o},e.removeBody=function(o,u,r){var l=a.indexOf(o.bodies,u);if(l!==-1&&e.removeBodyAt(o,l),r)for(var t=0;t<o.composites.length;t++)e.removeBody(o.composites[t],u,!0);return o},e.removeBodyAt=function(o,u){return o.bodies.splice(u,1),e.setModified(o,!0,!0,!1),o},e.addConstraint=function(o,u){return o.constraints.push(u),e.setModified(o,!0,!0,!1),o},e.removeConstraint=function(o,u,r){var l=a.indexOf(o.constraints,u);if(l!==-1&&e.removeConstraintAt(o,l),r)for(var t=0;t<o.composites.length;t++)e.removeConstraint(o.composites[t],u,!0);return o},e.removeConstraintAt=function(o,u){return o.constraints.splice(u,1),e.setModified(o,!0,!0,!1),o},e.clear=function(o,u,r){if(r)for(var l=0;l<o.composites.length;l++)e.clear(o.composites[l],u,!0);return u?o.bodies=o.bodies.filter(function(t){return t.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,e.setModified(o,!0,!0,!1),o},e.allBodies=function(o){if(o.cache&&o.cache.allBodies)return o.cache.allBodies;for(var u=[].concat(o.bodies),r=0;r<o.composites.length;r++)u=u.concat(e.allBodies(o.composites[r]));return o.cache&&(o.cache.allBodies=u),u},e.allConstraints=function(o){if(o.cache&&o.cache.allConstraints)return o.cache.allConstraints;for(var u=[].concat(o.constraints),r=0;r<o.composites.length;r++)u=u.concat(e.allConstraints(o.composites[r]));return o.cache&&(o.cache.allConstraints=u),u},e.allComposites=function(o){if(o.cache&&o.cache.allComposites)return o.cache.allComposites;for(var u=[].concat(o.composites),r=0;r<o.composites.length;r++)u=u.concat(e.allComposites(o.composites[r]));return o.cache&&(o.cache.allComposites=u),u},e.get=function(o,u,r){var l,t;switch(r){case"body":l=e.allBodies(o);break;case"constraint":l=e.allConstraints(o);break;case"composite":l=e.allComposites(o).concat(o);break}return l?(t=l.filter(function(n){return n.id.toString()===u.toString()}),t.length===0?null:t[0]):null},e.move=function(o,u,r){return e.remove(o,u),e.add(r,u),o},e.rebase=function(o){for(var u=e.allBodies(o).concat(e.allConstraints(o)).concat(e.allComposites(o)),r=0;r<u.length;r++)u[r].id=a.nextId();return o},e.translate=function(o,u,r){for(var l=r?e.allBodies(o):o.bodies,t=0;t<l.length;t++)h.translate(l[t],u);return o},e.rotate=function(o,u,r,l){for(var t=Math.cos(u),n=Math.sin(u),g=l?e.allBodies(o):o.bodies,c=0;c<g.length;c++){var y=g[c],C=y.position.x-r.x,v=y.position.y-r.y;h.setPosition(y,{x:r.x+(C*t-v*n),y:r.y+(C*n+v*t)}),h.rotate(y,u)}return o},e.scale=function(o,u,r,l,t){for(var n=t?e.allBodies(o):o.bodies,g=0;g<n.length;g++){var c=n[g],y=c.position.x-l.x,C=c.position.y-l.y;h.setPosition(c,{x:l.x+y*u,y:l.y+C*r}),h.scale(c,u,r)}return o},e.bounds=function(o){for(var u=e.allBodies(o),r=[],l=0;l<u.length;l+=1){var t=u[l];r.push(t.bounds.min,t.bounds.max)}return i.create(r)}})()},function(w,T,f){var e={};w.exports=e;var s=f(3),a=f(2),i=f(7),h=f(16),o=f(0),u=f(1),r=f(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var n={id:o.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},g=o.extend(n,t);return l(g,t),g},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var l=function(t,n){n=n||{},e.set(t,{bounds:t.bounds||u.create(t.vertices),positionPrev:t.positionPrev||a.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),s.rotate(t.vertices,t.angle,t.position),r.rotate(t.axes,t.angle),u.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:n.axes||t.axes,area:n.area||t.area,mass:n.mass||t.mass,inertia:n.inertia||t.inertia});var g=t.isStatic?"#14151f":o.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),c=t.isStatic?"#555":"#ccc",y=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||g,t.render.strokeStyle=t.render.strokeStyle||c,t.render.lineWidth=t.render.lineWidth||y,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,n,g){var c;typeof n=="string"&&(c=n,n={},n[c]=g);for(c in n)if(!!Object.prototype.hasOwnProperty.call(n,c))switch(g=n[c],c){case"isStatic":e.setStatic(t,g);break;case"isSleeping":i.set(t,g);break;case"mass":e.setMass(t,g);break;case"density":e.setDensity(t,g);break;case"inertia":e.setInertia(t,g);break;case"vertices":e.setVertices(t,g);break;case"position":e.setPosition(t,g);break;case"angle":e.setAngle(t,g);break;case"velocity":e.setVelocity(t,g);break;case"angularVelocity":e.setAngularVelocity(t,g);break;case"parts":e.setParts(t,g);break;case"centre":e.setCentre(t,g);break;default:t[c]=g}},e.setStatic=function(t,n){for(var g=0;g<t.parts.length;g++){var c=t.parts[g];c.isStatic=n,n?(c._original={restitution:c.restitution,friction:c.friction,mass:c.mass,inertia:c.inertia,density:c.density,inverseMass:c.inverseMass,inverseInertia:c.inverseInertia},c.restitution=0,c.friction=1,c.mass=c.inertia=c.density=1/0,c.inverseMass=c.inverseInertia=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.angularVelocity=0,c.speed=0,c.angularSpeed=0,c.motion=0):c._original&&(c.restitution=c._original.restitution,c.friction=c._original.friction,c.mass=c._original.mass,c.inertia=c._original.inertia,c.density=c._original.density,c.inverseMass=c._original.inverseMass,c.inverseInertia=c._original.inverseInertia,c._original=null)}},e.setMass=function(t,n){var g=t.inertia/(t.mass/6);t.inertia=g*(n/6),t.inverseInertia=1/t.inertia,t.mass=n,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,n){e.setMass(t,n*t.area),t.density=n},e.setInertia=function(t,n){t.inertia=n,t.inverseInertia=1/t.inertia},e.setVertices=function(t,n){n[0].body===t?t.vertices=n:t.vertices=s.create(n,t),t.axes=r.fromVertices(t.vertices),t.area=s.area(t.vertices),e.setMass(t,t.density*t.area);var g=s.centre(t.vertices);s.translate(t.vertices,g,-1),e.setInertia(t,e._inertiaScale*s.inertia(t.vertices,t.mass)),s.translate(t.vertices,t.position),u.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,n,g){var c;for(n=n.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,c=0;c<n.length;c++){var y=n[c];y!==t&&(y.parent=t,t.parts.push(y))}if(t.parts.length!==1){if(g=typeof g<"u"?g:!0,g){var C=[];for(c=0;c<n.length;c++)C=C.concat(n[c].vertices);s.clockwiseSort(C);var v=s.hull(C),m=s.centre(v);e.setVertices(t,v),s.translate(t.vertices,m)}var d=e._totalProperties(t);t.area=d.area,t.parent=t,t.position.x=d.centre.x,t.position.y=d.centre.y,t.positionPrev.x=d.centre.x,t.positionPrev.y=d.centre.y,e.setMass(t,d.mass),e.setInertia(t,d.inertia),e.setPosition(t,d.centre)}},e.setCentre=function(t,n,g){g?(t.positionPrev.x+=n.x,t.positionPrev.y+=n.y,t.position.x+=n.x,t.position.y+=n.y):(t.positionPrev.x=n.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=n.y-(t.position.y-t.positionPrev.y),t.position.x=n.x,t.position.y=n.y)},e.setPosition=function(t,n){var g=a.sub(n,t.position);t.positionPrev.x+=g.x,t.positionPrev.y+=g.y;for(var c=0;c<t.parts.length;c++){var y=t.parts[c];y.position.x+=g.x,y.position.y+=g.y,s.translate(y.vertices,g),u.update(y.bounds,y.vertices,t.velocity)}},e.setAngle=function(t,n){var g=n-t.angle;t.anglePrev+=g;for(var c=0;c<t.parts.length;c++){var y=t.parts[c];y.angle+=g,s.rotate(y.vertices,g,t.position),r.rotate(y.axes,g),u.update(y.bounds,y.vertices,t.velocity),c>0&&a.rotateAbout(y.position,g,t.position,y.position)}},e.setVelocity=function(t,n){t.positionPrev.x=t.position.x-n.x,t.positionPrev.y=t.position.y-n.y,t.velocity.x=n.x,t.velocity.y=n.y,t.speed=a.magnitude(t.velocity)},e.setAngularVelocity=function(t,n){t.anglePrev=t.angle-n,t.angularVelocity=n,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,n){e.setPosition(t,a.add(t.position,n))},e.rotate=function(t,n,g){if(!g)e.setAngle(t,t.angle+n);else{var c=Math.cos(n),y=Math.sin(n),C=t.position.x-g.x,v=t.position.y-g.y;e.setPosition(t,{x:g.x+(C*c-v*y),y:g.y+(C*y+v*c)}),e.setAngle(t,t.angle+n)}},e.scale=function(t,n,g,c){var y=0,C=0;c=c||t.position;for(var v=0;v<t.parts.length;v++){var m=t.parts[v];s.scale(m.vertices,n,g,c),m.axes=r.fromVertices(m.vertices),m.area=s.area(m.vertices),e.setMass(m,t.density*m.area),s.translate(m.vertices,{x:-m.position.x,y:-m.position.y}),e.setInertia(m,e._inertiaScale*s.inertia(m.vertices,m.mass)),s.translate(m.vertices,{x:m.position.x,y:m.position.y}),v>0&&(y+=m.area,C+=m.inertia),m.position.x=c.x+(m.position.x-c.x)*n,m.position.y=c.y+(m.position.y-c.y)*g,u.update(m.bounds,m.vertices,t.velocity)}t.parts.length>1&&(t.area=y,t.isStatic||(e.setMass(t,t.density*y),e.setInertia(t,C))),t.circleRadius&&(n===g?t.circleRadius*=n:t.circleRadius=null)},e.update=function(t,n,g,c){var y=Math.pow(n*g*t.timeScale,2),C=1-t.frictionAir*g*t.timeScale,v=t.position.x-t.positionPrev.x,m=t.position.y-t.positionPrev.y;t.velocity.x=v*C*c+t.force.x/t.mass*y,t.velocity.y=m*C*c+t.force.y/t.mass*y,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*C*c+t.torque/t.inertia*y,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=a.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var d=0;d<t.parts.length;d++){var p=t.parts[d];s.translate(p.vertices,t.velocity),d>0&&(p.position.x+=t.velocity.x,p.position.y+=t.velocity.y),t.angularVelocity!==0&&(s.rotate(p.vertices,t.angularVelocity,t.position),r.rotate(p.axes,t.angularVelocity),d>0&&a.rotateAbout(p.position,t.angularVelocity,t.position,p.position)),u.update(p.bounds,p.vertices,t.velocity)}},e.applyForce=function(t,n,g){t.force.x+=g.x,t.force.y+=g.y;var c={x:n.x-t.position.x,y:n.y-t.position.y};t.torque+=c.x*g.y-c.y*g.x},e._totalProperties=function(t){for(var n={mass:0,area:0,inertia:0,centre:{x:0,y:0}},g=t.parts.length===1?0:1;g<t.parts.length;g++){var c=t.parts[g],y=c.mass!==1/0?c.mass:1;n.mass+=y,n.area+=c.area,n.inertia+=c.inertia,n.centre=a.add(n.centre,a.mult(c.position,y))}return n.centre=a.div(n.centre,n.mass),n}})()},function(w,T,f){var e={};w.exports=e;var s=f(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(a,i){for(var h=i*i*i,o=0;o<a.length;o++){var u=a[o],r=u.speed*u.speed+u.angularSpeed*u.angularSpeed;if(u.force.x!==0||u.force.y!==0){e.set(u,!1);continue}var l=Math.min(u.motion,r),t=Math.max(u.motion,r);u.motion=e._minBias*l+(1-e._minBias)*t,u.sleepThreshold>0&&u.motion<e._motionSleepThreshold*h?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold&&e.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}},e.afterCollisions=function(a,i){for(var h=i*i*i,o=0;o<a.length;o++){var u=a[o];if(!!u.isActive){var r=u.collision,l=r.bodyA.parent,t=r.bodyB.parent;if(!(l.isSleeping&&t.isSleeping||l.isStatic||t.isStatic)&&(l.isSleeping||t.isSleeping)){var n=l.isSleeping&&!l.isStatic?l:t,g=n===l?t:l;!n.isStatic&&g.motion>e._motionWakeThreshold*h&&e.set(n,!1)}}}},e.set=function(a,i){var h=a.isSleeping;i?(a.isSleeping=!0,a.sleepCounter=a.sleepThreshold,a.positionImpulse.x=0,a.positionImpulse.y=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.speed=0,a.angularSpeed=0,a.motion=0,h||s.trigger(a,"sleepStart")):(a.isSleeping=!1,a.sleepCounter=0,h&&s.trigger(a,"sleepEnd"))}})()},function(w,T,f){var e={};w.exports=e;var s=f(3),a=f(9);(function(){var i=[],h={overlap:0,axis:null},o={overlap:0,axis:null};e.create=function(u,r){return{pair:null,collided:!1,bodyA:u,bodyB:r,parentA:u.parent,parentB:r.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(u,r,l){if(e._overlapAxes(h,u.vertices,r.vertices,u.axes),h.overlap<=0||(e._overlapAxes(o,r.vertices,u.vertices,r.axes),o.overlap<=0))return null;var t=l&&l.table[a.id(u,r)],n;t?n=t.collision:(n=e.create(u,r),n.collided=!0,n.bodyA=u.id<r.id?u:r,n.bodyB=u.id<r.id?r:u,n.parentA=n.bodyA.parent,n.parentB=n.bodyB.parent),u=n.bodyA,r=n.bodyB;var g;h.overlap<o.overlap?g=h:g=o;var c=n.normal,y=n.supports,C=g.axis,v=C.x,m=C.y;v*(r.position.x-u.position.x)+m*(r.position.y-u.position.y)<0?(c.x=v,c.y=m):(c.x=-v,c.y=-m),n.tangent.x=-c.y,n.tangent.y=c.x,n.depth=g.overlap,n.penetration.x=c.x*n.depth,n.penetration.y=c.y*n.depth;var d=e._findSupports(u,r,c,1),p=0;if(s.contains(u.vertices,d[0])&&(y[p++]=d[0]),s.contains(u.vertices,d[1])&&(y[p++]=d[1]),p<2){var S=e._findSupports(r,u,c,-1);s.contains(r.vertices,S[0])&&(y[p++]=S[0]),p<2&&s.contains(r.vertices,S[1])&&(y[p++]=S[1])}return p===0&&(y[p++]=d[0]),y.length=p,n},e._overlapAxes=function(u,r,l,t){var n=r.length,g=l.length,c=r[0].x,y=r[0].y,C=l[0].x,v=l[0].y,m=t.length,d=Number.MAX_VALUE,p=0,S,I,x,M,P,A;for(P=0;P<m;P++){var E=t[P],L=E.x,R=E.y,B=c*L+y*R,O=C*L+v*R,F=B,D=O;for(A=1;A<n;A+=1)M=r[A].x*L+r[A].y*R,M>F?F=M:M<B&&(B=M);for(A=1;A<g;A+=1)M=l[A].x*L+l[A].y*R,M>D?D=M:M<O&&(O=M);if(I=F-O,x=D-B,S=I<x?I:x,S<d&&(d=S,p=P,S<=0))break}u.axis=t[p],u.overlap=d},e._projectToAxis=function(u,r,l){for(var t=r[0].x*l.x+r[0].y*l.y,n=t,g=1;g<r.length;g+=1){var c=r[g].x*l.x+r[g].y*l.y;c>n?n=c:c<t&&(t=c)}u.min=t,u.max=n},e._findSupports=function(u,r,l,t){var n=r.vertices,g=n.length,c=u.position.x,y=u.position.y,C=l.x*t,v=l.y*t,m=Number.MAX_VALUE,d,p,S,I,x;for(x=0;x<g;x+=1)p=n[x],I=C*(c-p.x)+v*(y-p.y),I<m&&(m=I,d=p);return S=n[(g+d.index-1)%g],m=C*(c-S.x)+v*(y-S.y),p=n[(d.index+1)%g],C*(c-p.x)+v*(y-p.y)<m?(i[0]=d,i[1]=p,i):(i[0]=d,i[1]=S,i)}})()},function(w,T,f){var e={};w.exports=e;var s=f(17);(function(){e.create=function(a,i){var h=a.bodyA,o=a.bodyB,u={id:e.id(h,o),bodyA:h,bodyB:o,collision:a,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:h.isSensor||o.isSensor,timeCreated:i,timeUpdated:i,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,a,i),u},e.update=function(a,i,h){var o=a.contacts,u=i.supports,r=a.activeContacts,l=i.parentA,t=i.parentB,n=l.vertices.length;a.isActive=!0,a.timeUpdated=h,a.collision=i,a.separation=i.depth,a.inverseMass=l.inverseMass+t.inverseMass,a.friction=l.friction<t.friction?l.friction:t.friction,a.frictionStatic=l.frictionStatic>t.frictionStatic?l.frictionStatic:t.frictionStatic,a.restitution=l.restitution>t.restitution?l.restitution:t.restitution,a.slop=l.slop>t.slop?l.slop:t.slop,i.pair=a,r.length=0;for(var g=0;g<u.length;g++){var c=u[g],y=c.body===l?c.index:n+c.index,C=o[y];C?r.push(C):r.push(o[y]=s.create(c))}},e.setActive=function(a,i,h){i?(a.isActive=!0,a.timeUpdated=h):(a.isActive=!1,a.activeContacts.length=0)},e.id=function(a,i){return a.id<i.id?"A"+a.id+"B"+i.id:"A"+i.id+"B"+a.id}})()},function(w,T,f){var e={};w.exports=e;var s=f(3),a=f(2),i=f(7),h=f(1),o=f(11),u=f(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(r){var l=r;l.bodyA&&!l.pointA&&(l.pointA={x:0,y:0}),l.bodyB&&!l.pointB&&(l.pointB={x:0,y:0});var t=l.bodyA?a.add(l.bodyA.position,l.pointA):l.pointA,n=l.bodyB?a.add(l.bodyB.position,l.pointB):l.pointB,g=a.magnitude(a.sub(t,n));l.length=typeof l.length<"u"?l.length:g,l.id=l.id||u.nextId(),l.label=l.label||"Constraint",l.type="constraint",l.stiffness=l.stiffness||(l.length>0?1:.7),l.damping=l.damping||0,l.angularStiffness=l.angularStiffness||0,l.angleA=l.bodyA?l.bodyA.angle:l.angleA,l.angleB=l.bodyB?l.bodyB.angle:l.angleB,l.plugin={};var c={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return l.length===0&&l.stiffness>.1?(c.type="pin",c.anchors=!1):l.stiffness<.9&&(c.type="spring"),l.render=u.extend(c,l.render),l},e.preSolveAll=function(r){for(var l=0;l<r.length;l+=1){var t=r[l],n=t.constraintImpulse;t.isStatic||n.x===0&&n.y===0&&n.angle===0||(t.position.x+=n.x,t.position.y+=n.y,t.angle+=n.angle)}},e.solveAll=function(r,l){for(var t=0;t<r.length;t+=1){var n=r[t],g=!n.bodyA||n.bodyA&&n.bodyA.isStatic,c=!n.bodyB||n.bodyB&&n.bodyB.isStatic;(g||c)&&e.solve(r[t],l)}for(t=0;t<r.length;t+=1)n=r[t],g=!n.bodyA||n.bodyA&&n.bodyA.isStatic,c=!n.bodyB||n.bodyB&&n.bodyB.isStatic,!g&&!c&&e.solve(r[t],l)},e.solve=function(r,l){var t=r.bodyA,n=r.bodyB,g=r.pointA,c=r.pointB;if(!(!t&&!n)){t&&!t.isStatic&&(a.rotate(g,t.angle-r.angleA,g),r.angleA=t.angle),n&&!n.isStatic&&(a.rotate(c,n.angle-r.angleB,c),r.angleB=n.angle);var y=g,C=c;if(t&&(y=a.add(t.position,g)),n&&(C=a.add(n.position,c)),!(!y||!C)){var v=a.sub(y,C),m=a.magnitude(v);m<e._minLength&&(m=e._minLength);var d=(m-r.length)/m,p=r.stiffness<1?r.stiffness*l:r.stiffness,S=a.mult(v,d*p),I=(t?t.inverseMass:0)+(n?n.inverseMass:0),x=(t?t.inverseInertia:0)+(n?n.inverseInertia:0),M=I+x,P,A,E,L,R;if(r.damping){var B=a.create();E=a.div(v,m),R=a.sub(n&&a.sub(n.position,n.positionPrev)||B,t&&a.sub(t.position,t.positionPrev)||B),L=a.dot(E,R)}t&&!t.isStatic&&(A=t.inverseMass/I,t.constraintImpulse.x-=S.x*A,t.constraintImpulse.y-=S.y*A,t.position.x-=S.x*A,t.position.y-=S.y*A,r.damping&&(t.positionPrev.x-=r.damping*E.x*L*A,t.positionPrev.y-=r.damping*E.y*L*A),P=a.cross(g,S)/M*e._torqueDampen*t.inverseInertia*(1-r.angularStiffness),t.constraintImpulse.angle-=P,t.angle-=P),n&&!n.isStatic&&(A=n.inverseMass/I,n.constraintImpulse.x+=S.x*A,n.constraintImpulse.y+=S.y*A,n.position.x+=S.x*A,n.position.y+=S.y*A,r.damping&&(n.positionPrev.x+=r.damping*E.x*L*A,n.positionPrev.y+=r.damping*E.y*L*A),P=a.cross(c,S)/M*e._torqueDampen*n.inverseInertia*(1-r.angularStiffness),n.constraintImpulse.angle+=P,n.angle+=P)}}},e.postSolveAll=function(r){for(var l=0;l<r.length;l++){var t=r[l],n=t.constraintImpulse;if(!(t.isStatic||n.x===0&&n.y===0&&n.angle===0)){i.set(t,!1);for(var g=0;g<t.parts.length;g++){var c=t.parts[g];s.translate(c.vertices,n),g>0&&(c.position.x+=n.x,c.position.y+=n.y),n.angle!==0&&(s.rotate(c.vertices,n.angle,t.position),o.rotate(c.axes,n.angle),g>0&&a.rotateAbout(c.position,n.angle,t.position,c.position)),h.update(c.bounds,c.vertices,t.velocity)}n.angle*=e._warming,n.x*=e._warming,n.y*=e._warming}}},e.pointAWorld=function(r){return{x:(r.bodyA?r.bodyA.position.x:0)+r.pointA.x,y:(r.bodyA?r.bodyA.position.y:0)+r.pointA.y}},e.pointBWorld=function(r){return{x:(r.bodyB?r.bodyB.position.x:0)+r.pointB.x,y:(r.bodyB?r.bodyB.position.y:0)+r.pointB.y}}})()},function(w,T,f){var e={};w.exports=e;var s=f(2),a=f(0);(function(){e.fromVertices=function(i){for(var h={},o=0;o<i.length;o++){var u=(o+1)%i.length,r=s.normalise({x:i[u].y-i[o].y,y:i[o].x-i[u].x}),l=r.y===0?1/0:r.x/r.y;l=l.toFixed(3).toString(),h[l]=r}return a.values(h)},e.rotate=function(i,h){if(h!==0)for(var o=Math.cos(h),u=Math.sin(h),r=0;r<i.length;r++){var l=i[r],t;t=l.x*o-l.y*u,l.y=l.x*u+l.y*o,l.x=t}}})()},function(w,T,f){var e={};w.exports=e;var s=f(3),a=f(0),i=f(6),h=f(1),o=f(2);(function(){e.rectangle=function(u,r,l,t,n){n=n||{};var g={label:"Rectangle Body",position:{x:u,y:r},vertices:s.fromPath("L 0 0 L "+l+" 0 L "+l+" "+t+" L 0 "+t)};if(n.chamfer){var c=n.chamfer;g.vertices=s.chamfer(g.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete n.chamfer}return i.create(a.extend({},g,n))},e.trapezoid=function(u,r,l,t,n,g){g=g||{},n*=.5;var c=(1-n*2)*l,y=l*n,C=y+c,v=C+y,m;n<.5?m="L 0 0 L "+y+" "+-t+" L "+C+" "+-t+" L "+v+" 0":m="L 0 0 L "+C+" "+-t+" L "+v+" 0";var d={label:"Trapezoid Body",position:{x:u,y:r},vertices:s.fromPath(m)};if(g.chamfer){var p=g.chamfer;d.vertices=s.chamfer(d.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete g.chamfer}return i.create(a.extend({},d,g))},e.circle=function(u,r,l,t,n){t=t||{};var g={label:"Circle Body",circleRadius:l};n=n||25;var c=Math.ceil(Math.max(10,Math.min(n,l)));return c%2===1&&(c+=1),e.polygon(u,r,c,l,a.extend({},g,t))},e.polygon=function(u,r,l,t,n){if(n=n||{},l<3)return e.circle(u,r,t,n);for(var g=2*Math.PI/l,c="",y=g*.5,C=0;C<l;C+=1){var v=y+C*g,m=Math.cos(v)*t,d=Math.sin(v)*t;c+="L "+m.toFixed(3)+" "+d.toFixed(3)+" "}var p={label:"Polygon Body",position:{x:u,y:r},vertices:s.fromPath(c)};if(n.chamfer){var S=n.chamfer;p.vertices=s.chamfer(p.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete n.chamfer}return i.create(a.extend({},p,n))},e.fromVertices=function(u,r,l,t,n,g,c,y){var C=a.getDecomp(),v,m,d,p,S,I,x,M,P,A,E;for(v=Boolean(C&&C.quickDecomp),t=t||{},d=[],n=typeof n<"u"?n:!1,g=typeof g<"u"?g:.01,c=typeof c<"u"?c:10,y=typeof y<"u"?y:.01,a.isArray(l[0])||(l=[l]),A=0;A<l.length;A+=1)if(I=l[A],p=s.isConvex(I),S=!p,S&&!v&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),p||!v)p?I=s.clockwiseSort(I):I=s.hull(I),d.push({position:{x:u,y:r},vertices:I});else{var L=I.map(function(b){return[b.x,b.y]});C.makeCCW(L),g!==!1&&C.removeCollinearPoints(L,g),y!==!1&&C.removeDuplicatePoints&&C.removeDuplicatePoints(L,y);var R=C.quickDecomp(L);for(x=0;x<R.length;x++){var B=R[x],O=B.map(function(b){return{x:b[0],y:b[1]}});c>0&&s.area(O)<c||d.push({position:s.centre(O),vertices:O})}}for(x=0;x<d.length;x++)d[x]=i.create(a.extend(d[x],t));if(n){var F=5;for(x=0;x<d.length;x++){var D=d[x];for(M=x+1;M<d.length;M++){var W=d[M];if(h.overlaps(D.bounds,W.bounds)){var H=D.vertices,N=W.vertices;for(P=0;P<D.vertices.length;P++)for(E=0;E<W.vertices.length;E++){var U=o.magnitudeSquared(o.sub(H[(P+1)%H.length],N[E])),V=o.magnitudeSquared(o.sub(H[P],N[(E+1)%N.length]));U<F&&V<F&&(H[P].isInternal=!0,N[E].isInternal=!0)}}}}}return d.length>1?(m=i.create(a.extend({parts:d.slice(0)},t)),i.setPosition(m,{x:u,y:r}),m):d[0]}})()},function(w,T,f){var e={};w.exports=e;var s=f(0);(function(){e.create=function(a){var i={};return a||s.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=a||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=parseInt(i.element.getAttribute("data-pixel-ratio"),10)||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(h){var o=e._getRelativeMousePosition(h,i.element,i.pixelRatio),u=h.changedTouches;u&&(i.button=0,h.preventDefault()),i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=h},i.mousedown=function(h){var o=e._getRelativeMousePosition(h,i.element,i.pixelRatio),u=h.changedTouches;u?(i.button=0,h.preventDefault()):i.button=h.button,i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=h},i.mouseup=function(h){var o=e._getRelativeMousePosition(h,i.element,i.pixelRatio),u=h.changedTouches;u&&h.preventDefault(),i.button=-1,i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=h},i.mousewheel=function(h){i.wheelDelta=Math.max(-1,Math.min(1,h.wheelDelta||-h.detail)),h.preventDefault()},e.setElement(i,i.element),i},e.setElement=function(a,i){a.element=i,i.addEventListener("mousemove",a.mousemove),i.addEventListener("mousedown",a.mousedown),i.addEventListener("mouseup",a.mouseup),i.addEventListener("mousewheel",a.mousewheel),i.addEventListener("DOMMouseScroll",a.mousewheel),i.addEventListener("touchmove",a.mousemove),i.addEventListener("touchstart",a.mousedown),i.addEventListener("touchend",a.mouseup)},e.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},e.setOffset=function(a,i){a.offset.x=i.x,a.offset.y=i.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},e.setScale=function(a,i){a.scale.x=i.x,a.scale.y=i.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},e._getRelativeMousePosition=function(a,i,h){var o=i.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,r=window.pageXOffset!==void 0?window.pageXOffset:u.scrollLeft,l=window.pageYOffset!==void 0?window.pageYOffset:u.scrollTop,t=a.changedTouches,n,g;return t?(n=t[0].pageX-o.left-r,g=t[0].pageY-o.top-l):(n=a.pageX-o.left-r,g=a.pageY-o.top-l),{x:n/(i.clientWidth/(i.width||i.clientWidth)*h),y:g/(i.clientHeight/(i.height||i.clientHeight)*h)}}})()},function(w,T,f){var e={};w.exports=e;var s=f(0),a=f(8);(function(){e.create=function(i){var h={bodies:[],pairs:null};return s.extend(h,i)},e.setBodies=function(i,h){i.bodies=h.slice(0)},e.clear=function(i){i.bodies=[]},e.collisions=function(i){var h=[],o=i.pairs,u=i.bodies,r=u.length,l=e.canCollide,t=a.collides,n,g;for(u.sort(e._compareBoundsX),n=0;n<r;n++){var c=u[n],y=c.bounds,C=c.bounds.max.x,v=c.bounds.max.y,m=c.bounds.min.y,d=c.isStatic||c.isSleeping,p=c.parts.length,S=p===1;for(g=n+1;g<r;g++){var I=u[g],x=I.bounds;if(x.min.x>C)break;if(!(v<x.min.y||m>x.max.y)&&!(d&&(I.isStatic||I.isSleeping))&&!!l(c.collisionFilter,I.collisionFilter)){var M=I.parts.length;if(S&&M===1){var P=t(c,I,o);P&&h.push(P)}else for(var A=p>1?1:0,E=M>1?1:0,L=A;L<p;L++)for(var R=c.parts[L],y=R.bounds,B=E;B<M;B++){var O=I.parts[B],x=O.bounds;if(!(y.min.x>x.max.x||y.max.x<x.min.x||y.max.y<x.min.y||y.min.y>x.max.y)){var P=t(R,O,o);P&&h.push(P)}}}}}return h},e.canCollide=function(i,h){return i.group===h.group&&i.group!==0?i.group>0:(i.mask&h.category)!==0&&(h.mask&i.category)!==0},e._compareBoundsX=function(i,h){return i.bounds.min.x-h.bounds.min.x}})()},function(w,T,f){var e={};w.exports=e;var s=f(0);(function(){e._registry={},e.register=function(a){if(e.isPlugin(a)||s.warn("Plugin.register:",e.toString(a),"does not implement all required fields."),a.name in e._registry){var i=e._registry[a.name],h=e.versionParse(a.version).number,o=e.versionParse(i.version).number;h>o?(s.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(a)),e._registry[a.name]=a):h<o?s.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(a)):a!==i&&s.warn("Plugin.register:",e.toString(a),"is already registered to different plugin object")}else e._registry[a.name]=a;return a},e.resolve=function(a){return e._registry[e.dependencyParse(a).name]},e.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},e.isPlugin=function(a){return a&&a.name&&a.version&&a.install},e.isUsed=function(a,i){return a.used.indexOf(i)>-1},e.isFor=function(a,i){var h=a.for&&e.dependencyParse(a.for);return!a.for||i.name===h.name&&e.versionSatisfies(i.version,h.range)},e.use=function(a,i){if(a.uses=(a.uses||[]).concat(i||[]),a.uses.length===0){s.warn("Plugin.use:",e.toString(a),"does not specify any dependencies to install.");return}for(var h=e.dependencies(a),o=s.topologicalSort(h),u=[],r=0;r<o.length;r+=1)if(o[r]!==a.name){var l=e.resolve(o[r]);if(!l){u.push("\u274C "+o[r]);continue}e.isUsed(a,l.name)||(e.isFor(l,a)||(s.warn("Plugin.use:",e.toString(l),"is for",l.for,"but installed on",e.toString(a)+"."),l._warned=!0),l.install?l.install(a):(s.warn("Plugin.use:",e.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(u.push("\u{1F536} "+e.toString(l)),delete l._warned):u.push("\u2705 "+e.toString(l)),a.used.push(l.name))}u.length>0&&s.info(u.join("  "))},e.dependencies=function(a,i){var h=e.dependencyParse(a),o=h.name;if(i=i||{},!(o in i)){a=e.resolve(a)||a,i[o]=s.map(a.uses||[],function(r){e.isPlugin(r)&&e.register(r);var l=e.dependencyParse(r),t=e.resolve(r);return t&&!e.versionSatisfies(t.version,l.range)?(s.warn("Plugin.dependencies:",e.toString(t),"does not satisfy",e.toString(l),"used by",e.toString(h)+"."),t._warned=!0,a._warned=!0):t||(s.warn("Plugin.dependencies:",e.toString(r),"used by",e.toString(h),"could not be resolved."),a._warned=!0),l.name});for(var u=0;u<i[o].length;u+=1)e.dependencies(i[o][u],i);return i}},e.dependencyParse=function(a){if(s.isString(a)){var i=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return i.test(a)||s.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},e.versionParse=function(a){var i=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;i.test(a)||s.warn("Plugin.versionParse:",a,"is not a valid version or range.");var h=i.exec(a),o=Number(h[4]),u=Number(h[5]),r=Number(h[6]);return{isRange:Boolean(h[1]||h[2]),version:h[3],range:a,operator:h[1]||h[2]||"",major:o,minor:u,patch:r,parts:[o,u,r],prerelease:h[7],number:o*1e8+u*1e4+r}},e.versionSatisfies=function(a,i){i=i||"*";var h=e.versionParse(i),o=e.versionParse(a);if(h.isRange){if(h.operator==="*"||a==="*")return!0;if(h.operator===">")return o.number>h.number;if(h.operator===">=")return o.number>=h.number;if(h.operator==="~")return o.major===h.major&&o.minor===h.minor&&o.patch>=h.patch;if(h.operator==="^")return h.major>0?o.major===h.major&&o.number>=h.number:h.minor>0?o.minor===h.minor&&o.patch>=h.patch:o.patch===h.patch}return a===i||a==="*"}})()},function(w,T,f){var e={};w.exports=e;var s=f(0),a=f(5),i=f(1),h=f(4),o=f(2),u=f(13);(function(){var r,l;typeof window<"u"&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(v){window.setTimeout(function(){v(s.now())},1e3/60)},l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(v){var m={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!v.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},d=s.extend(m,v);return d.canvas&&(d.canvas.width=d.options.width||d.canvas.width,d.canvas.height=d.options.height||d.canvas.height),d.mouse=v.mouse,d.engine=v.engine,d.canvas=d.canvas||g(d.options.width,d.options.height),d.context=d.canvas.getContext("2d"),d.textures={},d.bounds=d.bounds||{min:{x:0,y:0},max:{x:d.canvas.width,y:d.canvas.height}},d.options.showBroadphase=!1,d.options.pixelRatio!==1&&e.setPixelRatio(d,d.options.pixelRatio),s.isElement(d.element)?d.element.appendChild(d.canvas):d.canvas.parentNode||s.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),d},e.run=function(v){(function m(d){v.frameRequestId=r(m),t(v,d),e.world(v,d),(v.options.showStats||v.options.showDebug)&&e.stats(v,v.context,d),(v.options.showPerformance||v.options.showDebug)&&e.performance(v,v.context,d)})()},e.stop=function(v){l(v.frameRequestId)},e.setPixelRatio=function(v,m){var d=v.options,p=v.canvas;m==="auto"&&(m=c(p)),d.pixelRatio=m,p.setAttribute("data-pixel-ratio",m),p.width=d.width*m,p.height=d.height*m,p.style.width=d.width+"px",p.style.height=d.height+"px"},e.lookAt=function(v,m,d,p){p=typeof p<"u"?p:!0,m=s.isArray(m)?m:[m],d=d||{x:0,y:0};for(var S={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},I=0;I<m.length;I+=1){var x=m[I],M=x.bounds?x.bounds.min:x.min||x.position||x,P=x.bounds?x.bounds.max:x.max||x.position||x;M&&P&&(M.x<S.min.x&&(S.min.x=M.x),P.x>S.max.x&&(S.max.x=P.x),M.y<S.min.y&&(S.min.y=M.y),P.y>S.max.y&&(S.max.y=P.y))}var A=S.max.x-S.min.x+2*d.x,E=S.max.y-S.min.y+2*d.y,L=v.canvas.height,R=v.canvas.width,B=R/L,O=A/E,F=1,D=1;O>B?D=O/B:F=B/O,v.options.hasBounds=!0,v.bounds.min.x=S.min.x,v.bounds.max.x=S.min.x+A*F,v.bounds.min.y=S.min.y,v.bounds.max.y=S.min.y+E*D,p&&(v.bounds.min.x+=A*.5-A*F*.5,v.bounds.max.x+=A*.5-A*F*.5,v.bounds.min.y+=E*.5-E*D*.5,v.bounds.max.y+=E*.5-E*D*.5),v.bounds.min.x-=d.x,v.bounds.max.x-=d.x,v.bounds.min.y-=d.y,v.bounds.max.y-=d.y,v.mouse&&(u.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.canvas.width,y:(v.bounds.max.y-v.bounds.min.y)/v.canvas.height}),u.setOffset(v.mouse,v.bounds.min))},e.startViewTransform=function(v){var m=v.bounds.max.x-v.bounds.min.x,d=v.bounds.max.y-v.bounds.min.y,p=m/v.options.width,S=d/v.options.height;v.context.setTransform(v.options.pixelRatio/p,0,0,v.options.pixelRatio/S,0,0),v.context.translate(-v.bounds.min.x,-v.bounds.min.y)},e.endViewTransform=function(v){v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0)},e.world=function(v,m){var d=s.now(),p=v.engine,S=p.world,I=v.canvas,x=v.context,M=v.options,P=v.timing,A=a.allBodies(S),E=a.allConstraints(S),L=M.wireframes?M.wireframeBackground:M.background,R=[],B=[],O,F={timestamp:p.timing.timestamp};if(h.trigger(v,"beforeRender",F),v.currentBackground!==L&&C(v,L),x.globalCompositeOperation="source-in",x.fillStyle="transparent",x.fillRect(0,0,I.width,I.height),x.globalCompositeOperation="source-over",M.hasBounds){for(O=0;O<A.length;O++){var D=A[O];i.overlaps(D.bounds,v.bounds)&&R.push(D)}for(O=0;O<E.length;O++){var W=E[O],H=W.bodyA,N=W.bodyB,U=W.pointA,V=W.pointB;H&&(U=o.add(H.position,W.pointA)),N&&(V=o.add(N.position,W.pointB)),!(!U||!V)&&(i.contains(v.bounds,U)||i.contains(v.bounds,V))&&B.push(W)}e.startViewTransform(v),v.mouse&&(u.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.options.width,y:(v.bounds.max.y-v.bounds.min.y)/v.options.height}),u.setOffset(v.mouse,v.bounds.min))}else B=E,R=A,v.options.pixelRatio!==1&&v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0);!M.wireframes||p.enableSleeping&&M.showSleeping?e.bodies(v,R,x):(M.showConvexHulls&&e.bodyConvexHulls(v,R,x),e.bodyWireframes(v,R,x)),M.showBounds&&e.bodyBounds(v,R,x),(M.showAxes||M.showAngleIndicator)&&e.bodyAxes(v,R,x),M.showPositions&&e.bodyPositions(v,R,x),M.showVelocity&&e.bodyVelocity(v,R,x),M.showIds&&e.bodyIds(v,R,x),M.showSeparations&&e.separations(v,p.pairs.list,x),M.showCollisions&&e.collisions(v,p.pairs.list,x),M.showVertexNumbers&&e.vertexNumbers(v,R,x),M.showMousePosition&&e.mousePosition(v,v.mouse,x),e.constraints(B,x),M.hasBounds&&e.endViewTransform(v),h.trigger(v,"afterRender",F),P.lastElapsed=s.now()-d},e.stats=function(v,m,d){for(var p=v.engine,S=p.world,I=a.allBodies(S),x=0,M=55,P=44,A=0,E=0,L=0;L<I.length;L+=1)x+=I[L].parts.length;var R={Part:x,Body:I.length,Cons:a.allConstraints(S).length,Comp:a.allComposites(S).length,Pair:p.pairs.list.length};m.fillStyle="#0e0f19",m.fillRect(A,E,M*5.5,P),m.font="12px Arial",m.textBaseline="top",m.textAlign="right";for(var B in R){var O=R[B];m.fillStyle="#aaa",m.fillText(B,A+M,E+8),m.fillStyle="#eee",m.fillText(O,A+M,E+26),A+=M}},e.performance=function(v,m){var d=v.engine,p=v.timing,S=p.deltaHistory,I=p.elapsedHistory,x=p.timestampElapsedHistory,M=p.engineDeltaHistory,P=p.engineElapsedHistory,A=d.timing.lastDelta,E=n(S),L=n(I),R=n(M),B=n(P),O=n(x),F=O/E||0,D=1e3/E||0,W=4,H=12,N=60,U=34,V=10,b=69;m.fillStyle="#0e0f19",m.fillRect(0,50,H*4+N*5+22,U),e.status(m,V,b,N,W,S.length,Math.round(D)+" fps",D/e._goodFps,function(z){return S[z]/E-1}),e.status(m,V+H+N,b,N,W,M.length,A.toFixed(2)+" dt",e._goodDelta/A,function(z){return M[z]/R-1}),e.status(m,V+(H+N)*2,b,N,W,P.length,B.toFixed(2)+" ut",1-B/e._goodFps,function(z){return P[z]/B-1}),e.status(m,V+(H+N)*3,b,N,W,I.length,L.toFixed(2)+" rt",1-L/e._goodFps,function(z){return I[z]/L-1}),e.status(m,V+(H+N)*4,b,N,W,x.length,F.toFixed(2)+" x",F*F*F,function(z){return(x[z]/S[z]/F||0)-1})},e.status=function(v,m,d,p,S,I,x,M,P){v.strokeStyle="#888",v.fillStyle="#444",v.lineWidth=1,v.fillRect(m,d+7,p,1),v.beginPath(),v.moveTo(m,d+7-S*s.clamp(.4*P(0),-2,2));for(var A=0;A<p;A+=1)v.lineTo(m+A,d+7-(A<I?S*s.clamp(.4*P(A),-2,2):0));v.stroke(),v.fillStyle="hsl("+s.clamp(25+95*M,0,120)+",100%,60%)",v.fillRect(m,d-7,4,4),v.font="12px Arial",v.textBaseline="middle",v.textAlign="right",v.fillStyle="#eee",v.fillText(x,m+p,d-5)},e.constraints=function(v,m){for(var d=m,p=0;p<v.length;p++){var S=v[p];if(!(!S.render.visible||!S.pointA||!S.pointB)){var I=S.bodyA,x=S.bodyB,M,P;if(I?M=o.add(I.position,S.pointA):M=S.pointA,S.render.type==="pin")d.beginPath(),d.arc(M.x,M.y,3,0,2*Math.PI),d.closePath();else{if(x?P=o.add(x.position,S.pointB):P=S.pointB,d.beginPath(),d.moveTo(M.x,M.y),S.render.type==="spring")for(var A=o.sub(P,M),E=o.perp(o.normalise(A)),L=Math.ceil(s.clamp(S.length/5,12,20)),R,B=1;B<L;B+=1)R=B%2===0?1:-1,d.lineTo(M.x+A.x*(B/L)+E.x*R*4,M.y+A.y*(B/L)+E.y*R*4);d.lineTo(P.x,P.y)}S.render.lineWidth&&(d.lineWidth=S.render.lineWidth,d.strokeStyle=S.render.strokeStyle,d.stroke()),S.render.anchors&&(d.fillStyle=S.render.strokeStyle,d.beginPath(),d.arc(M.x,M.y,3,0,2*Math.PI),d.arc(P.x,P.y,3,0,2*Math.PI),d.closePath(),d.fill())}}},e.bodies=function(v,m,d){var p=d,S=v.engine,I=v.options,x=I.showInternalEdges||!I.wireframes,M,P,A,E;for(A=0;A<m.length;A++)if(M=m[A],!!M.render.visible){for(E=M.parts.length>1?1:0;E<M.parts.length;E++)if(P=M.parts[E],!!P.render.visible){if(I.showSleeping&&M.isSleeping?p.globalAlpha=.5*P.render.opacity:P.render.opacity!==1&&(p.globalAlpha=P.render.opacity),P.render.sprite&&P.render.sprite.texture&&!I.wireframes){var L=P.render.sprite,R=y(v,L.texture);p.translate(P.position.x,P.position.y),p.rotate(P.angle),p.drawImage(R,R.width*-L.xOffset*L.xScale,R.height*-L.yOffset*L.yScale,R.width*L.xScale,R.height*L.yScale),p.rotate(-P.angle),p.translate(-P.position.x,-P.position.y)}else{if(P.circleRadius)p.beginPath(),p.arc(P.position.x,P.position.y,P.circleRadius,0,2*Math.PI);else{p.beginPath(),p.moveTo(P.vertices[0].x,P.vertices[0].y);for(var B=1;B<P.vertices.length;B++)!P.vertices[B-1].isInternal||x?p.lineTo(P.vertices[B].x,P.vertices[B].y):p.moveTo(P.vertices[B].x,P.vertices[B].y),P.vertices[B].isInternal&&!x&&p.moveTo(P.vertices[(B+1)%P.vertices.length].x,P.vertices[(B+1)%P.vertices.length].y);p.lineTo(P.vertices[0].x,P.vertices[0].y),p.closePath()}I.wireframes?(p.lineWidth=1,p.strokeStyle="#bbb",p.stroke()):(p.fillStyle=P.render.fillStyle,P.render.lineWidth&&(p.lineWidth=P.render.lineWidth,p.strokeStyle=P.render.strokeStyle,p.stroke()),p.fill())}p.globalAlpha=1}}},e.bodyWireframes=function(v,m,d){var p=d,S=v.options.showInternalEdges,I,x,M,P,A;for(p.beginPath(),M=0;M<m.length;M++)if(I=m[M],!!I.render.visible)for(A=I.parts.length>1?1:0;A<I.parts.length;A++){for(x=I.parts[A],p.moveTo(x.vertices[0].x,x.vertices[0].y),P=1;P<x.vertices.length;P++)!x.vertices[P-1].isInternal||S?p.lineTo(x.vertices[P].x,x.vertices[P].y):p.moveTo(x.vertices[P].x,x.vertices[P].y),x.vertices[P].isInternal&&!S&&p.moveTo(x.vertices[(P+1)%x.vertices.length].x,x.vertices[(P+1)%x.vertices.length].y);p.lineTo(x.vertices[0].x,x.vertices[0].y)}p.lineWidth=1,p.strokeStyle="#bbb",p.stroke()},e.bodyConvexHulls=function(v,m,d){var p=d,S,I,x,M,P;for(p.beginPath(),x=0;x<m.length;x++)if(S=m[x],!(!S.render.visible||S.parts.length===1)){for(p.moveTo(S.vertices[0].x,S.vertices[0].y),M=1;M<S.vertices.length;M++)p.lineTo(S.vertices[M].x,S.vertices[M].y);p.lineTo(S.vertices[0].x,S.vertices[0].y)}p.lineWidth=1,p.strokeStyle="rgba(255,255,255,0.2)",p.stroke()},e.vertexNumbers=function(v,m,d){var p=d,S,I,x;for(S=0;S<m.length;S++){var M=m[S].parts;for(x=M.length>1?1:0;x<M.length;x++){var P=M[x];for(I=0;I<P.vertices.length;I++)p.fillStyle="rgba(255,255,255,0.2)",p.fillText(S+"_"+I,P.position.x+(P.vertices[I].x-P.position.x)*.8,P.position.y+(P.vertices[I].y-P.position.y)*.8)}}},e.mousePosition=function(v,m,d){var p=d;p.fillStyle="rgba(255,255,255,0.8)",p.fillText(m.position.x+"  "+m.position.y,m.position.x+5,m.position.y-5)},e.bodyBounds=function(v,m,d){var p=d,S=v.engine,I=v.options;p.beginPath();for(var x=0;x<m.length;x++){var M=m[x];if(M.render.visible)for(var P=m[x].parts,A=P.length>1?1:0;A<P.length;A++){var E=P[A];p.rect(E.bounds.min.x,E.bounds.min.y,E.bounds.max.x-E.bounds.min.x,E.bounds.max.y-E.bounds.min.y)}}I.wireframes?p.strokeStyle="rgba(255,255,255,0.08)":p.strokeStyle="rgba(0,0,0,0.1)",p.lineWidth=1,p.stroke()},e.bodyAxes=function(v,m,d){var p=d,S=v.engine,I=v.options,x,M,P,A;for(p.beginPath(),M=0;M<m.length;M++){var E=m[M],L=E.parts;if(!!E.render.visible)if(I.showAxes)for(P=L.length>1?1:0;P<L.length;P++)for(x=L[P],A=0;A<x.axes.length;A++){var R=x.axes[A];p.moveTo(x.position.x,x.position.y),p.lineTo(x.position.x+R.x*20,x.position.y+R.y*20)}else for(P=L.length>1?1:0;P<L.length;P++)for(x=L[P],A=0;A<x.axes.length;A++)p.moveTo(x.position.x,x.position.y),p.lineTo((x.vertices[0].x+x.vertices[x.vertices.length-1].x)/2,(x.vertices[0].y+x.vertices[x.vertices.length-1].y)/2)}I.wireframes?(p.strokeStyle="indianred",p.lineWidth=1):(p.strokeStyle="rgba(255, 255, 255, 0.4)",p.globalCompositeOperation="overlay",p.lineWidth=2),p.stroke(),p.globalCompositeOperation="source-over"},e.bodyPositions=function(v,m,d){var p=d,S=v.engine,I=v.options,x,M,P,A;for(p.beginPath(),P=0;P<m.length;P++)if(x=m[P],!!x.render.visible)for(A=0;A<x.parts.length;A++)M=x.parts[A],p.arc(M.position.x,M.position.y,3,0,2*Math.PI,!1),p.closePath();for(I.wireframes?p.fillStyle="indianred":p.fillStyle="rgba(0,0,0,0.5)",p.fill(),p.beginPath(),P=0;P<m.length;P++)x=m[P],x.render.visible&&(p.arc(x.positionPrev.x,x.positionPrev.y,2,0,2*Math.PI,!1),p.closePath());p.fillStyle="rgba(255,165,0,0.8)",p.fill()},e.bodyVelocity=function(v,m,d){var p=d;p.beginPath();for(var S=0;S<m.length;S++){var I=m[S];!I.render.visible||(p.moveTo(I.position.x,I.position.y),p.lineTo(I.position.x+(I.position.x-I.positionPrev.x)*2,I.position.y+(I.position.y-I.positionPrev.y)*2))}p.lineWidth=3,p.strokeStyle="cornflowerblue",p.stroke()},e.bodyIds=function(v,m,d){var p=d,S,I;for(S=0;S<m.length;S++)if(!!m[S].render.visible){var x=m[S].parts;for(I=x.length>1?1:0;I<x.length;I++){var M=x[I];p.font="12px Arial",p.fillStyle="rgba(255,255,255,0.5)",p.fillText(M.id,M.position.x+10,M.position.y-10)}}},e.collisions=function(v,m,d){var p=d,S=v.options,I,x,M,P,A,E,L;for(p.beginPath(),E=0;E<m.length;E++)if(I=m[E],!!I.isActive)for(x=I.collision,L=0;L<I.activeContacts.length;L++){var R=I.activeContacts[L],B=R.vertex;p.rect(B.x-1.5,B.y-1.5,3.5,3.5)}for(S.wireframes?p.fillStyle="rgba(255,255,255,0.7)":p.fillStyle="orange",p.fill(),p.beginPath(),E=0;E<m.length;E++)if(I=m[E],!!I.isActive&&(x=I.collision,I.activeContacts.length>0)){var O=I.activeContacts[0].vertex.x,F=I.activeContacts[0].vertex.y;I.activeContacts.length===2&&(O=(I.activeContacts[0].vertex.x+I.activeContacts[1].vertex.x)/2,F=(I.activeContacts[0].vertex.y+I.activeContacts[1].vertex.y)/2),x.bodyB===x.supports[0].body||x.bodyA.isStatic===!0?p.moveTo(O-x.normal.x*8,F-x.normal.y*8):p.moveTo(O+x.normal.x*8,F+x.normal.y*8),p.lineTo(O,F)}S.wireframes?p.strokeStyle="rgba(255,165,0,0.7)":p.strokeStyle="orange",p.lineWidth=1,p.stroke()},e.separations=function(v,m,d){var p=d,S=v.options,I,x,M,P,A,E,L;for(p.beginPath(),E=0;E<m.length;E++)if(I=m[E],!!I.isActive){x=I.collision,P=x.bodyA,A=x.bodyB;var R=1;!A.isStatic&&!P.isStatic&&(R=.5),A.isStatic&&(R=0),p.moveTo(A.position.x,A.position.y),p.lineTo(A.position.x-x.penetration.x*R,A.position.y-x.penetration.y*R),R=1,!A.isStatic&&!P.isStatic&&(R=.5),P.isStatic&&(R=0),p.moveTo(P.position.x,P.position.y),p.lineTo(P.position.x+x.penetration.x*R,P.position.y+x.penetration.y*R)}S.wireframes?p.strokeStyle="rgba(255,165,0,0.5)":p.strokeStyle="orange",p.stroke()},e.inspector=function(v,m){var d=v.engine,p=v.selected,S=v.render,I=S.options,x;if(I.hasBounds){var M=S.bounds.max.x-S.bounds.min.x,P=S.bounds.max.y-S.bounds.min.y,A=M/S.options.width,E=P/S.options.height;m.scale(1/A,1/E),m.translate(-S.bounds.min.x,-S.bounds.min.y)}for(var L=0;L<p.length;L++){var R=p[L].data;switch(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.9)",m.setLineDash([1,2]),R.type){case"body":x=R.bounds,m.beginPath(),m.rect(Math.floor(x.min.x-3),Math.floor(x.min.y-3),Math.floor(x.max.x-x.min.x+6),Math.floor(x.max.y-x.min.y+6)),m.closePath(),m.stroke();break;case"constraint":var B=R.pointA;R.bodyA&&(B=R.pointB),m.beginPath(),m.arc(B.x,B.y,10,0,2*Math.PI),m.closePath(),m.stroke();break}m.setLineDash([]),m.translate(-.5,-.5)}v.selectStart!==null&&(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.6)",m.fillStyle="rgba(255,165,0,0.1)",x=v.selectBounds,m.beginPath(),m.rect(Math.floor(x.min.x),Math.floor(x.min.y),Math.floor(x.max.x-x.min.x),Math.floor(x.max.y-x.min.y)),m.closePath(),m.stroke(),m.fill(),m.translate(-.5,-.5)),I.hasBounds&&m.setTransform(1,0,0,1,0,0)};var t=function(v,m){var d=v.engine,p=v.timing,S=p.historySize,I=d.timing.timestamp;p.delta=m-p.lastTime||e._goodDelta,p.lastTime=m,p.timestampElapsed=I-p.lastTimestamp||0,p.lastTimestamp=I,p.deltaHistory.unshift(p.delta),p.deltaHistory.length=Math.min(p.deltaHistory.length,S),p.engineDeltaHistory.unshift(d.timing.lastDelta),p.engineDeltaHistory.length=Math.min(p.engineDeltaHistory.length,S),p.timestampElapsedHistory.unshift(p.timestampElapsed),p.timestampElapsedHistory.length=Math.min(p.timestampElapsedHistory.length,S),p.engineElapsedHistory.unshift(d.timing.lastElapsed),p.engineElapsedHistory.length=Math.min(p.engineElapsedHistory.length,S),p.elapsedHistory.unshift(p.lastElapsed),p.elapsedHistory.length=Math.min(p.elapsedHistory.length,S)},n=function(v){for(var m=0,d=0;d<v.length;d+=1)m+=v[d];return m/v.length||0},g=function(v,m){var d=document.createElement("canvas");return d.width=v,d.height=m,d.oncontextmenu=function(){return!1},d.onselectstart=function(){return!1},d},c=function(v){var m=v.getContext("2d"),d=window.devicePixelRatio||1,p=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;return d/p},y=function(v,m){var d=v.textures[m];return d||(d=v.textures[m]=new Image,d.src=m,d)},C=function(v,m){var d=m;/(jpg|gif|png)$/.test(m)&&(d="url("+m+")"),v.canvas.style.background=d,v.canvas.style.backgroundSize="contain",v.currentBackground=m}})()},function(w,T){var f={};w.exports=f,function(){f.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(w,T,f){var e={};w.exports=e;var s=f(7),a=f(19),i=f(14),h=f(20),o=f(4),u=f(5),r=f(10),l=f(0),t=f(6);(function(){e.create=function(n){n=n||{};var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},c=l.extend(g,n);return c.world=n.world||u.create({label:"World"}),c.pairs=n.pairs||h.create(),c.detector=n.detector||i.create(),c.grid={buckets:[]},c.world.gravity=c.gravity,c.broadphase=c.grid,c.metrics={},c},e.update=function(n,g,c){var y=l.now();g=g||1e3/60,c=c||1;var C=n.world,v=n.detector,m=n.pairs,d=n.timing,p=d.timestamp,S;d.timestamp+=g*d.timeScale,d.lastDelta=g*d.timeScale;var I={timestamp:d.timestamp};o.trigger(n,"beforeUpdate",I);var x=u.allBodies(C),M=u.allConstraints(C);for(C.isModified&&i.setBodies(v,x),C.isModified&&u.setModified(C,!1,!1,!0),n.enableSleeping&&s.update(x,d.timeScale),e._bodiesApplyGravity(x,n.gravity),e._bodiesUpdate(x,g,d.timeScale,c,C.bounds),r.preSolveAll(x),S=0;S<n.constraintIterations;S++)r.solveAll(M,d.timeScale);r.postSolveAll(x),v.pairs=n.pairs;var P=i.collisions(v);for(h.update(m,P,p),n.enableSleeping&&s.afterCollisions(m.list,d.timeScale),m.collisionStart.length>0&&o.trigger(n,"collisionStart",{pairs:m.collisionStart}),a.preSolvePosition(m.list),S=0;S<n.positionIterations;S++)a.solvePosition(m.list,d.timeScale);for(a.postSolvePosition(x),r.preSolveAll(x),S=0;S<n.constraintIterations;S++)r.solveAll(M,d.timeScale);for(r.postSolveAll(x),a.preSolveVelocity(m.list),S=0;S<n.velocityIterations;S++)a.solveVelocity(m.list,d.timeScale);return m.collisionActive.length>0&&o.trigger(n,"collisionActive",{pairs:m.collisionActive}),m.collisionEnd.length>0&&o.trigger(n,"collisionEnd",{pairs:m.collisionEnd}),e._bodiesClearForces(x),o.trigger(n,"afterUpdate",I),n.timing.lastElapsed=l.now()-y,n},e.merge=function(n,g){if(l.extend(n,g),g.world){n.world=g.world,e.clear(n);for(var c=u.allBodies(n.world),y=0;y<c.length;y++){var C=c[y];s.set(C,!1),C.id=l.nextId()}}},e.clear=function(n){h.clear(n.pairs),i.clear(n.detector)},e._bodiesClearForces=function(n){for(var g=0;g<n.length;g++){var c=n[g];c.force.x=0,c.force.y=0,c.torque=0}},e._bodiesApplyGravity=function(n,g){var c=typeof g.scale<"u"?g.scale:.001;if(!(g.x===0&&g.y===0||c===0))for(var y=0;y<n.length;y++){var C=n[y];C.isStatic||C.isSleeping||(C.force.y+=C.mass*g.y*c,C.force.x+=C.mass*g.x*c)}},e._bodiesUpdate=function(n,g,c,y,C){for(var v=0;v<n.length;v++){var m=n[v];m.isStatic||m.isSleeping||t.update(m,g,c,y)}}})()},function(w,T,f){var e={};w.exports=e;var s=f(3),a=f(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var h,o,u,r=i.length;for(h=0;h<r;h++)o=i[h],!!o.isActive&&(u=o.activeContacts.length,o.collision.parentA.totalContacts+=u,o.collision.parentB.totalContacts+=u)},e.solvePosition=function(i,h){var o,u,r,l,t,n,g,c,y=e._positionDampen,C=i.length;for(o=0;o<C;o++)u=i[o],!(!u.isActive||u.isSensor)&&(r=u.collision,l=r.parentA,t=r.parentB,n=r.normal,u.separation=n.x*(t.positionImpulse.x+r.penetration.x-l.positionImpulse.x)+n.y*(t.positionImpulse.y+r.penetration.y-l.positionImpulse.y));for(o=0;o<C;o++)u=i[o],!(!u.isActive||u.isSensor)&&(r=u.collision,l=r.parentA,t=r.parentB,n=r.normal,c=(u.separation-u.slop)*h,(l.isStatic||t.isStatic)&&(c*=2),l.isStatic||l.isSleeping||(g=y/l.totalContacts,l.positionImpulse.x+=n.x*c*g,l.positionImpulse.y+=n.y*c*g),t.isStatic||t.isSleeping||(g=y/t.totalContacts,t.positionImpulse.x-=n.x*c*g,t.positionImpulse.y-=n.y*c*g))},e.postSolvePosition=function(i){for(var h=e._positionWarming,o=i.length,u=s.translate,r=a.update,l=0;l<o;l++){var t=i[l],n=t.positionImpulse,g=n.x,c=n.y,y=t.velocity;if(t.totalContacts=0,g!==0||c!==0){for(var C=0;C<t.parts.length;C++){var v=t.parts[C];u(v.vertices,n),r(v.bounds,v.vertices,y),v.position.x+=g,v.position.y+=c}t.positionPrev.x+=g,t.positionPrev.y+=c,g*y.x+c*y.y<0?(n.x=0,n.y=0):(n.x*=h,n.y*=h)}}},e.preSolveVelocity=function(i){var h=i.length,o,u;for(o=0;o<h;o++){var r=i[o];if(!(!r.isActive||r.isSensor)){var l=r.activeContacts,t=l.length,n=r.collision,g=n.parentA,c=n.parentB,y=n.normal,C=n.tangent;for(u=0;u<t;u++){var v=l[u],m=v.vertex,d=v.normalImpulse,p=v.tangentImpulse;if(d!==0||p!==0){var S=y.x*d+C.x*p,I=y.y*d+C.y*p;g.isStatic||g.isSleeping||(g.positionPrev.x+=S*g.inverseMass,g.positionPrev.y+=I*g.inverseMass,g.anglePrev+=g.inverseInertia*((m.x-g.position.x)*I-(m.y-g.position.y)*S)),c.isStatic||c.isSleeping||(c.positionPrev.x-=S*c.inverseMass,c.positionPrev.y-=I*c.inverseMass,c.anglePrev-=c.inverseInertia*((m.x-c.position.x)*I-(m.y-c.position.y)*S))}}}}},e.solveVelocity=function(i,h){var o=h*h,u=e._restingThresh*o,r=e._frictionNormalMultiplier,l=e._restingThreshTangent*o,t=Number.MAX_VALUE,n=i.length,g,c,y,C;for(y=0;y<n;y++){var v=i[y];if(!(!v.isActive||v.isSensor)){var m=v.collision,d=m.parentA,p=m.parentB,S=d.velocity,I=p.velocity,x=m.normal.x,M=m.normal.y,P=m.tangent.x,A=m.tangent.y,E=v.activeContacts,L=E.length,R=1/L,B=d.inverseMass+p.inverseMass,O=v.friction*v.frictionStatic*r*o;for(S.x=d.position.x-d.positionPrev.x,S.y=d.position.y-d.positionPrev.y,I.x=p.position.x-p.positionPrev.x,I.y=p.position.y-p.positionPrev.y,d.angularVelocity=d.angle-d.anglePrev,p.angularVelocity=p.angle-p.anglePrev,C=0;C<L;C++){var F=E[C],D=F.vertex,W=D.x-d.position.x,H=D.y-d.position.y,N=D.x-p.position.x,U=D.y-p.position.y,V=S.x-H*d.angularVelocity,b=S.y+W*d.angularVelocity,z=I.x-U*p.angularVelocity,Ae=I.y+N*p.angularVelocity,ue=V-z,ce=b-Ae,Q=x*ue+M*ce,j=P*ue+A*ce,ve=v.separation+Q,_=Math.min(ve,1);_=ve<0?0:_;var he=_*O;j>he||-j>he?(c=j>0?j:-j,g=v.friction*(j>0?1:-1)*o,g<-c?g=-c:g>c&&(g=c)):(g=j,c=t);var me=W*M-H*x,ge=N*M-U*x,pe=R/(B+d.inverseInertia*me*me+p.inverseInertia*ge*ge),Z=(1+v.restitution)*Q*pe;if(g*=pe,Q*Q>u&&Q<0)F.normalImpulse=0;else{var Ee=F.normalImpulse;F.normalImpulse+=Z,F.normalImpulse=Math.min(F.normalImpulse,0),Z=F.normalImpulse-Ee}if(j*j>l)F.tangentImpulse=0;else{var Re=F.tangentImpulse;F.tangentImpulse+=g,F.tangentImpulse<-c&&(F.tangentImpulse=-c),F.tangentImpulse>c&&(F.tangentImpulse=c),g=F.tangentImpulse-Re}var X=x*Z+P*g,K=M*Z+A*g;d.isStatic||d.isSleeping||(d.positionPrev.x+=X*d.inverseMass,d.positionPrev.y+=K*d.inverseMass,d.anglePrev+=(W*K-H*X)*d.inverseInertia),p.isStatic||p.isSleeping||(p.positionPrev.x-=X*p.inverseMass,p.positionPrev.y-=K*p.inverseMass,p.anglePrev-=(N*K-U*X)*p.inverseInertia)}}}}})()},function(w,T,f){var e={};w.exports=e;var s=f(9),a=f(0);(function(){e.create=function(i){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},i)},e.update=function(i,h,o){var u=i.list,r=u.length,l=i.table,t=h.length,n=i.collisionStart,g=i.collisionEnd,c=i.collisionActive,y,C,v,m;for(n.length=0,g.length=0,c.length=0,m=0;m<r;m++)u[m].confirmedActive=!1;for(m=0;m<t;m++)y=h[m],v=y.pair,v?(v.isActive?c.push(v):n.push(v),s.update(v,y,o),v.confirmedActive=!0):(v=s.create(y,o),l[v.id]=v,n.push(v),u.push(v));var d=[];for(r=u.length,m=0;m<r;m++)v=u[m],v.confirmedActive||(s.setActive(v,!1,o),g.push(v),!v.collision.bodyA.isSleeping&&!v.collision.bodyB.isSleeping&&d.push(m));for(m=0;m<d.length;m++)C=d[m]-m,v=u[C],u.splice(C,1),delete l[v.id]},e.clear=function(i){return i.table={},i.list.length=0,i.collisionStart.length=0,i.collisionActive.length=0,i.collisionEnd.length=0,i}})()},function(w,T,f){var e=w.exports=f(22);e.Axes=f(11),e.Bodies=f(12),e.Body=f(6),e.Bounds=f(1),e.Collision=f(8),e.Common=f(0),e.Composite=f(5),e.Composites=f(23),e.Constraint=f(10),e.Contact=f(17),e.Detector=f(14),e.Engine=f(18),e.Events=f(4),e.Grid=f(24),e.Mouse=f(13),e.MouseConstraint=f(25),e.Pair=f(9),e.Pairs=f(20),e.Plugin=f(15),e.Query=f(26),e.Render=f(16),e.Resolver=f(19),e.Runner=f(27),e.SAT=f(28),e.Sleeping=f(7),e.Svg=f(29),e.Vector=f(2),e.Vertices=f(3),e.World=f(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(w,T,f){var e={};w.exports=e;var s=f(15),a=f(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){s.use(e,Array.prototype.slice.call(arguments))},e.before=function(i,h){return i=i.replace(/^Matter./,""),a.chainPathBefore(e,i,h)},e.after=function(i,h){return i=i.replace(/^Matter./,""),a.chainPathAfter(e,i,h)}})()},function(w,T,f){var e={};w.exports=e;var s=f(5),a=f(10),i=f(0),h=f(6),o=f(12),u=i.deprecated;(function(){e.stack=function(r,l,t,n,g,c,y){for(var C=s.create({label:"Stack"}),v=r,m=l,d,p=0,S=0;S<n;S++){for(var I=0,x=0;x<t;x++){var M=y(v,m,x,S,d,p);if(M){var P=M.bounds.max.y-M.bounds.min.y,A=M.bounds.max.x-M.bounds.min.x;P>I&&(I=P),h.translate(M,{x:A*.5,y:P*.5}),v=M.bounds.max.x+g,s.addBody(C,M),d=M,p+=1}else v+=g}m+=I+c,v=r}return C},e.chain=function(r,l,t,n,g,c){for(var y=r.bodies,C=1;C<y.length;C++){var v=y[C-1],m=y[C],d=v.bounds.max.y-v.bounds.min.y,p=v.bounds.max.x-v.bounds.min.x,S=m.bounds.max.y-m.bounds.min.y,I=m.bounds.max.x-m.bounds.min.x,x={bodyA:v,pointA:{x:p*l,y:d*t},bodyB:m,pointB:{x:I*n,y:S*g}},M=i.extend(x,c);s.addConstraint(r,a.create(M))}return r.label+=" Chain",r},e.mesh=function(r,l,t,n,g){var c=r.bodies,y,C,v,m,d;for(y=0;y<t;y++){for(C=1;C<l;C++)v=c[C-1+y*l],m=c[C+y*l],s.addConstraint(r,a.create(i.extend({bodyA:v,bodyB:m},g)));if(y>0)for(C=0;C<l;C++)v=c[C+(y-1)*l],m=c[C+y*l],s.addConstraint(r,a.create(i.extend({bodyA:v,bodyB:m},g))),n&&C>0&&(d=c[C-1+(y-1)*l],s.addConstraint(r,a.create(i.extend({bodyA:d,bodyB:m},g)))),n&&C<l-1&&(d=c[C+1+(y-1)*l],s.addConstraint(r,a.create(i.extend({bodyA:d,bodyB:m},g))))}return r.label+=" Mesh",r},e.pyramid=function(r,l,t,n,g,c,y){return e.stack(r,l,t,n,g,c,function(C,v,m,d,p,S){var I=Math.min(n,Math.ceil(t/2)),x=p?p.bounds.max.x-p.bounds.min.x:0;if(!(d>I)){d=I-d;var M=d,P=t-1-d;if(!(m<M||m>P)){S===1&&h.translate(p,{x:(m+(t%2===1?1:-1))*x,y:0});var A=p?m*x:0;return y(r+A+m*g,v,m,d,p,S)}}})},e.newtonsCradle=function(r,l,t,n,g){for(var c=s.create({label:"Newtons Cradle"}),y=0;y<t;y++){var C=1.9,v=o.circle(r+y*(n*C),l+g,n,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),m=a.create({pointA:{x:r+y*(n*C),y:l},bodyB:v});s.addBody(c,v),s.addConstraint(c,m)}return c},u(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(r,l,t,n,g){var c=h.nextGroup(!0),y=20,C=-t*.5+y,v=t*.5-y,m=0,d=s.create({label:"Car"}),p=o.rectangle(r,l,t,n,{collisionFilter:{group:c},chamfer:{radius:n*.5},density:2e-4}),S=o.circle(r+C,l+m,g,{collisionFilter:{group:c},friction:.8}),I=o.circle(r+v,l+m,g,{collisionFilter:{group:c},friction:.8}),x=a.create({bodyB:p,pointB:{x:C,y:m},bodyA:S,stiffness:1,length:0}),M=a.create({bodyB:p,pointB:{x:v,y:m},bodyA:I,stiffness:1,length:0});return s.addBody(d,p),s.addBody(d,S),s.addBody(d,I),s.addConstraint(d,x),s.addConstraint(d,M),d},u(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(r,l,t,n,g,c,y,C,v,m){v=i.extend({inertia:1/0},v),m=i.extend({stiffness:.2,render:{type:"line",anchors:!1}},m);var d=e.stack(r,l,t,n,g,c,function(p,S){return o.circle(p,S,C,v)});return e.mesh(d,t,n,y,m),d.label="Soft Body",d},u(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(w,T,f){var e={};w.exports=e;var s=f(9),a=f(0),i=a.deprecated;(function(){e.create=function(h){var o={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(o,h)},e.update=function(h,o,u,r){var l,t,n,g=u.world,c=h.buckets,y,C,v=!1;for(l=0;l<o.length;l++){var m=o[l];if(!(m.isSleeping&&!r)&&!(g.bounds&&(m.bounds.max.x<g.bounds.min.x||m.bounds.min.x>g.bounds.max.x||m.bounds.max.y<g.bounds.min.y||m.bounds.min.y>g.bounds.max.y))){var d=e._getRegion(h,m);if(!m.region||d.id!==m.region.id||r){(!m.region||r)&&(m.region=d);var p=e._regionUnion(d,m.region);for(t=p.startCol;t<=p.endCol;t++)for(n=p.startRow;n<=p.endRow;n++){C=e._getBucketId(t,n),y=c[C];var S=t>=d.startCol&&t<=d.endCol&&n>=d.startRow&&n<=d.endRow,I=t>=m.region.startCol&&t<=m.region.endCol&&n>=m.region.startRow&&n<=m.region.endRow;!S&&I&&I&&y&&e._bucketRemoveBody(h,y,m),(m.region===d||S&&!I||r)&&(y||(y=e._createBucket(c,C)),e._bucketAddBody(h,y,m))}m.region=d,v=!0}}}v&&(h.pairsList=e._createActivePairsList(h))},i(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(h){h.buckets={},h.pairs={},h.pairsList=[]},i(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(h,o){var u=Math.min(h.startCol,o.startCol),r=Math.max(h.endCol,o.endCol),l=Math.min(h.startRow,o.startRow),t=Math.max(h.endRow,o.endRow);return e._createRegion(u,r,l,t)},e._getRegion=function(h,o){var u=o.bounds,r=Math.floor(u.min.x/h.bucketWidth),l=Math.floor(u.max.x/h.bucketWidth),t=Math.floor(u.min.y/h.bucketHeight),n=Math.floor(u.max.y/h.bucketHeight);return e._createRegion(r,l,t,n)},e._createRegion=function(h,o,u,r){return{id:h+","+o+","+u+","+r,startCol:h,endCol:o,startRow:u,endRow:r}},e._getBucketId=function(h,o){return"C"+h+"R"+o},e._createBucket=function(h,o){var u=h[o]=[];return u},e._bucketAddBody=function(h,o,u){var r=h.pairs,l=s.id,t=o.length,n;for(n=0;n<t;n++){var g=o[n];if(!(u.id===g.id||u.isStatic&&g.isStatic)){var c=l(u,g),y=r[c];y?y[2]+=1:r[c]=[u,g,1]}}o.push(u)},e._bucketRemoveBody=function(h,o,u){var r=h.pairs,l=s.id,t;o.splice(a.indexOf(o,u),1);var n=o.length;for(t=0;t<n;t++){var g=r[l(u,o[t])];g&&(g[2]-=1)}},e._createActivePairsList=function(h){var o,u=h.pairs,r=a.keys(u),l=r.length,t=[],n;for(n=0;n<l;n++)o=u[r[n]],o[2]>0?t.push(o):delete u[r[n]];return t}})()},function(w,T,f){var e={};w.exports=e;var s=f(3),a=f(7),i=f(13),h=f(4),o=f(14),u=f(10),r=f(5),l=f(0),t=f(1);(function(){e.create=function(n,g){var c=(n?n.mouse:null)||(g?g.mouse:null);c||(n&&n.render&&n.render.canvas?c=i.create(n.render.canvas):g&&g.element?c=i.create(g.element):(c=i.create(),l.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var y=u.create({label:"Mouse Constraint",pointA:c.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),C={type:"mouseConstraint",mouse:c,element:null,body:null,constraint:y,collisionFilter:{category:1,mask:4294967295,group:0}},v=l.extend(C,g);return h.on(n,"beforeUpdate",function(){var m=r.allBodies(n.world);e.update(v,m),e._triggerEvents(v)}),v},e.update=function(n,g){var c=n.mouse,y=n.constraint,C=n.body;if(c.button===0){if(y.bodyB)a.set(y.bodyB,!1),y.pointA=c.position;else for(var v=0;v<g.length;v++)if(C=g[v],t.contains(C.bounds,c.position)&&o.canCollide(C.collisionFilter,n.collisionFilter))for(var m=C.parts.length>1?1:0;m<C.parts.length;m++){var d=C.parts[m];if(s.contains(d.vertices,c.position)){y.pointA=c.position,y.bodyB=n.body=C,y.pointB={x:c.position.x-C.position.x,y:c.position.y-C.position.y},y.angleB=C.angle,a.set(C,!1),h.trigger(n,"startdrag",{mouse:c,body:C});break}}}else y.bodyB=n.body=null,y.pointB=null,C&&h.trigger(n,"enddrag",{mouse:c,body:C})},e._triggerEvents=function(n){var g=n.mouse,c=g.sourceEvents;c.mousemove&&h.trigger(n,"mousemove",{mouse:g}),c.mousedown&&h.trigger(n,"mousedown",{mouse:g}),c.mouseup&&h.trigger(n,"mouseup",{mouse:g}),i.clearSourceEvents(g)}})()},function(w,T,f){var e={};w.exports=e;var s=f(2),a=f(8),i=f(1),h=f(12),o=f(3);(function(){e.collides=function(u,r){for(var l=[],t=r.length,n=u.bounds,g=a.collides,c=i.overlaps,y=0;y<t;y++){var C=r[y],v=C.parts.length,m=v===1?0:1;if(c(C.bounds,n))for(var d=m;d<v;d++){var p=C.parts[d];if(c(p.bounds,n)){var S=g(p,u);if(S){l.push(S);break}}}}return l},e.ray=function(u,r,l,t){t=t||1e-100;for(var n=s.angle(r,l),g=s.magnitude(s.sub(r,l)),c=(l.x+r.x)*.5,y=(l.y+r.y)*.5,C=h.rectangle(c,y,g,t,{angle:n}),v=e.collides(C,u),m=0;m<v.length;m+=1){var d=v[m];d.body=d.bodyB=d.bodyA}return v},e.region=function(u,r,l){for(var t=[],n=0;n<u.length;n++){var g=u[n],c=i.overlaps(g.bounds,r);(c&&!l||!c&&l)&&t.push(g)}return t},e.point=function(u,r){for(var l=[],t=0;t<u.length;t++){var n=u[t];if(i.contains(n.bounds,r))for(var g=n.parts.length===1?0:1;g<n.parts.length;g++){var c=n.parts[g];if(i.contains(c.bounds,r)&&o.contains(c.vertices,r)){l.push(n);break}}}return l}})()},function(w,T,f){var e={};w.exports=e;var s=f(4),a=f(18),i=f(0);(function(){var h,o;if(typeof window<"u"&&(h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!h){var u;h=function(r){u=setTimeout(function(){r(i.now())},1e3/60)},o=function(){clearTimeout(u)}}e.create=function(r){var l={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},t=i.extend(l,r);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(t.fps*.5),t.fps=1e3/t.delta,t},e.run=function(r,l){return typeof r.positionIterations<"u"&&(l=r,r=e.create()),function t(n){r.frameRequestId=h(t),n&&r.enabled&&e.tick(r,l,n)}(),r},e.tick=function(r,l,t){var n=l.timing,g=1,c,y={timestamp:n.timestamp};s.trigger(r,"beforeTick",y),r.isFixed?c=r.delta:(c=t-r.timePrev||r.delta,r.timePrev=t,r.deltaHistory.push(c),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),c=Math.min.apply(null,r.deltaHistory),c=c<r.deltaMin?r.deltaMin:c,c=c>r.deltaMax?r.deltaMax:c,g=c/r.delta,r.delta=c),r.timeScalePrev!==0&&(g*=n.timeScale/r.timeScalePrev),n.timeScale===0&&(g=0),r.timeScalePrev=n.timeScale,r.correction=g,r.frameCounter+=1,t-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((t-r.counterTimestamp)/1e3),r.counterTimestamp=t,r.frameCounter=0),s.trigger(r,"tick",y),s.trigger(r,"beforeUpdate",y),a.update(l,c,g),s.trigger(r,"afterUpdate",y),s.trigger(r,"afterTick",y)},e.stop=function(r){o(r.frameRequestId)},e.start=function(r,l){e.run(r,l)}})()},function(w,T,f){var e={};w.exports=e;var s=f(8),a=f(0),i=a.deprecated;(function(){e.collides=function(h,o){return s.collides(h,o)},i(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(w,T,f){var e={};w.exports=e;var s=f(1),a=f(0);(function(){e.pathToVertices=function(i,h){typeof window<"u"&&!("SVGPathSeg"in window)&&a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var o,u,r,l,t,n,g,c,y,C,v=[],m,d,p=0,S=0,I=0;h=h||15;var x=function(P,A,E){var L=E%2===1&&E>1;if(!y||P!=y.x||A!=y.y){y&&L?(m=y.x,d=y.y):(m=0,d=0);var R={x:m+P,y:d+A};(L||!y)&&(y=R),v.push(R),S=m+P,I=d+A}},M=function(P){var A=P.pathSegTypeAsLetter.toUpperCase();if(A!=="Z"){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":S=P.x,I=P.y;break;case"H":S=P.x;break;case"V":I=P.y;break}x(S,I,P.pathSegType)}};for(e._svgPathToAbsolute(i),r=i.getTotalLength(),n=[],o=0;o<i.pathSegList.numberOfItems;o+=1)n.push(i.pathSegList.getItem(o));for(g=n.concat();p<r;){if(C=i.getPathSegAtLength(p),t=n[C],t!=c){for(;g.length&&g[0]!=t;)M(g.shift());c=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":l=i.getPointAtLength(p),x(l.x,l.y,0);break}p+=h}for(o=0,u=g.length;o<u;++o)M(g[o]);return v},e._svgPathToAbsolute=function(i){for(var h,o,u,r,l,t,n=i.pathSegList,g=0,c=0,y=n.numberOfItems,C=0;C<y;++C){var v=n.getItem(C),m=v.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(m))"x"in v&&(g=v.x),"y"in v&&(c=v.y);else switch("x1"in v&&(u=g+v.x1),"x2"in v&&(l=g+v.x2),"y1"in v&&(r=c+v.y1),"y2"in v&&(t=c+v.y2),"x"in v&&(g+=v.x),"y"in v&&(c+=v.y),m){case"m":n.replaceItem(i.createSVGPathSegMovetoAbs(g,c),C);break;case"l":n.replaceItem(i.createSVGPathSegLinetoAbs(g,c),C);break;case"h":n.replaceItem(i.createSVGPathSegLinetoHorizontalAbs(g),C);break;case"v":n.replaceItem(i.createSVGPathSegLinetoVerticalAbs(c),C);break;case"c":n.replaceItem(i.createSVGPathSegCurvetoCubicAbs(g,c,u,r,l,t),C);break;case"s":n.replaceItem(i.createSVGPathSegCurvetoCubicSmoothAbs(g,c,l,t),C);break;case"q":n.replaceItem(i.createSVGPathSegCurvetoQuadraticAbs(g,c,u,r),C);break;case"t":n.replaceItem(i.createSVGPathSegCurvetoQuadraticSmoothAbs(g,c),C);break;case"a":n.replaceItem(i.createSVGPathSegArcAbs(g,c,v.r1,v.r2,v.angle,v.largeArcFlag,v.sweepFlag),C);break;case"z":case"Z":g=h,c=o;break}(m=="M"||m=="m")&&(h=g,o=c)}}})()},function(w,T,f){var e={};w.exports=e;var s=f(5),a=f(0);(function(){e.create=s.create,e.add=s.add,e.remove=s.remove,e.clear=s.clear,e.addComposite=s.addComposite,e.addBody=s.addBody,e.addConstraint=s.addConstraint})()}])})});function ie(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}function de(w,T){for(var f=0;f<T.length;f++){var e=T[f];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(w,e.key,e)}}function ne(w,T,f){return T&&de(w.prototype,T),f&&de(w,f),w}function xe(w){return+w.replace(/px/,"")}function Ve(w){var T=window.devicePixelRatio,f=getComputedStyle(w),e=xe(f.getPropertyValue("width")),s=xe(f.getPropertyValue("height"));w.setAttribute("width",(e*T).toString()),w.setAttribute("height",(s*T).toString())}function G(w,T){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,e=Math.random()*(T-w)+w;return Math.floor(e*Math.pow(10,f))/Math.pow(10,f)}function te(w){return w[G(0,w.length)]}var be=.00125,ze=5e-4,Ue=9e-4,Ge=1e-5,je=6,$e=80,Qe=.9,Je=1.7,Ze=.2,Xe=.6,Ke=.03,Ye=.07,ye=15,Se=82,qe=150,_e=100,et=250,tt=40,it=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function Ce(w){var T=1920;return Math.log(w)/Math.log(T)}var Pe=function(){function w(T){ie(this,w);var f=T.initialPosition,e=T.direction,s=T.confettiRadius,a=T.confettiColors,i=T.emojis,h=T.emojiSize,o=T.canvasWidth;T.images;var u=T.resources,r=G(Qe,Je,3),l=r*Ce(o);this.confettiSpeed={x:l,y:l},this.finalConfettiSpeedX=G(Ze,Xe,3),this.rotationSpeed=i.length||u.length?.01:G(Ke,Ye,3)*Ce(o),this.dragForceCoefficient=G(ze,Ue,6),this.radius={x:s,y:s},this.initialRadius=s,this.rotationAngle=e==="left"?G(0,.2,3):G(-.2,0,3),this.emojiSize=h,this.emojiRotationAngle=G(0,2*Math.PI),this.radiusYUpdateDirection="down";var t=e==="left"?G(Se,ye)*Math.PI/180:G(-ye,-Se)*Math.PI/180;this.absCos=Math.abs(Math.cos(t)),this.absSin=Math.abs(Math.sin(t));var n=G(-qe,0),g={x:f.x+(e==="left"?-n:n)*this.absCos,y:f.y-n*this.absSin};this.currentPosition=Object.assign({},g),this.initialPosition=Object.assign({},g),this.color=i.length||u.length?null:te(a),this.emoji=i.length?te(i):null,this.image=u.length?te(u):null,this.createdAt=new Date().getTime(),this.direction=e}return ne(w,[{key:"draw",value:function(f){var e=this.currentPosition,s=this.radius,a=this.color,i=this.emoji,h=this.rotationAngle,o=this.emojiRotationAngle,u=this.emojiSize,r=this.image,l=window.devicePixelRatio;a?(f.fillStyle=a,f.beginPath(),f.ellipse(e.x*l,e.y*l,s.x*l,s.y*l,h,0,2*Math.PI),f.fill()):r?(f.save(),f.translate(l*e.x,l*e.y),f.rotate(o),f.drawImage(r,-r.width/2,-r.height/2,r.width,r.height),f.restore()):i&&(f.font="".concat(u,"px serif"),f.save(),f.translate(l*e.x,l*e.y),f.rotate(o),f.textAlign="center",f.fillText(i,0,0),f.restore())}},{key:"updatePosition",value:function(f,e){var s=this.confettiSpeed,a=this.dragForceCoefficient,i=this.finalConfettiSpeedX,h=this.radiusYUpdateDirection,o=this.rotationSpeed,u=this.createdAt,r=this.direction,l=e-u;if(s.x>i&&(this.confettiSpeed.x-=a*f),this.currentPosition.x+=s.x*(r==="left"?-this.absCos:this.absCos)*f,this.currentPosition.y=this.initialPosition.y-s.y*this.absSin*l+be*Math.pow(l,2)/2,this.rotationSpeed-=this.emoji||this.image?1e-4:Ge*f,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji||this.image){this.emojiRotationAngle+=this.rotationSpeed*f%(2*Math.PI);return}h==="down"?(this.radius.y-=f*o,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=f*o,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(f){return this.currentPosition.y<f+_e}}]),w}();function nt(){var w=document.createElement("canvas");return w.style.position="fixed",w.style.width="100%",w.style.height="100%",w.style.top="0",w.style.left="0",w.style.zIndex="1000",w.style.pointerEvents="none",document.body.appendChild(w),w}function rt(w){var T=w.confettiRadius,f=T===void 0?je:T,e=w.confettiNumber,s=e===void 0?w.confettiesNumber||(w.emojis?tt:et):e,a=w.confettiColors,i=a===void 0?it:a,h=w.emojis,o=h===void 0?w.emojies||[]:h,u=w.emojiSize,r=u===void 0?$e:u,l=w.images,t=l===void 0?[]:l;return w.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),w.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:f,confettiNumber:s,confettiColors:i,emojis:o,emojiSize:r,images:t}}var st=function(){function w(T){var f=this;ie(this,w),this.canvasContext=T,this.shapes=[],this.promise=new Promise(function(e){return f.resolvePromise=e})}return ne(w,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var f;(f=this.shapes).push.apply(f,arguments)}},{key:"complete",value:function(){var f;return this.shapes.length?!1:((f=this.resolvePromise)===null||f===void 0||f.call(this),!0)}},{key:"processShapes",value:function(f,e,s){var a=this,i=f.timeDelta,h=f.currentTime;this.shapes=this.shapes.filter(function(o){return o.updatePosition(i,h),o.draw(a.canvasContext),s?o.getIsVisibleOnCanvas(e):!0})}}]),w}(),at=function(){function w(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ie(this,w),this.activeConfettiBatches=[],this.canvas=T.canvas||nt(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=new Date().getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return ne(w,[{key:"loop",value:function(){this.requestAnimationFrameRequested=!1,Ve(this.canvas);var f=new Date().getTime(),e=f-this.lastUpdated,s=this.canvas.offsetHeight,a=this.iterationIndex%10===0;this.activeConfettiBatches=this.activeConfettiBatches.filter(function(i){return i.processShapes({timeDelta:e,currentTime:f},s,a),a?!i.complete():!0}),this.iterationIndex++,this.queueAnimationFrameIfNeeded(f)}},{key:"queueAnimationFrameIfNeeded",value:function(f){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=f||new Date().getTime(),requestAnimationFrame(this.loop))}},{key:"_load",value:function(f){return new Promise(function(e,s){var a=new Image;a.onload=function(){e(a)},a.onerror=function(i){s(i)},a.src=f,a.complete&&(a.onload=null,e(a))})}},{key:"_loadImages",value:function(f){var e=this;if(f.length===0)return Promise.resolve([]);var s=f.map(function(a){return e._load(a)});return Promise.all(s)}},{key:"addConfetti",value:function(){var f=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=rt(e),a=s.confettiRadius,i=s.confettiNumber,h=s.confettiColors,o=s.emojis,u=s.emojiSize,r=s.images,l=this.canvas.getBoundingClientRect(),t=l.width,n=l.height,g=n*5/7,c={x:0,y:g},y={x:t,y:g},C=new st(this.canvasContext);return this._loadImages(r).then(function(v){for(var m=0;m<i/2;m++){var d=new Pe({initialPosition:c,direction:"right",confettiRadius:a,confettiColors:h,confettiNumber:i,emojis:o,emojiSize:u,canvasWidth:t,images:r,resources:v}),p=new Pe({initialPosition:y,direction:"left",confettiRadius:a,confettiColors:h,confettiNumber:i,emojis:o,emojiSize:u,canvasWidth:t,images:r,resources:v});C.addShapes(d,p)}f.activeConfettiBatches.push(C),f.queueAnimationFrameIfNeeded()}),C.getBatchCompletePromise()}}]),w}(),we=at;var re=class{constructor(T={}){this.confetti=new we({canvas:document.getElementById("popper")});this.options={pattern:[/8+|+/gim]};this._confetti=async()=>this.confetti.addConfetti(this.options);Object.assign(this.options,T),document.body.addEventListener("click",()=>this._confetti())}verify(T){let f=T.reduce((e,s)=>this.options.pattern.reduce((a,i)=>(typeof i=="string"&&(i=new RegExp(i,"igm")),console.log(s.data.comment,i),s.data.comment.search(i)!==-1?a+1:a),e),0);for(let e=0;e<Math.min(f,10);e++)setTimeout(this._confetti,e*200)}};var k=ke(Ie()),$=30,ae={isStatic:!0,render:{fillStyle:"transparent"}};var Y={pattern:[/w/gim],lifeTime:3e3,textures:[],magnification:3,maxItems:50},Me=class{constructor(T,f,e,s,a){this.x=T;this.y=f;this.lifeTime=e;this.texture=s;this.callback=a;this._item=k.Bodies.circle(T,f,s.size,{restitution:.9,render:{sprite:{texture:s.src,xScale:s.xScale||1,yScale:s.yScale||1}}}),this._timer=setTimeout(()=>{a(this._item)},e)}get body(){return this._item}remove(){clearTimeout(this._timer),this.callback(this._item)}},oe=class{constructor(T){this.stageWidth=window.innerWidth;this.stageHeight=window.innerHeight;this.engine=k.Engine.create();this.options=Object.assign({},Y);this._items=[];Object.assign(this.options,T);let f=document.getElementById("dropper");this.render=k.Render.create({canvas:f,engine:this.engine,options:{background:"transparent",width:this.stageWidth,height:this.stageHeight,wireframes:!1}});let e=k.Bodies.rectangle(-($/2-1),this.stageHeight/2,$,this.stageHeight,ae),s=k.Bodies.rectangle(this.stageWidth+$/2-1,this.stageHeight/2,$,this.stageHeight,ae),a=k.Bodies.rectangle(this.stageWidth/2,this.stageHeight+$/2-1,this.stageWidth,$,ae);k.Composite.add(this.engine.world,[a,e,s]),k.Render.run(this.render);let i=k.Runner.create();k.Runner.run(i,this.engine),document.body.addEventListener("click",()=>this.drop())}drop(){let T=Math.random()*this.stageWidth,f=Math.random()*this.stageHeight/3,e=this.options.textures[Math.floor(Math.random()*this.options.textures.length)],s=new Me(T,f,this.options.lifeTime||Y.lifeTime,e,i=>{k.Composite.remove(this.engine.world,i)});this._items.unshift(s),k.Composite.add(this.engine.world,[s.body]);let a=this.options.maxItems||Y.maxItems;this._items.length>a&&this._items.splice(a,this._items.length).forEach(h=>{h.remove()})}verify(T){let f=T.reduce((s,a)=>this.options.pattern.reduce((i,h)=>{typeof h=="string"&&(h=new RegExp(h,"igm"));let o=a.data.comment.split(h).length-1;return i+o},s),0),e=this.options.magnification||Y.magnification;for(let s=0;s<f*e;s++)this.drop()}};var le={_timer:-1,_lastId:"",_commentSubscribers:new Map,_listenerSubscribers:new Map,init(w){let T=()=>{fetch(w).then(f=>f.json()).then(async f=>{let{comments:e,listeners:s}=f,a=e.findIndex(h=>this._lastId===h.data.id);a===-1&&(a=0);let i=e.slice(a+1);i.length!==0&&(this._lastId=i[i.length-1].data.id,this._publishComment(i)),this._publishListener(s),this._timer=setTimeout(T,2e3)}).catch(f=>{console.error(f),this._timer=setTimeout(T,5e3)})};T()},_publishComment(w){this._commentSubscribers.forEach(T=>{T(w)})},_publishListener(w){this._listenerSubscribers.forEach(T=>{T(w)})},subscribeComment(w){this._commentSubscribers.set(w,w)},unsbscribeComment(w){this._commentSubscribers.delete(w)},subscribeListener(w){this._listenerSubscribers.set(w,w)},unsubscribeListener(w){this._listenerSubscribers.delete(w)}};var q=300,Te=class{constructor(T,f,e){this.parent=T;this.conf=f;this._element=document.createElement("div");let s=new Image;s.src=f.image,f.width&&(s.width=f.width),f.height&&(s.height=f.height);let a=f.x||Math.floor(Math.random()*window.innerWidth-q+q/2),i=f.y||Math.floor(Math.random()*window.innerHeight-q+q/2);this._element.className="notify",this._element.style.transform=`translate(${a}px, ${i}px)`,this._element.appendChild(s),this.parent.appendChild(this._element),this._timer=setTimeout(()=>{this.remove()},f.lifeTime||5e3)}remove(){clearInterval(this._timer),this._element&&(this.parent.removeChild(this._element),this._element=null)}},fe=class{constructor(T){this._options={items:[],maxItems:20};this._container=document.getElementById("notify");this._items=[];Object.assign(this._options,T),document.body.addEventListener("click",()=>{let f=this._options.items[Math.floor(Math.random()*this._options.items.length)];this.showItem(f)})}showItem(T){let f=new Te(this._container,T,s=>{s.remove()});if(T.only){let s=this._items.findIndex(a=>a.conf===T);console.log(s),s!==-1&&this._items.splice(s,1).forEach(i=>{i.remove()})}this._items.unshift(f);let e=this._options.maxItems||20;this._items.length>e&&this._items.splice(e,this._items.length).forEach(a=>{a.remove()})}verify(T){let f=[];T.forEach(e=>{let s=this._options.items.find(a=>a.pattern.some(i=>(typeof i=="string"&&(i=new RegExp(i,"gim")),e.data.comment.search(i)!==-1)));s&&f.push(s)}),console.log(f),f.length!==0&&f.forEach(e=>{this.showItem(e)})}};var ot={jsonPath:"../../comment.json",use:{popper:!0,dropper:!0,notify:!0},popperConfig:{pattern:["88","\u{1F44F}"]},dropperConfig:{pattern:["ww","\u8349"],textures:[{src:"./paw.png",size:24,xScale:1.5,yScale:1.5}]},notifyConfig:{items:[],maxItems:20}};function lt(w={}){let T=Object.assign({},ot,w),f=[];if(T.use.popper){let e=new re(T.popperConfig);f.push(e)}if(T.use.dropper){let e=new oe(T.dropperConfig);f.push(e)}if(T.use.notify){let e=new fe(T.notifyConfig);f.push(e)}le.init(T.jsonPath),le.subscribeComment(e=>{f.forEach(s=>{s.verify(e)})})}window.WordParty={start:lt};})();
/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
