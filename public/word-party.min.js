(()=>{var En=Object.create;var ye=Object.defineProperty;var In=Object.getOwnPropertyDescriptor;var Mn=Object.getOwnPropertyNames;var An=Object.getPrototypeOf,Tn=Object.prototype.hasOwnProperty;var Rn=g=>ye(g,"__esModule",{value:!0});var N=(g,h)=>()=>(h||g((h={exports:{}}).exports,h),h.exports);var On=(g,h,r,e)=>{if(h&&typeof h=="object"||typeof h=="function")for(let n of Mn(h))!Tn.call(g,n)&&(r||n!=="default")&&ye(g,n,{get:()=>h[n],enumerable:!(e=In(h,n))||e.enumerable});return g},tt=(g,h)=>On(Rn(ye(g!=null?En(An(g)):{},"default",!h&&g&&g.__esModule?{get:()=>g.default,enumerable:!0}:{value:g,enumerable:!0})),g);var ft=N((ne,Ee)=>{(function(h,r){typeof ne=="object"&&typeof Ee=="object"?Ee.exports=r():typeof define=="function"&&define.amd?define("Matter",[],r):typeof ne=="object"?ne.Matter=r():h.Matter=r()})(ne,function(){return function(g){var h={};function r(e){if(h[e])return h[e].exports;var n=h[e]={i:e,l:!1,exports:{}};return g[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=g,r.c=h,r.d=function(e,n,a){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},r.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(n&1&&(e=r(e)),n&8||n&4&&typeof e=="object"&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),n&2&&typeof e!="string")for(var i in e)r.d(a,i,function(c){return e[c]}.bind(null,i));return a},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=21)}([function(g,h){var r={};g.exports=r,function(){r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r._warnedOnce={},r._decomp=null,r.extend=function(n,a){var i,c,o;typeof a=="boolean"?(i=2,o=a):(i=1,o=!0);for(var u=i;u<arguments.length;u++){var s=arguments[u];if(s)for(var f in s)o&&s[f]&&s[f].constructor===Object&&(!n[f]||n[f].constructor===Object)?(n[f]=n[f]||{},r.extend(n[f],o,s[f])):n[f]=s[f]}return n},r.clone=function(n,a){return r.extend({},a,n)},r.keys=function(n){if(Object.keys)return Object.keys(n);var a=[];for(var i in n)a.push(i);return a},r.values=function(n){var a=[];if(Object.keys){for(var i=Object.keys(n),c=0;c<i.length;c++)a.push(n[i[c]]);return a}for(var o in n)a.push(n[o]);return a},r.get=function(n,a,i,c){a=a.split(".").slice(i,c);for(var o=0;o<a.length;o+=1)n=n[a[o]];return n},r.set=function(n,a,i,c,o){var u=a.split(".").slice(c,o);return r.get(n,a,0,-1)[u[u.length-1]]=i,i},r.shuffle=function(n){for(var a=n.length-1;a>0;a--){var i=Math.floor(r.random()*(a+1)),c=n[a];n[a]=n[i],n[i]=c}return n},r.choose=function(n){return n[Math.floor(r.random()*n.length)]},r.isElement=function(n){return typeof HTMLElement<"u"?n instanceof HTMLElement:!!(n&&n.nodeType&&n.nodeName)},r.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"},r.isFunction=function(n){return typeof n=="function"},r.isPlainObject=function(n){return typeof n=="object"&&n.constructor===Object},r.isString=function(n){return toString.call(n)==="[object String]"},r.clamp=function(n,a,i){return n<a?a:n>i?i:n},r.sign=function(n){return n<0?-1:1},r.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-r._nowStartTime},r.random=function(n,a){return n=typeof n<"u"?n:0,a=typeof a<"u"?a:1,n+e()*(a-n)};var e=function(){return r._seed=(r._seed*9301+49297)%233280,r._seed/233280};r.colorToNumber=function(n){return n=n.replace("#",""),n.length==3&&(n=n.charAt(0)+n.charAt(0)+n.charAt(1)+n.charAt(1)+n.charAt(2)+n.charAt(2)),parseInt(n,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warnOnce=function(){var n=Array.prototype.slice.call(arguments).join(" ");r._warnedOnce[n]||(r.warn(n),r._warnedOnce[n]=!0)},r.deprecated=function(n,a,i){n[a]=r.chain(function(){r.warnOnce("\u{1F505} deprecated \u{1F505}",i)},n[a])},r.nextId=function(){return r._nextId++},r.indexOf=function(n,a){if(n.indexOf)return n.indexOf(a);for(var i=0;i<n.length;i++)if(n[i]===a)return i;return-1},r.map=function(n,a){if(n.map)return n.map(a);for(var i=[],c=0;c<n.length;c+=1)i.push(a(n[c]));return i},r.topologicalSort=function(n){var a=[],i=[],c=[];for(var o in n)!i[o]&&!c[o]&&r._topologicalSort(o,i,c,n,a);return a},r._topologicalSort=function(n,a,i,c,o){var u=c[n]||[];i[n]=!0;for(var s=0;s<u.length;s+=1){var f=u[s];i[f]||a[f]||r._topologicalSort(f,a,i,c,o)}i[n]=!1,a[n]=!0,o.push(n)},r.chain=function(){for(var n=[],a=0;a<arguments.length;a+=1){var i=arguments[a];i._chained?n.push.apply(n,i._chained):n.push(i)}var c=function(){for(var o,u=new Array(arguments.length),s=0,f=arguments.length;s<f;s++)u[s]=arguments[s];for(s=0;s<n.length;s+=1){var t=n[s].apply(o,u);typeof t<"u"&&(o=t)}return o};return c._chained=n,c},r.chainPathBefore=function(n,a,i){return r.set(n,a,r.chain(i,r.get(n,a)))},r.chainPathAfter=function(n,a,i){return r.set(n,a,r.chain(r.get(n,a),i))},r.setDecomp=function(n){r._decomp=n},r.getDecomp=function(){var n=r._decomp;try{!n&&typeof window<"u"&&(n=window.decomp),!n&&typeof global<"u"&&(n=global.decomp)}catch{n=null}return n}}()},function(g,h){var r={};g.exports=r,function(){r.create=function(e){var n={min:{x:0,y:0},max:{x:0,y:0}};return e&&r.update(n,e),n},r.update=function(e,n,a){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<n.length;i++){var c=n[i];c.x>e.max.x&&(e.max.x=c.x),c.x<e.min.x&&(e.min.x=c.x),c.y>e.max.y&&(e.max.y=c.y),c.y<e.min.y&&(e.min.y=c.y)}a&&(a.x>0?e.max.x+=a.x:e.min.x+=a.x,a.y>0?e.max.y+=a.y:e.min.y+=a.y)},r.contains=function(e,n){return n.x>=e.min.x&&n.x<=e.max.x&&n.y>=e.min.y&&n.y<=e.max.y},r.overlaps=function(e,n){return e.min.x<=n.max.x&&e.max.x>=n.min.x&&e.max.y>=n.min.y&&e.min.y<=n.max.y},r.translate=function(e,n){e.min.x+=n.x,e.max.x+=n.x,e.min.y+=n.y,e.max.y+=n.y},r.shift=function(e,n){var a=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=n.x,e.max.x=n.x+a,e.min.y=n.y,e.max.y=n.y+i}}()},function(g,h){var r={};g.exports=r,function(){r.create=function(e,n){return{x:e||0,y:n||0}},r.clone=function(e){return{x:e.x,y:e.y}},r.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},r.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},r.rotate=function(e,n,a){var i=Math.cos(n),c=Math.sin(n);a||(a={});var o=e.x*i-e.y*c;return a.y=e.x*c+e.y*i,a.x=o,a},r.rotateAbout=function(e,n,a,i){var c=Math.cos(n),o=Math.sin(n);i||(i={});var u=a.x+((e.x-a.x)*c-(e.y-a.y)*o);return i.y=a.y+((e.x-a.x)*o+(e.y-a.y)*c),i.x=u,i},r.normalise=function(e){var n=r.magnitude(e);return n===0?{x:0,y:0}:{x:e.x/n,y:e.y/n}},r.dot=function(e,n){return e.x*n.x+e.y*n.y},r.cross=function(e,n){return e.x*n.y-e.y*n.x},r.cross3=function(e,n,a){return(n.x-e.x)*(a.y-e.y)-(n.y-e.y)*(a.x-e.x)},r.add=function(e,n,a){return a||(a={}),a.x=e.x+n.x,a.y=e.y+n.y,a},r.sub=function(e,n,a){return a||(a={}),a.x=e.x-n.x,a.y=e.y-n.y,a},r.mult=function(e,n){return{x:e.x*n,y:e.y*n}},r.div=function(e,n){return{x:e.x/n,y:e.y/n}},r.perp=function(e,n){return n=n===!0?-1:1,{x:n*-e.y,y:n*e.x}},r.neg=function(e){return{x:-e.x,y:-e.y}},r.angle=function(e,n){return Math.atan2(n.y-e.y,n.x-e.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]}()},function(g,h,r){var e={};g.exports=e;var n=r(2),a=r(0);(function(){e.create=function(i,c){for(var o=[],u=0;u<i.length;u++){var s=i[u],f={x:s.x,y:s.y,index:u,body:c,isInternal:!1};o.push(f)}return o},e.fromPath=function(i,c){var o=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return i.replace(o,function(s,f,t){u.push({x:parseFloat(f),y:parseFloat(t)})}),e.create(u,c)},e.centre=function(i){for(var c=e.area(i,!0),o={x:0,y:0},u,s,f,t=0;t<i.length;t++)f=(t+1)%i.length,u=n.cross(i[t],i[f]),s=n.mult(n.add(i[t],i[f]),u),o=n.add(o,s);return n.div(o,6*c)},e.mean=function(i){for(var c={x:0,y:0},o=0;o<i.length;o++)c.x+=i[o].x,c.y+=i[o].y;return n.div(c,i.length)},e.area=function(i,c){for(var o=0,u=i.length-1,s=0;s<i.length;s++)o+=(i[u].x-i[s].x)*(i[u].y+i[s].y),u=s;return c?o/2:Math.abs(o)/2},e.inertia=function(i,c){for(var o=0,u=0,s=i,f,t,l=0;l<s.length;l++)t=(l+1)%s.length,f=Math.abs(n.cross(s[t],s[l])),o+=f*(n.dot(s[t],s[t])+n.dot(s[t],s[l])+n.dot(s[l],s[l])),u+=f;return c/6*(o/u)},e.translate=function(i,c,o){o=typeof o<"u"?o:1;var u=i.length,s=c.x*o,f=c.y*o,t;for(t=0;t<u;t++)i[t].x+=s,i[t].y+=f;return i},e.rotate=function(i,c,o){if(c!==0){var u=Math.cos(c),s=Math.sin(c),f=o.x,t=o.y,l=i.length,p,v,S,P;for(P=0;P<l;P++)p=i[P],v=p.x-f,S=p.y-t,p.x=f+(v*u-S*s),p.y=t+(v*s+S*u);return i}},e.contains=function(i,c){for(var o=c.x,u=c.y,s=i.length,f=i[s-1],t,l=0;l<s;l++){if(t=i[l],(o-f.x)*(t.y-f.y)+(u-f.y)*(f.x-t.x)>0)return!1;f=t}return!0},e.scale=function(i,c,o,u){if(c===1&&o===1)return i;u=u||e.centre(i);for(var s,f,t=0;t<i.length;t++)s=i[t],f=n.sub(s,u),i[t].x=u.x+f.x*c,i[t].y=u.y+f.y*o;return i},e.chamfer=function(i,c,o,u,s){typeof c=="number"?c=[c]:c=c||[8],o=typeof o<"u"?o:-1,u=u||2,s=s||14;for(var f=[],t=0;t<i.length;t++){var l=i[t-1>=0?t-1:i.length-1],p=i[t],v=i[(t+1)%i.length],S=c[t<c.length?t:c.length-1];if(S===0){f.push(p);continue}var P=n.normalise({x:p.y-l.y,y:l.x-p.x}),m=n.normalise({x:v.y-p.y,y:p.x-v.x}),d=Math.sqrt(2*Math.pow(S,2)),y=n.mult(a.clone(P),S),x=n.normalise(n.mult(n.add(P,m),.5)),w=n.sub(p,n.mult(x,d)),I=o;o===-1&&(I=Math.pow(S,.32)*1.75),I=a.clamp(I,u,s),I%2===1&&(I+=1);for(var C=Math.acos(n.dot(P,m)),M=C/I,E=0;E<I;E++)f.push(n.add(n.rotate(y,M*E),w))}return f},e.clockwiseSort=function(i){var c=e.mean(i);return i.sort(function(o,u){return n.angle(c,o)-n.angle(c,u)}),i},e.isConvex=function(i){var c=0,o=i.length,u,s,f,t;if(o<3)return null;for(u=0;u<o;u++)if(s=(u+1)%o,f=(u+2)%o,t=(i[s].x-i[u].x)*(i[f].y-i[s].y),t-=(i[s].y-i[u].y)*(i[f].x-i[s].x),t<0?c|=1:t>0&&(c|=2),c===3)return!1;return c!==0?!0:null},e.hull=function(i){var c=[],o=[],u,s;for(i=i.slice(0),i.sort(function(f,t){var l=f.x-t.x;return l!==0?l:f.y-t.y}),s=0;s<i.length;s+=1){for(u=i[s];o.length>=2&&n.cross3(o[o.length-2],o[o.length-1],u)<=0;)o.pop();o.push(u)}for(s=i.length-1;s>=0;s-=1){for(u=i[s];c.length>=2&&n.cross3(c[c.length-2],c[c.length-1],u)<=0;)c.pop();c.push(u)}return c.pop(),o.pop(),c.concat(o)}})()},function(g,h,r){var e={};g.exports=e;var n=r(0);(function(){e.on=function(a,i,c){for(var o=i.split(" "),u,s=0;s<o.length;s++)u=o[s],a.events=a.events||{},a.events[u]=a.events[u]||[],a.events[u].push(c);return c},e.off=function(a,i,c){if(!i){a.events={};return}typeof i=="function"&&(c=i,i=n.keys(a.events).join(" "));for(var o=i.split(" "),u=0;u<o.length;u++){var s=a.events[o[u]],f=[];if(c&&s)for(var t=0;t<s.length;t++)s[t]!==c&&f.push(s[t]);a.events[o[u]]=f}},e.trigger=function(a,i,c){var o,u,s,f,t=a.events;if(t&&n.keys(t).length>0){c||(c={}),o=i.split(" ");for(var l=0;l<o.length;l++)if(u=o[l],s=t[u],s){f=n.clone(c,!1),f.name=u,f.source=a;for(var p=0;p<s.length;p++)s[p].apply(a,[f])}}}})()},function(g,h,r){var e={};g.exports=e;var n=r(4),a=r(0),i=r(1),c=r(6);(function(){e.create=function(o){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},o)},e.setModified=function(o,u,s,f){if(o.isModified=u,u&&o.cache&&(o.cache.allBodies=null,o.cache.allConstraints=null,o.cache.allComposites=null),s&&o.parent&&e.setModified(o.parent,u,s,f),f)for(var t=0;t<o.composites.length;t++){var l=o.composites[t];e.setModified(l,u,s,f)}},e.add=function(o,u){var s=[].concat(u);n.trigger(o,"beforeAdd",{object:u});for(var f=0;f<s.length;f++){var t=s[f];switch(t.type){case"body":if(t.parent!==t){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(o,t);break;case"constraint":e.addConstraint(o,t);break;case"composite":e.addComposite(o,t);break;case"mouseConstraint":e.addConstraint(o,t.constraint);break}}return n.trigger(o,"afterAdd",{object:u}),o},e.remove=function(o,u,s){var f=[].concat(u);n.trigger(o,"beforeRemove",{object:u});for(var t=0;t<f.length;t++){var l=f[t];switch(l.type){case"body":e.removeBody(o,l,s);break;case"constraint":e.removeConstraint(o,l,s);break;case"composite":e.removeComposite(o,l,s);break;case"mouseConstraint":e.removeConstraint(o,l.constraint);break}}return n.trigger(o,"afterRemove",{object:u}),o},e.addComposite=function(o,u){return o.composites.push(u),u.parent=o,e.setModified(o,!0,!0,!1),o},e.removeComposite=function(o,u,s){var f=a.indexOf(o.composites,u);if(f!==-1&&e.removeCompositeAt(o,f),s)for(var t=0;t<o.composites.length;t++)e.removeComposite(o.composites[t],u,!0);return o},e.removeCompositeAt=function(o,u){return o.composites.splice(u,1),e.setModified(o,!0,!0,!1),o},e.addBody=function(o,u){return o.bodies.push(u),e.setModified(o,!0,!0,!1),o},e.removeBody=function(o,u,s){var f=a.indexOf(o.bodies,u);if(f!==-1&&e.removeBodyAt(o,f),s)for(var t=0;t<o.composites.length;t++)e.removeBody(o.composites[t],u,!0);return o},e.removeBodyAt=function(o,u){return o.bodies.splice(u,1),e.setModified(o,!0,!0,!1),o},e.addConstraint=function(o,u){return o.constraints.push(u),e.setModified(o,!0,!0,!1),o},e.removeConstraint=function(o,u,s){var f=a.indexOf(o.constraints,u);if(f!==-1&&e.removeConstraintAt(o,f),s)for(var t=0;t<o.composites.length;t++)e.removeConstraint(o.composites[t],u,!0);return o},e.removeConstraintAt=function(o,u){return o.constraints.splice(u,1),e.setModified(o,!0,!0,!1),o},e.clear=function(o,u,s){if(s)for(var f=0;f<o.composites.length;f++)e.clear(o.composites[f],u,!0);return u?o.bodies=o.bodies.filter(function(t){return t.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,e.setModified(o,!0,!0,!1),o},e.allBodies=function(o){if(o.cache&&o.cache.allBodies)return o.cache.allBodies;for(var u=[].concat(o.bodies),s=0;s<o.composites.length;s++)u=u.concat(e.allBodies(o.composites[s]));return o.cache&&(o.cache.allBodies=u),u},e.allConstraints=function(o){if(o.cache&&o.cache.allConstraints)return o.cache.allConstraints;for(var u=[].concat(o.constraints),s=0;s<o.composites.length;s++)u=u.concat(e.allConstraints(o.composites[s]));return o.cache&&(o.cache.allConstraints=u),u},e.allComposites=function(o){if(o.cache&&o.cache.allComposites)return o.cache.allComposites;for(var u=[].concat(o.composites),s=0;s<o.composites.length;s++)u=u.concat(e.allComposites(o.composites[s]));return o.cache&&(o.cache.allComposites=u),u},e.get=function(o,u,s){var f,t;switch(s){case"body":f=e.allBodies(o);break;case"constraint":f=e.allConstraints(o);break;case"composite":f=e.allComposites(o).concat(o);break}return f?(t=f.filter(function(l){return l.id.toString()===u.toString()}),t.length===0?null:t[0]):null},e.move=function(o,u,s){return e.remove(o,u),e.add(s,u),o},e.rebase=function(o){for(var u=e.allBodies(o).concat(e.allConstraints(o)).concat(e.allComposites(o)),s=0;s<u.length;s++)u[s].id=a.nextId();return o},e.translate=function(o,u,s){for(var f=s?e.allBodies(o):o.bodies,t=0;t<f.length;t++)c.translate(f[t],u);return o},e.rotate=function(o,u,s,f){for(var t=Math.cos(u),l=Math.sin(u),p=f?e.allBodies(o):o.bodies,v=0;v<p.length;v++){var S=p[v],P=S.position.x-s.x,m=S.position.y-s.y;c.setPosition(S,{x:s.x+(P*t-m*l),y:s.y+(P*l+m*t)}),c.rotate(S,u)}return o},e.scale=function(o,u,s,f,t){for(var l=t?e.allBodies(o):o.bodies,p=0;p<l.length;p++){var v=l[p],S=v.position.x-f.x,P=v.position.y-f.y;c.setPosition(v,{x:f.x+S*u,y:f.y+P*s}),c.scale(v,u,s)}return o},e.bounds=function(o){for(var u=e.allBodies(o),s=[],f=0;f<u.length;f+=1){var t=u[f];s.push(t.bounds.min,t.bounds.max)}return i.create(s)}})()},function(g,h,r){var e={};g.exports=e;var n=r(3),a=r(2),i=r(7),c=r(16),o=r(0),u=r(1),s=r(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var l={id:o.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:n.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},p=o.extend(l,t);return f(p,t),p},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var f=function(t,l){l=l||{},e.set(t,{bounds:t.bounds||u.create(t.vertices),positionPrev:t.positionPrev||a.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),n.rotate(t.vertices,t.angle,t.position),s.rotate(t.axes,t.angle),u.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:l.axes||t.axes,area:l.area||t.area,mass:l.mass||t.mass,inertia:l.inertia||t.inertia});var p=t.isStatic?"#14151f":o.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=t.isStatic?"#555":"#ccc",S=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||p,t.render.strokeStyle=t.render.strokeStyle||v,t.render.lineWidth=t.render.lineWidth||S,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,l,p){var v;typeof l=="string"&&(v=l,l={},l[v]=p);for(v in l)if(!!Object.prototype.hasOwnProperty.call(l,v))switch(p=l[v],v){case"isStatic":e.setStatic(t,p);break;case"isSleeping":i.set(t,p);break;case"mass":e.setMass(t,p);break;case"density":e.setDensity(t,p);break;case"inertia":e.setInertia(t,p);break;case"vertices":e.setVertices(t,p);break;case"position":e.setPosition(t,p);break;case"angle":e.setAngle(t,p);break;case"velocity":e.setVelocity(t,p);break;case"angularVelocity":e.setAngularVelocity(t,p);break;case"parts":e.setParts(t,p);break;case"centre":e.setCentre(t,p);break;default:t[v]=p}},e.setStatic=function(t,l){for(var p=0;p<t.parts.length;p++){var v=t.parts[p];v.isStatic=l,l?(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia},v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null)}},e.setMass=function(t,l){var p=t.inertia/(t.mass/6);t.inertia=p*(l/6),t.inverseInertia=1/t.inertia,t.mass=l,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,l){e.setMass(t,l*t.area),t.density=l},e.setInertia=function(t,l){t.inertia=l,t.inverseInertia=1/t.inertia},e.setVertices=function(t,l){l[0].body===t?t.vertices=l:t.vertices=n.create(l,t),t.axes=s.fromVertices(t.vertices),t.area=n.area(t.vertices),e.setMass(t,t.density*t.area);var p=n.centre(t.vertices);n.translate(t.vertices,p,-1),e.setInertia(t,e._inertiaScale*n.inertia(t.vertices,t.mass)),n.translate(t.vertices,t.position),u.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,l,p){var v;for(l=l.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,v=0;v<l.length;v++){var S=l[v];S!==t&&(S.parent=t,t.parts.push(S))}if(t.parts.length!==1){if(p=typeof p<"u"?p:!0,p){var P=[];for(v=0;v<l.length;v++)P=P.concat(l[v].vertices);n.clockwiseSort(P);var m=n.hull(P),d=n.centre(m);e.setVertices(t,m),n.translate(t.vertices,d)}var y=e._totalProperties(t);t.area=y.area,t.parent=t,t.position.x=y.centre.x,t.position.y=y.centre.y,t.positionPrev.x=y.centre.x,t.positionPrev.y=y.centre.y,e.setMass(t,y.mass),e.setInertia(t,y.inertia),e.setPosition(t,y.centre)}},e.setCentre=function(t,l,p){p?(t.positionPrev.x+=l.x,t.positionPrev.y+=l.y,t.position.x+=l.x,t.position.y+=l.y):(t.positionPrev.x=l.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=l.y-(t.position.y-t.positionPrev.y),t.position.x=l.x,t.position.y=l.y)},e.setPosition=function(t,l){var p=a.sub(l,t.position);t.positionPrev.x+=p.x,t.positionPrev.y+=p.y;for(var v=0;v<t.parts.length;v++){var S=t.parts[v];S.position.x+=p.x,S.position.y+=p.y,n.translate(S.vertices,p),u.update(S.bounds,S.vertices,t.velocity)}},e.setAngle=function(t,l){var p=l-t.angle;t.anglePrev+=p;for(var v=0;v<t.parts.length;v++){var S=t.parts[v];S.angle+=p,n.rotate(S.vertices,p,t.position),s.rotate(S.axes,p),u.update(S.bounds,S.vertices,t.velocity),v>0&&a.rotateAbout(S.position,p,t.position,S.position)}},e.setVelocity=function(t,l){t.positionPrev.x=t.position.x-l.x,t.positionPrev.y=t.position.y-l.y,t.velocity.x=l.x,t.velocity.y=l.y,t.speed=a.magnitude(t.velocity)},e.setAngularVelocity=function(t,l){t.anglePrev=t.angle-l,t.angularVelocity=l,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,l){e.setPosition(t,a.add(t.position,l))},e.rotate=function(t,l,p){if(!p)e.setAngle(t,t.angle+l);else{var v=Math.cos(l),S=Math.sin(l),P=t.position.x-p.x,m=t.position.y-p.y;e.setPosition(t,{x:p.x+(P*v-m*S),y:p.y+(P*S+m*v)}),e.setAngle(t,t.angle+l)}},e.scale=function(t,l,p,v){var S=0,P=0;v=v||t.position;for(var m=0;m<t.parts.length;m++){var d=t.parts[m];n.scale(d.vertices,l,p,v),d.axes=s.fromVertices(d.vertices),d.area=n.area(d.vertices),e.setMass(d,t.density*d.area),n.translate(d.vertices,{x:-d.position.x,y:-d.position.y}),e.setInertia(d,e._inertiaScale*n.inertia(d.vertices,d.mass)),n.translate(d.vertices,{x:d.position.x,y:d.position.y}),m>0&&(S+=d.area,P+=d.inertia),d.position.x=v.x+(d.position.x-v.x)*l,d.position.y=v.y+(d.position.y-v.y)*p,u.update(d.bounds,d.vertices,t.velocity)}t.parts.length>1&&(t.area=S,t.isStatic||(e.setMass(t,t.density*S),e.setInertia(t,P))),t.circleRadius&&(l===p?t.circleRadius*=l:t.circleRadius=null)},e.update=function(t,l,p,v){var S=Math.pow(l*p*t.timeScale,2),P=1-t.frictionAir*p*t.timeScale,m=t.position.x-t.positionPrev.x,d=t.position.y-t.positionPrev.y;t.velocity.x=m*P*v+t.force.x/t.mass*S,t.velocity.y=d*P*v+t.force.y/t.mass*S,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*P*v+t.torque/t.inertia*S,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=a.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var y=0;y<t.parts.length;y++){var x=t.parts[y];n.translate(x.vertices,t.velocity),y>0&&(x.position.x+=t.velocity.x,x.position.y+=t.velocity.y),t.angularVelocity!==0&&(n.rotate(x.vertices,t.angularVelocity,t.position),s.rotate(x.axes,t.angularVelocity),y>0&&a.rotateAbout(x.position,t.angularVelocity,t.position,x.position)),u.update(x.bounds,x.vertices,t.velocity)}},e.applyForce=function(t,l,p){t.force.x+=p.x,t.force.y+=p.y;var v={x:l.x-t.position.x,y:l.y-t.position.y};t.torque+=v.x*p.y-v.y*p.x},e._totalProperties=function(t){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=t.parts.length===1?0:1;p<t.parts.length;p++){var v=t.parts[p],S=v.mass!==1/0?v.mass:1;l.mass+=S,l.area+=v.area,l.inertia+=v.inertia,l.centre=a.add(l.centre,a.mult(v.position,S))}return l.centre=a.div(l.centre,l.mass),l}})()},function(g,h,r){var e={};g.exports=e;var n=r(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(a,i){for(var c=i*i*i,o=0;o<a.length;o++){var u=a[o],s=u.speed*u.speed+u.angularSpeed*u.angularSpeed;if(u.force.x!==0||u.force.y!==0){e.set(u,!1);continue}var f=Math.min(u.motion,s),t=Math.max(u.motion,s);u.motion=e._minBias*f+(1-e._minBias)*t,u.sleepThreshold>0&&u.motion<e._motionSleepThreshold*c?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold&&e.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}},e.afterCollisions=function(a,i){for(var c=i*i*i,o=0;o<a.length;o++){var u=a[o];if(!!u.isActive){var s=u.collision,f=s.bodyA.parent,t=s.bodyB.parent;if(!(f.isSleeping&&t.isSleeping||f.isStatic||t.isStatic)&&(f.isSleeping||t.isSleeping)){var l=f.isSleeping&&!f.isStatic?f:t,p=l===f?t:f;!l.isStatic&&p.motion>e._motionWakeThreshold*c&&e.set(l,!1)}}}},e.set=function(a,i){var c=a.isSleeping;i?(a.isSleeping=!0,a.sleepCounter=a.sleepThreshold,a.positionImpulse.x=0,a.positionImpulse.y=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.speed=0,a.angularSpeed=0,a.motion=0,c||n.trigger(a,"sleepStart")):(a.isSleeping=!1,a.sleepCounter=0,c&&n.trigger(a,"sleepEnd"))}})()},function(g,h,r){var e={};g.exports=e;var n=r(3),a=r(9);(function(){var i=[],c={overlap:0,axis:null},o={overlap:0,axis:null};e.create=function(u,s){return{pair:null,collided:!1,bodyA:u,bodyB:s,parentA:u.parent,parentB:s.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(u,s,f){if(e._overlapAxes(c,u.vertices,s.vertices,u.axes),c.overlap<=0||(e._overlapAxes(o,s.vertices,u.vertices,s.axes),o.overlap<=0))return null;var t=f&&f.table[a.id(u,s)],l;t?l=t.collision:(l=e.create(u,s),l.collided=!0,l.bodyA=u.id<s.id?u:s,l.bodyB=u.id<s.id?s:u,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent),u=l.bodyA,s=l.bodyB;var p;c.overlap<o.overlap?p=c:p=o;var v=l.normal,S=l.supports,P=p.axis,m=P.x,d=P.y;m*(s.position.x-u.position.x)+d*(s.position.y-u.position.y)<0?(v.x=m,v.y=d):(v.x=-m,v.y=-d),l.tangent.x=-v.y,l.tangent.y=v.x,l.depth=p.overlap,l.penetration.x=v.x*l.depth,l.penetration.y=v.y*l.depth;var y=e._findSupports(u,s,v,1),x=0;if(n.contains(u.vertices,y[0])&&(S[x++]=y[0]),n.contains(u.vertices,y[1])&&(S[x++]=y[1]),x<2){var w=e._findSupports(s,u,v,-1);n.contains(s.vertices,w[0])&&(S[x++]=w[0]),x<2&&n.contains(s.vertices,w[1])&&(S[x++]=w[1])}return x===0&&(S[x++]=y[0]),S.length=x,l},e._overlapAxes=function(u,s,f,t){var l=s.length,p=f.length,v=s[0].x,S=s[0].y,P=f[0].x,m=f[0].y,d=t.length,y=Number.MAX_VALUE,x=0,w,I,C,M,E,A;for(E=0;E<d;E++){var T=t[E],O=T.x,R=T.y,L=v*O+S*R,b=P*O+m*R,B=L,F=b;for(A=1;A<l;A+=1)M=s[A].x*O+s[A].y*R,M>B?B=M:M<L&&(L=M);for(A=1;A<p;A+=1)M=f[A].x*O+f[A].y*R,M>F?F=M:M<b&&(b=M);if(I=B-b,C=F-L,w=I<C?I:C,w<y&&(y=w,x=E,w<=0))break}u.axis=t[x],u.overlap=y},e._projectToAxis=function(u,s,f){for(var t=s[0].x*f.x+s[0].y*f.y,l=t,p=1;p<s.length;p+=1){var v=s[p].x*f.x+s[p].y*f.y;v>l?l=v:v<t&&(t=v)}u.min=t,u.max=l},e._findSupports=function(u,s,f,t){var l=s.vertices,p=l.length,v=u.position.x,S=u.position.y,P=f.x*t,m=f.y*t,d=Number.MAX_VALUE,y,x,w,I,C;for(C=0;C<p;C+=1)x=l[C],I=P*(v-x.x)+m*(S-x.y),I<d&&(d=I,y=x);return w=l[(p+y.index-1)%p],d=P*(v-w.x)+m*(S-w.y),x=l[(y.index+1)%p],P*(v-x.x)+m*(S-x.y)<d?(i[0]=y,i[1]=x,i):(i[0]=y,i[1]=w,i)}})()},function(g,h,r){var e={};g.exports=e;var n=r(17);(function(){e.create=function(a,i){var c=a.bodyA,o=a.bodyB,u={id:e.id(c,o),bodyA:c,bodyB:o,collision:a,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||o.isSensor,timeCreated:i,timeUpdated:i,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,a,i),u},e.update=function(a,i,c){var o=a.contacts,u=i.supports,s=a.activeContacts,f=i.parentA,t=i.parentB,l=f.vertices.length;a.isActive=!0,a.timeUpdated=c,a.collision=i,a.separation=i.depth,a.inverseMass=f.inverseMass+t.inverseMass,a.friction=f.friction<t.friction?f.friction:t.friction,a.frictionStatic=f.frictionStatic>t.frictionStatic?f.frictionStatic:t.frictionStatic,a.restitution=f.restitution>t.restitution?f.restitution:t.restitution,a.slop=f.slop>t.slop?f.slop:t.slop,i.pair=a,s.length=0;for(var p=0;p<u.length;p++){var v=u[p],S=v.body===f?v.index:l+v.index,P=o[S];P?s.push(P):s.push(o[S]=n.create(v))}},e.setActive=function(a,i,c){i?(a.isActive=!0,a.timeUpdated=c):(a.isActive=!1,a.activeContacts.length=0)},e.id=function(a,i){return a.id<i.id?"A"+a.id+"B"+i.id:"A"+i.id+"B"+a.id}})()},function(g,h,r){var e={};g.exports=e;var n=r(3),a=r(2),i=r(7),c=r(1),o=r(11),u=r(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(s){var f=s;f.bodyA&&!f.pointA&&(f.pointA={x:0,y:0}),f.bodyB&&!f.pointB&&(f.pointB={x:0,y:0});var t=f.bodyA?a.add(f.bodyA.position,f.pointA):f.pointA,l=f.bodyB?a.add(f.bodyB.position,f.pointB):f.pointB,p=a.magnitude(a.sub(t,l));f.length=typeof f.length<"u"?f.length:p,f.id=f.id||u.nextId(),f.label=f.label||"Constraint",f.type="constraint",f.stiffness=f.stiffness||(f.length>0?1:.7),f.damping=f.damping||0,f.angularStiffness=f.angularStiffness||0,f.angleA=f.bodyA?f.bodyA.angle:f.angleA,f.angleB=f.bodyB?f.bodyB.angle:f.angleB,f.plugin={};var v={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return f.length===0&&f.stiffness>.1?(v.type="pin",v.anchors=!1):f.stiffness<.9&&(v.type="spring"),f.render=u.extend(v,f.render),f},e.preSolveAll=function(s){for(var f=0;f<s.length;f+=1){var t=s[f],l=t.constraintImpulse;t.isStatic||l.x===0&&l.y===0&&l.angle===0||(t.position.x+=l.x,t.position.y+=l.y,t.angle+=l.angle)}},e.solveAll=function(s,f){for(var t=0;t<s.length;t+=1){var l=s[t],p=!l.bodyA||l.bodyA&&l.bodyA.isStatic,v=!l.bodyB||l.bodyB&&l.bodyB.isStatic;(p||v)&&e.solve(s[t],f)}for(t=0;t<s.length;t+=1)l=s[t],p=!l.bodyA||l.bodyA&&l.bodyA.isStatic,v=!l.bodyB||l.bodyB&&l.bodyB.isStatic,!p&&!v&&e.solve(s[t],f)},e.solve=function(s,f){var t=s.bodyA,l=s.bodyB,p=s.pointA,v=s.pointB;if(!(!t&&!l)){t&&!t.isStatic&&(a.rotate(p,t.angle-s.angleA,p),s.angleA=t.angle),l&&!l.isStatic&&(a.rotate(v,l.angle-s.angleB,v),s.angleB=l.angle);var S=p,P=v;if(t&&(S=a.add(t.position,p)),l&&(P=a.add(l.position,v)),!(!S||!P)){var m=a.sub(S,P),d=a.magnitude(m);d<e._minLength&&(d=e._minLength);var y=(d-s.length)/d,x=s.stiffness<1?s.stiffness*f:s.stiffness,w=a.mult(m,y*x),I=(t?t.inverseMass:0)+(l?l.inverseMass:0),C=(t?t.inverseInertia:0)+(l?l.inverseInertia:0),M=I+C,E,A,T,O,R;if(s.damping){var L=a.create();T=a.div(m,d),R=a.sub(l&&a.sub(l.position,l.positionPrev)||L,t&&a.sub(t.position,t.positionPrev)||L),O=a.dot(T,R)}t&&!t.isStatic&&(A=t.inverseMass/I,t.constraintImpulse.x-=w.x*A,t.constraintImpulse.y-=w.y*A,t.position.x-=w.x*A,t.position.y-=w.y*A,s.damping&&(t.positionPrev.x-=s.damping*T.x*O*A,t.positionPrev.y-=s.damping*T.y*O*A),E=a.cross(p,w)/M*e._torqueDampen*t.inverseInertia*(1-s.angularStiffness),t.constraintImpulse.angle-=E,t.angle-=E),l&&!l.isStatic&&(A=l.inverseMass/I,l.constraintImpulse.x+=w.x*A,l.constraintImpulse.y+=w.y*A,l.position.x+=w.x*A,l.position.y+=w.y*A,s.damping&&(l.positionPrev.x+=s.damping*T.x*O*A,l.positionPrev.y+=s.damping*T.y*O*A),E=a.cross(v,w)/M*e._torqueDampen*l.inverseInertia*(1-s.angularStiffness),l.constraintImpulse.angle+=E,l.angle+=E)}}},e.postSolveAll=function(s){for(var f=0;f<s.length;f++){var t=s[f],l=t.constraintImpulse;if(!(t.isStatic||l.x===0&&l.y===0&&l.angle===0)){i.set(t,!1);for(var p=0;p<t.parts.length;p++){var v=t.parts[p];n.translate(v.vertices,l),p>0&&(v.position.x+=l.x,v.position.y+=l.y),l.angle!==0&&(n.rotate(v.vertices,l.angle,t.position),o.rotate(v.axes,l.angle),p>0&&a.rotateAbout(v.position,l.angle,t.position,v.position)),c.update(v.bounds,v.vertices,t.velocity)}l.angle*=e._warming,l.x*=e._warming,l.y*=e._warming}}},e.pointAWorld=function(s){return{x:(s.bodyA?s.bodyA.position.x:0)+s.pointA.x,y:(s.bodyA?s.bodyA.position.y:0)+s.pointA.y}},e.pointBWorld=function(s){return{x:(s.bodyB?s.bodyB.position.x:0)+s.pointB.x,y:(s.bodyB?s.bodyB.position.y:0)+s.pointB.y}}})()},function(g,h,r){var e={};g.exports=e;var n=r(2),a=r(0);(function(){e.fromVertices=function(i){for(var c={},o=0;o<i.length;o++){var u=(o+1)%i.length,s=n.normalise({x:i[u].y-i[o].y,y:i[o].x-i[u].x}),f=s.y===0?1/0:s.x/s.y;f=f.toFixed(3).toString(),c[f]=s}return a.values(c)},e.rotate=function(i,c){if(c!==0)for(var o=Math.cos(c),u=Math.sin(c),s=0;s<i.length;s++){var f=i[s],t;t=f.x*o-f.y*u,f.y=f.x*u+f.y*o,f.x=t}}})()},function(g,h,r){var e={};g.exports=e;var n=r(3),a=r(0),i=r(6),c=r(1),o=r(2);(function(){e.rectangle=function(u,s,f,t,l){l=l||{};var p={label:"Rectangle Body",position:{x:u,y:s},vertices:n.fromPath("L 0 0 L "+f+" 0 L "+f+" "+t+" L 0 "+t)};if(l.chamfer){var v=l.chamfer;p.vertices=n.chamfer(p.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete l.chamfer}return i.create(a.extend({},p,l))},e.trapezoid=function(u,s,f,t,l,p){p=p||{},l*=.5;var v=(1-l*2)*f,S=f*l,P=S+v,m=P+S,d;l<.5?d="L 0 0 L "+S+" "+-t+" L "+P+" "+-t+" L "+m+" 0":d="L 0 0 L "+P+" "+-t+" L "+m+" 0";var y={label:"Trapezoid Body",position:{x:u,y:s},vertices:n.fromPath(d)};if(p.chamfer){var x=p.chamfer;y.vertices=n.chamfer(y.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete p.chamfer}return i.create(a.extend({},y,p))},e.circle=function(u,s,f,t,l){t=t||{};var p={label:"Circle Body",circleRadius:f};l=l||25;var v=Math.ceil(Math.max(10,Math.min(l,f)));return v%2===1&&(v+=1),e.polygon(u,s,v,f,a.extend({},p,t))},e.polygon=function(u,s,f,t,l){if(l=l||{},f<3)return e.circle(u,s,t,l);for(var p=2*Math.PI/f,v="",S=p*.5,P=0;P<f;P+=1){var m=S+P*p,d=Math.cos(m)*t,y=Math.sin(m)*t;v+="L "+d.toFixed(3)+" "+y.toFixed(3)+" "}var x={label:"Polygon Body",position:{x:u,y:s},vertices:n.fromPath(v)};if(l.chamfer){var w=l.chamfer;x.vertices=n.chamfer(x.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete l.chamfer}return i.create(a.extend({},x,l))},e.fromVertices=function(u,s,f,t,l,p,v,S){var P=a.getDecomp(),m,d,y,x,w,I,C,M,E,A,T;for(m=Boolean(P&&P.quickDecomp),t=t||{},y=[],l=typeof l<"u"?l:!1,p=typeof p<"u"?p:.01,v=typeof v<"u"?v:10,S=typeof S<"u"?S:.01,a.isArray(f[0])||(f=[f]),A=0;A<f.length;A+=1)if(I=f[A],x=n.isConvex(I),w=!x,w&&!m&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),x||!m)x?I=n.clockwiseSort(I):I=n.hull(I),y.push({position:{x:u,y:s},vertices:I});else{var O=I.map(function(q){return[q.x,q.y]});P.makeCCW(O),p!==!1&&P.removeCollinearPoints(O,p),S!==!1&&P.removeDuplicatePoints&&P.removeDuplicatePoints(O,S);var R=P.quickDecomp(O);for(C=0;C<R.length;C++){var L=R[C],b=L.map(function(q){return{x:q[0],y:q[1]}});v>0&&n.area(b)<v||y.push({position:n.centre(b),vertices:b})}}for(C=0;C<y.length;C++)y[C]=i.create(a.extend(y[C],t));if(l){var B=5;for(C=0;C<y.length;C++){var F=y[C];for(M=C+1;M<y.length;M++){var H=y[M];if(c.overlaps(F.bounds,H.bounds)){var k=F.vertices,D=H.vertices;for(E=0;E<F.vertices.length;E++)for(T=0;T<H.vertices.length;T++){var J=o.magnitudeSquared(o.sub(k[(E+1)%k.length],D[T])),j=o.magnitudeSquared(o.sub(k[E],D[(T+1)%D.length]));J<B&&j<B&&(k[E].isInternal=!0,D[T].isInternal=!0)}}}}}return y.length>1?(d=i.create(a.extend({parts:y.slice(0)},t)),i.setPosition(d,{x:u,y:s}),d):y[0]}})()},function(g,h,r){var e={};g.exports=e;var n=r(0);(function(){e.create=function(a){var i={};return a||n.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=a||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=parseInt(i.element.getAttribute("data-pixel-ratio"),10)||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(c){var o=e._getRelativeMousePosition(c,i.element,i.pixelRatio),u=c.changedTouches;u&&(i.button=0,c.preventDefault()),i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=c},i.mousedown=function(c){var o=e._getRelativeMousePosition(c,i.element,i.pixelRatio),u=c.changedTouches;u?(i.button=0,c.preventDefault()):i.button=c.button,i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=c},i.mouseup=function(c){var o=e._getRelativeMousePosition(c,i.element,i.pixelRatio),u=c.changedTouches;u&&c.preventDefault(),i.button=-1,i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=c},i.mousewheel=function(c){i.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},e.setElement(i,i.element),i},e.setElement=function(a,i){a.element=i,i.addEventListener("mousemove",a.mousemove),i.addEventListener("mousedown",a.mousedown),i.addEventListener("mouseup",a.mouseup),i.addEventListener("mousewheel",a.mousewheel),i.addEventListener("DOMMouseScroll",a.mousewheel),i.addEventListener("touchmove",a.mousemove),i.addEventListener("touchstart",a.mousedown),i.addEventListener("touchend",a.mouseup)},e.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},e.setOffset=function(a,i){a.offset.x=i.x,a.offset.y=i.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},e.setScale=function(a,i){a.scale.x=i.x,a.scale.y=i.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},e._getRelativeMousePosition=function(a,i,c){var o=i.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,s=window.pageXOffset!==void 0?window.pageXOffset:u.scrollLeft,f=window.pageYOffset!==void 0?window.pageYOffset:u.scrollTop,t=a.changedTouches,l,p;return t?(l=t[0].pageX-o.left-s,p=t[0].pageY-o.top-f):(l=a.pageX-o.left-s,p=a.pageY-o.top-f),{x:l/(i.clientWidth/(i.width||i.clientWidth)*c),y:p/(i.clientHeight/(i.height||i.clientHeight)*c)}}})()},function(g,h,r){var e={};g.exports=e;var n=r(0),a=r(8);(function(){e.create=function(i){var c={bodies:[],pairs:null};return n.extend(c,i)},e.setBodies=function(i,c){i.bodies=c.slice(0)},e.clear=function(i){i.bodies=[]},e.collisions=function(i){var c=[],o=i.pairs,u=i.bodies,s=u.length,f=e.canCollide,t=a.collides,l,p;for(u.sort(e._compareBoundsX),l=0;l<s;l++){var v=u[l],S=v.bounds,P=v.bounds.max.x,m=v.bounds.max.y,d=v.bounds.min.y,y=v.isStatic||v.isSleeping,x=v.parts.length,w=x===1;for(p=l+1;p<s;p++){var I=u[p],C=I.bounds;if(C.min.x>P)break;if(!(m<C.min.y||d>C.max.y)&&!(y&&(I.isStatic||I.isSleeping))&&!!f(v.collisionFilter,I.collisionFilter)){var M=I.parts.length;if(w&&M===1){var E=t(v,I,o);E&&c.push(E)}else for(var A=x>1?1:0,T=M>1?1:0,O=A;O<x;O++)for(var R=v.parts[O],S=R.bounds,L=T;L<M;L++){var b=I.parts[L],C=b.bounds;if(!(S.min.x>C.max.x||S.max.x<C.min.x||S.max.y<C.min.y||S.min.y>C.max.y)){var E=t(R,b,o);E&&c.push(E)}}}}}return c},e.canCollide=function(i,c){return i.group===c.group&&i.group!==0?i.group>0:(i.mask&c.category)!==0&&(c.mask&i.category)!==0},e._compareBoundsX=function(i,c){return i.bounds.min.x-c.bounds.min.x}})()},function(g,h,r){var e={};g.exports=e;var n=r(0);(function(){e._registry={},e.register=function(a){if(e.isPlugin(a)||n.warn("Plugin.register:",e.toString(a),"does not implement all required fields."),a.name in e._registry){var i=e._registry[a.name],c=e.versionParse(a.version).number,o=e.versionParse(i.version).number;c>o?(n.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(a)),e._registry[a.name]=a):c<o?n.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(a)):a!==i&&n.warn("Plugin.register:",e.toString(a),"is already registered to different plugin object")}else e._registry[a.name]=a;return a},e.resolve=function(a){return e._registry[e.dependencyParse(a).name]},e.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},e.isPlugin=function(a){return a&&a.name&&a.version&&a.install},e.isUsed=function(a,i){return a.used.indexOf(i)>-1},e.isFor=function(a,i){var c=a.for&&e.dependencyParse(a.for);return!a.for||i.name===c.name&&e.versionSatisfies(i.version,c.range)},e.use=function(a,i){if(a.uses=(a.uses||[]).concat(i||[]),a.uses.length===0){n.warn("Plugin.use:",e.toString(a),"does not specify any dependencies to install.");return}for(var c=e.dependencies(a),o=n.topologicalSort(c),u=[],s=0;s<o.length;s+=1)if(o[s]!==a.name){var f=e.resolve(o[s]);if(!f){u.push("\u274C "+o[s]);continue}e.isUsed(a,f.name)||(e.isFor(f,a)||(n.warn("Plugin.use:",e.toString(f),"is for",f.for,"but installed on",e.toString(a)+"."),f._warned=!0),f.install?f.install(a):(n.warn("Plugin.use:",e.toString(f),"does not specify an install function."),f._warned=!0),f._warned?(u.push("\u{1F536} "+e.toString(f)),delete f._warned):u.push("\u2705 "+e.toString(f)),a.used.push(f.name))}u.length>0&&n.info(u.join("  "))},e.dependencies=function(a,i){var c=e.dependencyParse(a),o=c.name;if(i=i||{},!(o in i)){a=e.resolve(a)||a,i[o]=n.map(a.uses||[],function(s){e.isPlugin(s)&&e.register(s);var f=e.dependencyParse(s),t=e.resolve(s);return t&&!e.versionSatisfies(t.version,f.range)?(n.warn("Plugin.dependencies:",e.toString(t),"does not satisfy",e.toString(f),"used by",e.toString(c)+"."),t._warned=!0,a._warned=!0):t||(n.warn("Plugin.dependencies:",e.toString(s),"used by",e.toString(c),"could not be resolved."),a._warned=!0),f.name});for(var u=0;u<i[o].length;u+=1)e.dependencies(i[o][u],i);return i}},e.dependencyParse=function(a){if(n.isString(a)){var i=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return i.test(a)||n.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},e.versionParse=function(a){var i=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;i.test(a)||n.warn("Plugin.versionParse:",a,"is not a valid version or range.");var c=i.exec(a),o=Number(c[4]),u=Number(c[5]),s=Number(c[6]);return{isRange:Boolean(c[1]||c[2]),version:c[3],range:a,operator:c[1]||c[2]||"",major:o,minor:u,patch:s,parts:[o,u,s],prerelease:c[7],number:o*1e8+u*1e4+s}},e.versionSatisfies=function(a,i){i=i||"*";var c=e.versionParse(i),o=e.versionParse(a);if(c.isRange){if(c.operator==="*"||a==="*")return!0;if(c.operator===">")return o.number>c.number;if(c.operator===">=")return o.number>=c.number;if(c.operator==="~")return o.major===c.major&&o.minor===c.minor&&o.patch>=c.patch;if(c.operator==="^")return c.major>0?o.major===c.major&&o.number>=c.number:c.minor>0?o.minor===c.minor&&o.patch>=c.patch:o.patch===c.patch}return a===i||a==="*"}})()},function(g,h,r){var e={};g.exports=e;var n=r(0),a=r(5),i=r(1),c=r(4),o=r(2),u=r(13);(function(){var s,f;typeof window<"u"&&(s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(m){window.setTimeout(function(){m(n.now())},1e3/60)},f=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(m){var d={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!m.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},y=n.extend(d,m);return y.canvas&&(y.canvas.width=y.options.width||y.canvas.width,y.canvas.height=y.options.height||y.canvas.height),y.mouse=m.mouse,y.engine=m.engine,y.canvas=y.canvas||p(y.options.width,y.options.height),y.context=y.canvas.getContext("2d"),y.textures={},y.bounds=y.bounds||{min:{x:0,y:0},max:{x:y.canvas.width,y:y.canvas.height}},y.options.showBroadphase=!1,y.options.pixelRatio!==1&&e.setPixelRatio(y,y.options.pixelRatio),n.isElement(y.element)?y.element.appendChild(y.canvas):y.canvas.parentNode||n.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),y},e.run=function(m){(function d(y){m.frameRequestId=s(d),t(m,y),e.world(m,y),(m.options.showStats||m.options.showDebug)&&e.stats(m,m.context,y),(m.options.showPerformance||m.options.showDebug)&&e.performance(m,m.context,y)})()},e.stop=function(m){f(m.frameRequestId)},e.setPixelRatio=function(m,d){var y=m.options,x=m.canvas;d==="auto"&&(d=v(x)),y.pixelRatio=d,x.setAttribute("data-pixel-ratio",d),x.width=y.width*d,x.height=y.height*d,x.style.width=y.width+"px",x.style.height=y.height+"px"},e.lookAt=function(m,d,y,x){x=typeof x<"u"?x:!0,d=n.isArray(d)?d:[d],y=y||{x:0,y:0};for(var w={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},I=0;I<d.length;I+=1){var C=d[I],M=C.bounds?C.bounds.min:C.min||C.position||C,E=C.bounds?C.bounds.max:C.max||C.position||C;M&&E&&(M.x<w.min.x&&(w.min.x=M.x),E.x>w.max.x&&(w.max.x=E.x),M.y<w.min.y&&(w.min.y=M.y),E.y>w.max.y&&(w.max.y=E.y))}var A=w.max.x-w.min.x+2*y.x,T=w.max.y-w.min.y+2*y.y,O=m.canvas.height,R=m.canvas.width,L=R/O,b=A/T,B=1,F=1;b>L?F=b/L:B=L/b,m.options.hasBounds=!0,m.bounds.min.x=w.min.x,m.bounds.max.x=w.min.x+A*B,m.bounds.min.y=w.min.y,m.bounds.max.y=w.min.y+T*F,x&&(m.bounds.min.x+=A*.5-A*B*.5,m.bounds.max.x+=A*.5-A*B*.5,m.bounds.min.y+=T*.5-T*F*.5,m.bounds.max.y+=T*.5-T*F*.5),m.bounds.min.x-=y.x,m.bounds.max.x-=y.x,m.bounds.min.y-=y.y,m.bounds.max.y-=y.y,m.mouse&&(u.setScale(m.mouse,{x:(m.bounds.max.x-m.bounds.min.x)/m.canvas.width,y:(m.bounds.max.y-m.bounds.min.y)/m.canvas.height}),u.setOffset(m.mouse,m.bounds.min))},e.startViewTransform=function(m){var d=m.bounds.max.x-m.bounds.min.x,y=m.bounds.max.y-m.bounds.min.y,x=d/m.options.width,w=y/m.options.height;m.context.setTransform(m.options.pixelRatio/x,0,0,m.options.pixelRatio/w,0,0),m.context.translate(-m.bounds.min.x,-m.bounds.min.y)},e.endViewTransform=function(m){m.context.setTransform(m.options.pixelRatio,0,0,m.options.pixelRatio,0,0)},e.world=function(m,d){var y=n.now(),x=m.engine,w=x.world,I=m.canvas,C=m.context,M=m.options,E=m.timing,A=a.allBodies(w),T=a.allConstraints(w),O=M.wireframes?M.wireframeBackground:M.background,R=[],L=[],b,B={timestamp:x.timing.timestamp};if(c.trigger(m,"beforeRender",B),m.currentBackground!==O&&P(m,O),C.globalCompositeOperation="source-in",C.fillStyle="transparent",C.fillRect(0,0,I.width,I.height),C.globalCompositeOperation="source-over",M.hasBounds){for(b=0;b<A.length;b++){var F=A[b];i.overlaps(F.bounds,m.bounds)&&R.push(F)}for(b=0;b<T.length;b++){var H=T[b],k=H.bodyA,D=H.bodyB,J=H.pointA,j=H.pointB;k&&(J=o.add(k.position,H.pointA)),D&&(j=o.add(D.position,H.pointB)),!(!J||!j)&&(i.contains(m.bounds,J)||i.contains(m.bounds,j))&&L.push(H)}e.startViewTransform(m),m.mouse&&(u.setScale(m.mouse,{x:(m.bounds.max.x-m.bounds.min.x)/m.options.width,y:(m.bounds.max.y-m.bounds.min.y)/m.options.height}),u.setOffset(m.mouse,m.bounds.min))}else L=T,R=A,m.options.pixelRatio!==1&&m.context.setTransform(m.options.pixelRatio,0,0,m.options.pixelRatio,0,0);!M.wireframes||x.enableSleeping&&M.showSleeping?e.bodies(m,R,C):(M.showConvexHulls&&e.bodyConvexHulls(m,R,C),e.bodyWireframes(m,R,C)),M.showBounds&&e.bodyBounds(m,R,C),(M.showAxes||M.showAngleIndicator)&&e.bodyAxes(m,R,C),M.showPositions&&e.bodyPositions(m,R,C),M.showVelocity&&e.bodyVelocity(m,R,C),M.showIds&&e.bodyIds(m,R,C),M.showSeparations&&e.separations(m,x.pairs.list,C),M.showCollisions&&e.collisions(m,x.pairs.list,C),M.showVertexNumbers&&e.vertexNumbers(m,R,C),M.showMousePosition&&e.mousePosition(m,m.mouse,C),e.constraints(L,C),M.hasBounds&&e.endViewTransform(m),c.trigger(m,"afterRender",B),E.lastElapsed=n.now()-y},e.stats=function(m,d,y){for(var x=m.engine,w=x.world,I=a.allBodies(w),C=0,M=55,E=44,A=0,T=0,O=0;O<I.length;O+=1)C+=I[O].parts.length;var R={Part:C,Body:I.length,Cons:a.allConstraints(w).length,Comp:a.allComposites(w).length,Pair:x.pairs.list.length};d.fillStyle="#0e0f19",d.fillRect(A,T,M*5.5,E),d.font="12px Arial",d.textBaseline="top",d.textAlign="right";for(var L in R){var b=R[L];d.fillStyle="#aaa",d.fillText(L,A+M,T+8),d.fillStyle="#eee",d.fillText(b,A+M,T+26),A+=M}},e.performance=function(m,d){var y=m.engine,x=m.timing,w=x.deltaHistory,I=x.elapsedHistory,C=x.timestampElapsedHistory,M=x.engineDeltaHistory,E=x.engineElapsedHistory,A=y.timing.lastDelta,T=l(w),O=l(I),R=l(M),L=l(E),b=l(C),B=b/T||0,F=1e3/T||0,H=4,k=12,D=60,J=34,j=10,q=69;d.fillStyle="#0e0f19",d.fillRect(0,50,k*4+D*5+22,J),e.status(d,j,q,D,H,w.length,Math.round(F)+" fps",F/e._goodFps,function(G){return w[G]/T-1}),e.status(d,j+k+D,q,D,H,M.length,A.toFixed(2)+" dt",e._goodDelta/A,function(G){return M[G]/R-1}),e.status(d,j+(k+D)*2,q,D,H,E.length,L.toFixed(2)+" ut",1-L/e._goodFps,function(G){return E[G]/L-1}),e.status(d,j+(k+D)*3,q,D,H,I.length,O.toFixed(2)+" rt",1-O/e._goodFps,function(G){return I[G]/O-1}),e.status(d,j+(k+D)*4,q,D,H,C.length,B.toFixed(2)+" x",B*B*B,function(G){return(C[G]/w[G]/B||0)-1})},e.status=function(m,d,y,x,w,I,C,M,E){m.strokeStyle="#888",m.fillStyle="#444",m.lineWidth=1,m.fillRect(d,y+7,x,1),m.beginPath(),m.moveTo(d,y+7-w*n.clamp(.4*E(0),-2,2));for(var A=0;A<x;A+=1)m.lineTo(d+A,y+7-(A<I?w*n.clamp(.4*E(A),-2,2):0));m.stroke(),m.fillStyle="hsl("+n.clamp(25+95*M,0,120)+",100%,60%)",m.fillRect(d,y-7,4,4),m.font="12px Arial",m.textBaseline="middle",m.textAlign="right",m.fillStyle="#eee",m.fillText(C,d+x,y-5)},e.constraints=function(m,d){for(var y=d,x=0;x<m.length;x++){var w=m[x];if(!(!w.render.visible||!w.pointA||!w.pointB)){var I=w.bodyA,C=w.bodyB,M,E;if(I?M=o.add(I.position,w.pointA):M=w.pointA,w.render.type==="pin")y.beginPath(),y.arc(M.x,M.y,3,0,2*Math.PI),y.closePath();else{if(C?E=o.add(C.position,w.pointB):E=w.pointB,y.beginPath(),y.moveTo(M.x,M.y),w.render.type==="spring")for(var A=o.sub(E,M),T=o.perp(o.normalise(A)),O=Math.ceil(n.clamp(w.length/5,12,20)),R,L=1;L<O;L+=1)R=L%2===0?1:-1,y.lineTo(M.x+A.x*(L/O)+T.x*R*4,M.y+A.y*(L/O)+T.y*R*4);y.lineTo(E.x,E.y)}w.render.lineWidth&&(y.lineWidth=w.render.lineWidth,y.strokeStyle=w.render.strokeStyle,y.stroke()),w.render.anchors&&(y.fillStyle=w.render.strokeStyle,y.beginPath(),y.arc(M.x,M.y,3,0,2*Math.PI),y.arc(E.x,E.y,3,0,2*Math.PI),y.closePath(),y.fill())}}},e.bodies=function(m,d,y){var x=y,w=m.engine,I=m.options,C=I.showInternalEdges||!I.wireframes,M,E,A,T;for(A=0;A<d.length;A++)if(M=d[A],!!M.render.visible){for(T=M.parts.length>1?1:0;T<M.parts.length;T++)if(E=M.parts[T],!!E.render.visible){if(I.showSleeping&&M.isSleeping?x.globalAlpha=.5*E.render.opacity:E.render.opacity!==1&&(x.globalAlpha=E.render.opacity),E.render.sprite&&E.render.sprite.texture&&!I.wireframes){var O=E.render.sprite,R=S(m,O.texture);x.translate(E.position.x,E.position.y),x.rotate(E.angle),x.drawImage(R,R.width*-O.xOffset*O.xScale,R.height*-O.yOffset*O.yScale,R.width*O.xScale,R.height*O.yScale),x.rotate(-E.angle),x.translate(-E.position.x,-E.position.y)}else{if(E.circleRadius)x.beginPath(),x.arc(E.position.x,E.position.y,E.circleRadius,0,2*Math.PI);else{x.beginPath(),x.moveTo(E.vertices[0].x,E.vertices[0].y);for(var L=1;L<E.vertices.length;L++)!E.vertices[L-1].isInternal||C?x.lineTo(E.vertices[L].x,E.vertices[L].y):x.moveTo(E.vertices[L].x,E.vertices[L].y),E.vertices[L].isInternal&&!C&&x.moveTo(E.vertices[(L+1)%E.vertices.length].x,E.vertices[(L+1)%E.vertices.length].y);x.lineTo(E.vertices[0].x,E.vertices[0].y),x.closePath()}I.wireframes?(x.lineWidth=1,x.strokeStyle="#bbb",x.stroke()):(x.fillStyle=E.render.fillStyle,E.render.lineWidth&&(x.lineWidth=E.render.lineWidth,x.strokeStyle=E.render.strokeStyle,x.stroke()),x.fill())}x.globalAlpha=1}}},e.bodyWireframes=function(m,d,y){var x=y,w=m.options.showInternalEdges,I,C,M,E,A;for(x.beginPath(),M=0;M<d.length;M++)if(I=d[M],!!I.render.visible)for(A=I.parts.length>1?1:0;A<I.parts.length;A++){for(C=I.parts[A],x.moveTo(C.vertices[0].x,C.vertices[0].y),E=1;E<C.vertices.length;E++)!C.vertices[E-1].isInternal||w?x.lineTo(C.vertices[E].x,C.vertices[E].y):x.moveTo(C.vertices[E].x,C.vertices[E].y),C.vertices[E].isInternal&&!w&&x.moveTo(C.vertices[(E+1)%C.vertices.length].x,C.vertices[(E+1)%C.vertices.length].y);x.lineTo(C.vertices[0].x,C.vertices[0].y)}x.lineWidth=1,x.strokeStyle="#bbb",x.stroke()},e.bodyConvexHulls=function(m,d,y){var x=y,w,I,C,M,E;for(x.beginPath(),C=0;C<d.length;C++)if(w=d[C],!(!w.render.visible||w.parts.length===1)){for(x.moveTo(w.vertices[0].x,w.vertices[0].y),M=1;M<w.vertices.length;M++)x.lineTo(w.vertices[M].x,w.vertices[M].y);x.lineTo(w.vertices[0].x,w.vertices[0].y)}x.lineWidth=1,x.strokeStyle="rgba(255,255,255,0.2)",x.stroke()},e.vertexNumbers=function(m,d,y){var x=y,w,I,C;for(w=0;w<d.length;w++){var M=d[w].parts;for(C=M.length>1?1:0;C<M.length;C++){var E=M[C];for(I=0;I<E.vertices.length;I++)x.fillStyle="rgba(255,255,255,0.2)",x.fillText(w+"_"+I,E.position.x+(E.vertices[I].x-E.position.x)*.8,E.position.y+(E.vertices[I].y-E.position.y)*.8)}}},e.mousePosition=function(m,d,y){var x=y;x.fillStyle="rgba(255,255,255,0.8)",x.fillText(d.position.x+"  "+d.position.y,d.position.x+5,d.position.y-5)},e.bodyBounds=function(m,d,y){var x=y,w=m.engine,I=m.options;x.beginPath();for(var C=0;C<d.length;C++){var M=d[C];if(M.render.visible)for(var E=d[C].parts,A=E.length>1?1:0;A<E.length;A++){var T=E[A];x.rect(T.bounds.min.x,T.bounds.min.y,T.bounds.max.x-T.bounds.min.x,T.bounds.max.y-T.bounds.min.y)}}I.wireframes?x.strokeStyle="rgba(255,255,255,0.08)":x.strokeStyle="rgba(0,0,0,0.1)",x.lineWidth=1,x.stroke()},e.bodyAxes=function(m,d,y){var x=y,w=m.engine,I=m.options,C,M,E,A;for(x.beginPath(),M=0;M<d.length;M++){var T=d[M],O=T.parts;if(!!T.render.visible)if(I.showAxes)for(E=O.length>1?1:0;E<O.length;E++)for(C=O[E],A=0;A<C.axes.length;A++){var R=C.axes[A];x.moveTo(C.position.x,C.position.y),x.lineTo(C.position.x+R.x*20,C.position.y+R.y*20)}else for(E=O.length>1?1:0;E<O.length;E++)for(C=O[E],A=0;A<C.axes.length;A++)x.moveTo(C.position.x,C.position.y),x.lineTo((C.vertices[0].x+C.vertices[C.vertices.length-1].x)/2,(C.vertices[0].y+C.vertices[C.vertices.length-1].y)/2)}I.wireframes?(x.strokeStyle="indianred",x.lineWidth=1):(x.strokeStyle="rgba(255, 255, 255, 0.4)",x.globalCompositeOperation="overlay",x.lineWidth=2),x.stroke(),x.globalCompositeOperation="source-over"},e.bodyPositions=function(m,d,y){var x=y,w=m.engine,I=m.options,C,M,E,A;for(x.beginPath(),E=0;E<d.length;E++)if(C=d[E],!!C.render.visible)for(A=0;A<C.parts.length;A++)M=C.parts[A],x.arc(M.position.x,M.position.y,3,0,2*Math.PI,!1),x.closePath();for(I.wireframes?x.fillStyle="indianred":x.fillStyle="rgba(0,0,0,0.5)",x.fill(),x.beginPath(),E=0;E<d.length;E++)C=d[E],C.render.visible&&(x.arc(C.positionPrev.x,C.positionPrev.y,2,0,2*Math.PI,!1),x.closePath());x.fillStyle="rgba(255,165,0,0.8)",x.fill()},e.bodyVelocity=function(m,d,y){var x=y;x.beginPath();for(var w=0;w<d.length;w++){var I=d[w];!I.render.visible||(x.moveTo(I.position.x,I.position.y),x.lineTo(I.position.x+(I.position.x-I.positionPrev.x)*2,I.position.y+(I.position.y-I.positionPrev.y)*2))}x.lineWidth=3,x.strokeStyle="cornflowerblue",x.stroke()},e.bodyIds=function(m,d,y){var x=y,w,I;for(w=0;w<d.length;w++)if(!!d[w].render.visible){var C=d[w].parts;for(I=C.length>1?1:0;I<C.length;I++){var M=C[I];x.font="12px Arial",x.fillStyle="rgba(255,255,255,0.5)",x.fillText(M.id,M.position.x+10,M.position.y-10)}}},e.collisions=function(m,d,y){var x=y,w=m.options,I,C,M,E,A,T,O;for(x.beginPath(),T=0;T<d.length;T++)if(I=d[T],!!I.isActive)for(C=I.collision,O=0;O<I.activeContacts.length;O++){var R=I.activeContacts[O],L=R.vertex;x.rect(L.x-1.5,L.y-1.5,3.5,3.5)}for(w.wireframes?x.fillStyle="rgba(255,255,255,0.7)":x.fillStyle="orange",x.fill(),x.beginPath(),T=0;T<d.length;T++)if(I=d[T],!!I.isActive&&(C=I.collision,I.activeContacts.length>0)){var b=I.activeContacts[0].vertex.x,B=I.activeContacts[0].vertex.y;I.activeContacts.length===2&&(b=(I.activeContacts[0].vertex.x+I.activeContacts[1].vertex.x)/2,B=(I.activeContacts[0].vertex.y+I.activeContacts[1].vertex.y)/2),C.bodyB===C.supports[0].body||C.bodyA.isStatic===!0?x.moveTo(b-C.normal.x*8,B-C.normal.y*8):x.moveTo(b+C.normal.x*8,B+C.normal.y*8),x.lineTo(b,B)}w.wireframes?x.strokeStyle="rgba(255,165,0,0.7)":x.strokeStyle="orange",x.lineWidth=1,x.stroke()},e.separations=function(m,d,y){var x=y,w=m.options,I,C,M,E,A,T,O;for(x.beginPath(),T=0;T<d.length;T++)if(I=d[T],!!I.isActive){C=I.collision,E=C.bodyA,A=C.bodyB;var R=1;!A.isStatic&&!E.isStatic&&(R=.5),A.isStatic&&(R=0),x.moveTo(A.position.x,A.position.y),x.lineTo(A.position.x-C.penetration.x*R,A.position.y-C.penetration.y*R),R=1,!A.isStatic&&!E.isStatic&&(R=.5),E.isStatic&&(R=0),x.moveTo(E.position.x,E.position.y),x.lineTo(E.position.x+C.penetration.x*R,E.position.y+C.penetration.y*R)}w.wireframes?x.strokeStyle="rgba(255,165,0,0.5)":x.strokeStyle="orange",x.stroke()},e.inspector=function(m,d){var y=m.engine,x=m.selected,w=m.render,I=w.options,C;if(I.hasBounds){var M=w.bounds.max.x-w.bounds.min.x,E=w.bounds.max.y-w.bounds.min.y,A=M/w.options.width,T=E/w.options.height;d.scale(1/A,1/T),d.translate(-w.bounds.min.x,-w.bounds.min.y)}for(var O=0;O<x.length;O++){var R=x[O].data;switch(d.translate(.5,.5),d.lineWidth=1,d.strokeStyle="rgba(255,165,0,0.9)",d.setLineDash([1,2]),R.type){case"body":C=R.bounds,d.beginPath(),d.rect(Math.floor(C.min.x-3),Math.floor(C.min.y-3),Math.floor(C.max.x-C.min.x+6),Math.floor(C.max.y-C.min.y+6)),d.closePath(),d.stroke();break;case"constraint":var L=R.pointA;R.bodyA&&(L=R.pointB),d.beginPath(),d.arc(L.x,L.y,10,0,2*Math.PI),d.closePath(),d.stroke();break}d.setLineDash([]),d.translate(-.5,-.5)}m.selectStart!==null&&(d.translate(.5,.5),d.lineWidth=1,d.strokeStyle="rgba(255,165,0,0.6)",d.fillStyle="rgba(255,165,0,0.1)",C=m.selectBounds,d.beginPath(),d.rect(Math.floor(C.min.x),Math.floor(C.min.y),Math.floor(C.max.x-C.min.x),Math.floor(C.max.y-C.min.y)),d.closePath(),d.stroke(),d.fill(),d.translate(-.5,-.5)),I.hasBounds&&d.setTransform(1,0,0,1,0,0)};var t=function(m,d){var y=m.engine,x=m.timing,w=x.historySize,I=y.timing.timestamp;x.delta=d-x.lastTime||e._goodDelta,x.lastTime=d,x.timestampElapsed=I-x.lastTimestamp||0,x.lastTimestamp=I,x.deltaHistory.unshift(x.delta),x.deltaHistory.length=Math.min(x.deltaHistory.length,w),x.engineDeltaHistory.unshift(y.timing.lastDelta),x.engineDeltaHistory.length=Math.min(x.engineDeltaHistory.length,w),x.timestampElapsedHistory.unshift(x.timestampElapsed),x.timestampElapsedHistory.length=Math.min(x.timestampElapsedHistory.length,w),x.engineElapsedHistory.unshift(y.timing.lastElapsed),x.engineElapsedHistory.length=Math.min(x.engineElapsedHistory.length,w),x.elapsedHistory.unshift(x.lastElapsed),x.elapsedHistory.length=Math.min(x.elapsedHistory.length,w)},l=function(m){for(var d=0,y=0;y<m.length;y+=1)d+=m[y];return d/m.length||0},p=function(m,d){var y=document.createElement("canvas");return y.width=m,y.height=d,y.oncontextmenu=function(){return!1},y.onselectstart=function(){return!1},y},v=function(m){var d=m.getContext("2d"),y=window.devicePixelRatio||1,x=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1;return y/x},S=function(m,d){var y=m.textures[d];return y||(y=m.textures[d]=new Image,y.src=d,y)},P=function(m,d){var y=d;/(jpg|gif|png)$/.test(d)&&(y="url("+d+")"),m.canvas.style.background=y,m.canvas.style.backgroundSize="contain",m.currentBackground=d}})()},function(g,h){var r={};g.exports=r,function(){r.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(g,h,r){var e={};g.exports=e;var n=r(7),a=r(19),i=r(14),c=r(20),o=r(4),u=r(5),s=r(10),f=r(0),t=r(6);(function(){e.create=function(l){l=l||{};var p={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},v=f.extend(p,l);return v.world=l.world||u.create({label:"World"}),v.pairs=l.pairs||c.create(),v.detector=l.detector||i.create(),v.grid={buckets:[]},v.world.gravity=v.gravity,v.broadphase=v.grid,v.metrics={},v},e.update=function(l,p,v){var S=f.now();p=p||1e3/60,v=v||1;var P=l.world,m=l.detector,d=l.pairs,y=l.timing,x=y.timestamp,w;y.timestamp+=p*y.timeScale,y.lastDelta=p*y.timeScale;var I={timestamp:y.timestamp};o.trigger(l,"beforeUpdate",I);var C=u.allBodies(P),M=u.allConstraints(P);for(P.isModified&&i.setBodies(m,C),P.isModified&&u.setModified(P,!1,!1,!0),l.enableSleeping&&n.update(C,y.timeScale),e._bodiesApplyGravity(C,l.gravity),e._bodiesUpdate(C,p,y.timeScale,v,P.bounds),s.preSolveAll(C),w=0;w<l.constraintIterations;w++)s.solveAll(M,y.timeScale);s.postSolveAll(C),m.pairs=l.pairs;var E=i.collisions(m);for(c.update(d,E,x),l.enableSleeping&&n.afterCollisions(d.list,y.timeScale),d.collisionStart.length>0&&o.trigger(l,"collisionStart",{pairs:d.collisionStart}),a.preSolvePosition(d.list),w=0;w<l.positionIterations;w++)a.solvePosition(d.list,y.timeScale);for(a.postSolvePosition(C),s.preSolveAll(C),w=0;w<l.constraintIterations;w++)s.solveAll(M,y.timeScale);for(s.postSolveAll(C),a.preSolveVelocity(d.list),w=0;w<l.velocityIterations;w++)a.solveVelocity(d.list,y.timeScale);return d.collisionActive.length>0&&o.trigger(l,"collisionActive",{pairs:d.collisionActive}),d.collisionEnd.length>0&&o.trigger(l,"collisionEnd",{pairs:d.collisionEnd}),e._bodiesClearForces(C),o.trigger(l,"afterUpdate",I),l.timing.lastElapsed=f.now()-S,l},e.merge=function(l,p){if(f.extend(l,p),p.world){l.world=p.world,e.clear(l);for(var v=u.allBodies(l.world),S=0;S<v.length;S++){var P=v[S];n.set(P,!1),P.id=f.nextId()}}},e.clear=function(l){c.clear(l.pairs),i.clear(l.detector)},e._bodiesClearForces=function(l){for(var p=0;p<l.length;p++){var v=l[p];v.force.x=0,v.force.y=0,v.torque=0}},e._bodiesApplyGravity=function(l,p){var v=typeof p.scale<"u"?p.scale:.001;if(!(p.x===0&&p.y===0||v===0))for(var S=0;S<l.length;S++){var P=l[S];P.isStatic||P.isSleeping||(P.force.y+=P.mass*p.y*v,P.force.x+=P.mass*p.x*v)}},e._bodiesUpdate=function(l,p,v,S,P){for(var m=0;m<l.length;m++){var d=l[m];d.isStatic||d.isSleeping||t.update(d,p,v,S)}}})()},function(g,h,r){var e={};g.exports=e;var n=r(3),a=r(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var c,o,u,s=i.length;for(c=0;c<s;c++)o=i[c],!!o.isActive&&(u=o.activeContacts.length,o.collision.parentA.totalContacts+=u,o.collision.parentB.totalContacts+=u)},e.solvePosition=function(i,c){var o,u,s,f,t,l,p,v,S=e._positionDampen,P=i.length;for(o=0;o<P;o++)u=i[o],!(!u.isActive||u.isSensor)&&(s=u.collision,f=s.parentA,t=s.parentB,l=s.normal,u.separation=l.x*(t.positionImpulse.x+s.penetration.x-f.positionImpulse.x)+l.y*(t.positionImpulse.y+s.penetration.y-f.positionImpulse.y));for(o=0;o<P;o++)u=i[o],!(!u.isActive||u.isSensor)&&(s=u.collision,f=s.parentA,t=s.parentB,l=s.normal,v=(u.separation-u.slop)*c,(f.isStatic||t.isStatic)&&(v*=2),f.isStatic||f.isSleeping||(p=S/f.totalContacts,f.positionImpulse.x+=l.x*v*p,f.positionImpulse.y+=l.y*v*p),t.isStatic||t.isSleeping||(p=S/t.totalContacts,t.positionImpulse.x-=l.x*v*p,t.positionImpulse.y-=l.y*v*p))},e.postSolvePosition=function(i){for(var c=e._positionWarming,o=i.length,u=n.translate,s=a.update,f=0;f<o;f++){var t=i[f],l=t.positionImpulse,p=l.x,v=l.y,S=t.velocity;if(t.totalContacts=0,p!==0||v!==0){for(var P=0;P<t.parts.length;P++){var m=t.parts[P];u(m.vertices,l),s(m.bounds,m.vertices,S),m.position.x+=p,m.position.y+=v}t.positionPrev.x+=p,t.positionPrev.y+=v,p*S.x+v*S.y<0?(l.x=0,l.y=0):(l.x*=c,l.y*=c)}}},e.preSolveVelocity=function(i){var c=i.length,o,u;for(o=0;o<c;o++){var s=i[o];if(!(!s.isActive||s.isSensor)){var f=s.activeContacts,t=f.length,l=s.collision,p=l.parentA,v=l.parentB,S=l.normal,P=l.tangent;for(u=0;u<t;u++){var m=f[u],d=m.vertex,y=m.normalImpulse,x=m.tangentImpulse;if(y!==0||x!==0){var w=S.x*y+P.x*x,I=S.y*y+P.y*x;p.isStatic||p.isSleeping||(p.positionPrev.x+=w*p.inverseMass,p.positionPrev.y+=I*p.inverseMass,p.anglePrev+=p.inverseInertia*((d.x-p.position.x)*I-(d.y-p.position.y)*w)),v.isStatic||v.isSleeping||(v.positionPrev.x-=w*v.inverseMass,v.positionPrev.y-=I*v.inverseMass,v.anglePrev-=v.inverseInertia*((d.x-v.position.x)*I-(d.y-v.position.y)*w))}}}}},e.solveVelocity=function(i,c){var o=c*c,u=e._restingThresh*o,s=e._frictionNormalMultiplier,f=e._restingThreshTangent*o,t=Number.MAX_VALUE,l=i.length,p,v,S,P;for(S=0;S<l;S++){var m=i[S];if(!(!m.isActive||m.isSensor)){var d=m.collision,y=d.parentA,x=d.parentB,w=y.velocity,I=x.velocity,C=d.normal.x,M=d.normal.y,E=d.tangent.x,A=d.tangent.y,T=m.activeContacts,O=T.length,R=1/O,L=y.inverseMass+x.inverseMass,b=m.friction*m.frictionStatic*s*o;for(w.x=y.position.x-y.positionPrev.x,w.y=y.position.y-y.positionPrev.y,I.x=x.position.x-x.positionPrev.x,I.y=x.position.y-x.positionPrev.y,y.angularVelocity=y.angle-y.anglePrev,x.angularVelocity=x.angle-x.anglePrev,P=0;P<O;P++){var B=T[P],F=B.vertex,H=F.x-y.position.x,k=F.y-y.position.y,D=F.x-x.position.x,J=F.y-x.position.y,j=w.x-k*y.angularVelocity,q=w.y+H*y.angularVelocity,G=I.x-J*x.angularVelocity,Cn=I.y+D*x.angularVelocity,Xe=j-G,Qe=q-Cn,te=C*Xe+M*Qe,Q=E*Xe+A*Qe,Ke=m.separation+te,xe=Math.min(Ke,1);xe=Ke<0?0:xe;var Ze=xe*b;Q>Ze||-Q>Ze?(v=Q>0?Q:-Q,p=m.friction*(Q>0?1:-1)*o,p<-v?p=-v:p>v&&(p=v)):(p=Q,v=t);var Ye=H*M-k*C,_e=D*M-J*C,et=R/(L+y.inverseInertia*Ye*Ye+x.inverseInertia*_e*_e),ae=(1+m.restitution)*te*et;if(p*=et,te*te>u&&te<0)B.normalImpulse=0;else{var wn=B.normalImpulse;B.normalImpulse+=ae,B.normalImpulse=Math.min(B.normalImpulse,0),ae=B.normalImpulse-wn}if(Q*Q>f)B.tangentImpulse=0;else{var Pn=B.tangentImpulse;B.tangentImpulse+=p,B.tangentImpulse<-v&&(B.tangentImpulse=-v),B.tangentImpulse>v&&(B.tangentImpulse=v),p=B.tangentImpulse-Pn}var oe=C*ae+E*p,le=M*ae+A*p;y.isStatic||y.isSleeping||(y.positionPrev.x+=oe*y.inverseMass,y.positionPrev.y+=le*y.inverseMass,y.anglePrev+=(H*le-k*oe)*y.inverseInertia),x.isStatic||x.isSleeping||(x.positionPrev.x-=oe*x.inverseMass,x.positionPrev.y-=le*x.inverseMass,x.anglePrev-=(D*le-J*oe)*x.inverseInertia)}}}}})()},function(g,h,r){var e={};g.exports=e;var n=r(9),a=r(0);(function(){e.create=function(i){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},i)},e.update=function(i,c,o){var u=i.list,s=u.length,f=i.table,t=c.length,l=i.collisionStart,p=i.collisionEnd,v=i.collisionActive,S,P,m,d;for(l.length=0,p.length=0,v.length=0,d=0;d<s;d++)u[d].confirmedActive=!1;for(d=0;d<t;d++)S=c[d],m=S.pair,m?(m.isActive?v.push(m):l.push(m),n.update(m,S,o),m.confirmedActive=!0):(m=n.create(S,o),f[m.id]=m,l.push(m),u.push(m));var y=[];for(s=u.length,d=0;d<s;d++)m=u[d],m.confirmedActive||(n.setActive(m,!1,o),p.push(m),!m.collision.bodyA.isSleeping&&!m.collision.bodyB.isSleeping&&y.push(d));for(d=0;d<y.length;d++)P=y[d]-d,m=u[P],u.splice(P,1),delete f[m.id]},e.clear=function(i){return i.table={},i.list.length=0,i.collisionStart.length=0,i.collisionActive.length=0,i.collisionEnd.length=0,i}})()},function(g,h,r){var e=g.exports=r(22);e.Axes=r(11),e.Bodies=r(12),e.Body=r(6),e.Bounds=r(1),e.Collision=r(8),e.Common=r(0),e.Composite=r(5),e.Composites=r(23),e.Constraint=r(10),e.Contact=r(17),e.Detector=r(14),e.Engine=r(18),e.Events=r(4),e.Grid=r(24),e.Mouse=r(13),e.MouseConstraint=r(25),e.Pair=r(9),e.Pairs=r(20),e.Plugin=r(15),e.Query=r(26),e.Render=r(16),e.Resolver=r(19),e.Runner=r(27),e.SAT=r(28),e.Sleeping=r(7),e.Svg=r(29),e.Vector=r(2),e.Vertices=r(3),e.World=r(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(g,h,r){var e={};g.exports=e;var n=r(15),a=r(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){n.use(e,Array.prototype.slice.call(arguments))},e.before=function(i,c){return i=i.replace(/^Matter./,""),a.chainPathBefore(e,i,c)},e.after=function(i,c){return i=i.replace(/^Matter./,""),a.chainPathAfter(e,i,c)}})()},function(g,h,r){var e={};g.exports=e;var n=r(5),a=r(10),i=r(0),c=r(6),o=r(12),u=i.deprecated;(function(){e.stack=function(s,f,t,l,p,v,S){for(var P=n.create({label:"Stack"}),m=s,d=f,y,x=0,w=0;w<l;w++){for(var I=0,C=0;C<t;C++){var M=S(m,d,C,w,y,x);if(M){var E=M.bounds.max.y-M.bounds.min.y,A=M.bounds.max.x-M.bounds.min.x;E>I&&(I=E),c.translate(M,{x:A*.5,y:E*.5}),m=M.bounds.max.x+p,n.addBody(P,M),y=M,x+=1}else m+=p}d+=I+v,m=s}return P},e.chain=function(s,f,t,l,p,v){for(var S=s.bodies,P=1;P<S.length;P++){var m=S[P-1],d=S[P],y=m.bounds.max.y-m.bounds.min.y,x=m.bounds.max.x-m.bounds.min.x,w=d.bounds.max.y-d.bounds.min.y,I=d.bounds.max.x-d.bounds.min.x,C={bodyA:m,pointA:{x:x*f,y:y*t},bodyB:d,pointB:{x:I*l,y:w*p}},M=i.extend(C,v);n.addConstraint(s,a.create(M))}return s.label+=" Chain",s},e.mesh=function(s,f,t,l,p){var v=s.bodies,S,P,m,d,y;for(S=0;S<t;S++){for(P=1;P<f;P++)m=v[P-1+S*f],d=v[P+S*f],n.addConstraint(s,a.create(i.extend({bodyA:m,bodyB:d},p)));if(S>0)for(P=0;P<f;P++)m=v[P+(S-1)*f],d=v[P+S*f],n.addConstraint(s,a.create(i.extend({bodyA:m,bodyB:d},p))),l&&P>0&&(y=v[P-1+(S-1)*f],n.addConstraint(s,a.create(i.extend({bodyA:y,bodyB:d},p)))),l&&P<f-1&&(y=v[P+1+(S-1)*f],n.addConstraint(s,a.create(i.extend({bodyA:y,bodyB:d},p))))}return s.label+=" Mesh",s},e.pyramid=function(s,f,t,l,p,v,S){return e.stack(s,f,t,l,p,v,function(P,m,d,y,x,w){var I=Math.min(l,Math.ceil(t/2)),C=x?x.bounds.max.x-x.bounds.min.x:0;if(!(y>I)){y=I-y;var M=y,E=t-1-y;if(!(d<M||d>E)){w===1&&c.translate(x,{x:(d+(t%2===1?1:-1))*C,y:0});var A=x?d*C:0;return S(s+A+d*p,m,d,y,x,w)}}})},e.newtonsCradle=function(s,f,t,l,p){for(var v=n.create({label:"Newtons Cradle"}),S=0;S<t;S++){var P=1.9,m=o.circle(s+S*(l*P),f+p,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),d=a.create({pointA:{x:s+S*(l*P),y:f},bodyB:m});n.addBody(v,m),n.addConstraint(v,d)}return v},u(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(s,f,t,l,p){var v=c.nextGroup(!0),S=20,P=-t*.5+S,m=t*.5-S,d=0,y=n.create({label:"Car"}),x=o.rectangle(s,f,t,l,{collisionFilter:{group:v},chamfer:{radius:l*.5},density:2e-4}),w=o.circle(s+P,f+d,p,{collisionFilter:{group:v},friction:.8}),I=o.circle(s+m,f+d,p,{collisionFilter:{group:v},friction:.8}),C=a.create({bodyB:x,pointB:{x:P,y:d},bodyA:w,stiffness:1,length:0}),M=a.create({bodyB:x,pointB:{x:m,y:d},bodyA:I,stiffness:1,length:0});return n.addBody(y,x),n.addBody(y,w),n.addBody(y,I),n.addConstraint(y,C),n.addConstraint(y,M),y},u(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(s,f,t,l,p,v,S,P,m,d){m=i.extend({inertia:1/0},m),d=i.extend({stiffness:.2,render:{type:"line",anchors:!1}},d);var y=e.stack(s,f,t,l,p,v,function(x,w){return o.circle(x,w,P,m)});return e.mesh(y,t,l,S,d),y.label="Soft Body",y},u(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(g,h,r){var e={};g.exports=e;var n=r(9),a=r(0),i=a.deprecated;(function(){e.create=function(c){var o={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(o,c)},e.update=function(c,o,u,s){var f,t,l,p=u.world,v=c.buckets,S,P,m=!1;for(f=0;f<o.length;f++){var d=o[f];if(!(d.isSleeping&&!s)&&!(p.bounds&&(d.bounds.max.x<p.bounds.min.x||d.bounds.min.x>p.bounds.max.x||d.bounds.max.y<p.bounds.min.y||d.bounds.min.y>p.bounds.max.y))){var y=e._getRegion(c,d);if(!d.region||y.id!==d.region.id||s){(!d.region||s)&&(d.region=y);var x=e._regionUnion(y,d.region);for(t=x.startCol;t<=x.endCol;t++)for(l=x.startRow;l<=x.endRow;l++){P=e._getBucketId(t,l),S=v[P];var w=t>=y.startCol&&t<=y.endCol&&l>=y.startRow&&l<=y.endRow,I=t>=d.region.startCol&&t<=d.region.endCol&&l>=d.region.startRow&&l<=d.region.endRow;!w&&I&&I&&S&&e._bucketRemoveBody(c,S,d),(d.region===y||w&&!I||s)&&(S||(S=e._createBucket(v,P)),e._bucketAddBody(c,S,d))}d.region=y,m=!0}}}m&&(c.pairsList=e._createActivePairsList(c))},i(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},i(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(c,o){var u=Math.min(c.startCol,o.startCol),s=Math.max(c.endCol,o.endCol),f=Math.min(c.startRow,o.startRow),t=Math.max(c.endRow,o.endRow);return e._createRegion(u,s,f,t)},e._getRegion=function(c,o){var u=o.bounds,s=Math.floor(u.min.x/c.bucketWidth),f=Math.floor(u.max.x/c.bucketWidth),t=Math.floor(u.min.y/c.bucketHeight),l=Math.floor(u.max.y/c.bucketHeight);return e._createRegion(s,f,t,l)},e._createRegion=function(c,o,u,s){return{id:c+","+o+","+u+","+s,startCol:c,endCol:o,startRow:u,endRow:s}},e._getBucketId=function(c,o){return"C"+c+"R"+o},e._createBucket=function(c,o){var u=c[o]=[];return u},e._bucketAddBody=function(c,o,u){var s=c.pairs,f=n.id,t=o.length,l;for(l=0;l<t;l++){var p=o[l];if(!(u.id===p.id||u.isStatic&&p.isStatic)){var v=f(u,p),S=s[v];S?S[2]+=1:s[v]=[u,p,1]}}o.push(u)},e._bucketRemoveBody=function(c,o,u){var s=c.pairs,f=n.id,t;o.splice(a.indexOf(o,u),1);var l=o.length;for(t=0;t<l;t++){var p=s[f(u,o[t])];p&&(p[2]-=1)}},e._createActivePairsList=function(c){var o,u=c.pairs,s=a.keys(u),f=s.length,t=[],l;for(l=0;l<f;l++)o=u[s[l]],o[2]>0?t.push(o):delete u[s[l]];return t}})()},function(g,h,r){var e={};g.exports=e;var n=r(3),a=r(7),i=r(13),c=r(4),o=r(14),u=r(10),s=r(5),f=r(0),t=r(1);(function(){e.create=function(l,p){var v=(l?l.mouse:null)||(p?p.mouse:null);v||(l&&l.render&&l.render.canvas?v=i.create(l.render.canvas):p&&p.element?v=i.create(p.element):(v=i.create(),f.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var S=u.create({label:"Mouse Constraint",pointA:v.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),P={type:"mouseConstraint",mouse:v,element:null,body:null,constraint:S,collisionFilter:{category:1,mask:4294967295,group:0}},m=f.extend(P,p);return c.on(l,"beforeUpdate",function(){var d=s.allBodies(l.world);e.update(m,d),e._triggerEvents(m)}),m},e.update=function(l,p){var v=l.mouse,S=l.constraint,P=l.body;if(v.button===0){if(S.bodyB)a.set(S.bodyB,!1),S.pointA=v.position;else for(var m=0;m<p.length;m++)if(P=p[m],t.contains(P.bounds,v.position)&&o.canCollide(P.collisionFilter,l.collisionFilter))for(var d=P.parts.length>1?1:0;d<P.parts.length;d++){var y=P.parts[d];if(n.contains(y.vertices,v.position)){S.pointA=v.position,S.bodyB=l.body=P,S.pointB={x:v.position.x-P.position.x,y:v.position.y-P.position.y},S.angleB=P.angle,a.set(P,!1),c.trigger(l,"startdrag",{mouse:v,body:P});break}}}else S.bodyB=l.body=null,S.pointB=null,P&&c.trigger(l,"enddrag",{mouse:v,body:P})},e._triggerEvents=function(l){var p=l.mouse,v=p.sourceEvents;v.mousemove&&c.trigger(l,"mousemove",{mouse:p}),v.mousedown&&c.trigger(l,"mousedown",{mouse:p}),v.mouseup&&c.trigger(l,"mouseup",{mouse:p}),i.clearSourceEvents(p)}})()},function(g,h,r){var e={};g.exports=e;var n=r(2),a=r(8),i=r(1),c=r(12),o=r(3);(function(){e.collides=function(u,s){for(var f=[],t=s.length,l=u.bounds,p=a.collides,v=i.overlaps,S=0;S<t;S++){var P=s[S],m=P.parts.length,d=m===1?0:1;if(v(P.bounds,l))for(var y=d;y<m;y++){var x=P.parts[y];if(v(x.bounds,l)){var w=p(x,u);if(w){f.push(w);break}}}}return f},e.ray=function(u,s,f,t){t=t||1e-100;for(var l=n.angle(s,f),p=n.magnitude(n.sub(s,f)),v=(f.x+s.x)*.5,S=(f.y+s.y)*.5,P=c.rectangle(v,S,p,t,{angle:l}),m=e.collides(P,u),d=0;d<m.length;d+=1){var y=m[d];y.body=y.bodyB=y.bodyA}return m},e.region=function(u,s,f){for(var t=[],l=0;l<u.length;l++){var p=u[l],v=i.overlaps(p.bounds,s);(v&&!f||!v&&f)&&t.push(p)}return t},e.point=function(u,s){for(var f=[],t=0;t<u.length;t++){var l=u[t];if(i.contains(l.bounds,s))for(var p=l.parts.length===1?0:1;p<l.parts.length;p++){var v=l.parts[p];if(i.contains(v.bounds,s)&&o.contains(v.vertices,s)){f.push(l);break}}}return f}})()},function(g,h,r){var e={};g.exports=e;var n=r(4),a=r(18),i=r(0);(function(){var c,o;if(typeof window<"u"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var u;c=function(s){u=setTimeout(function(){s(i.now())},1e3/60)},o=function(){clearTimeout(u)}}e.create=function(s){var f={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},t=i.extend(f,s);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(t.fps*.5),t.fps=1e3/t.delta,t},e.run=function(s,f){return typeof s.positionIterations<"u"&&(f=s,s=e.create()),function t(l){s.frameRequestId=c(t),l&&s.enabled&&e.tick(s,f,l)}(),s},e.tick=function(s,f,t){var l=f.timing,p=1,v,S={timestamp:l.timestamp};n.trigger(s,"beforeTick",S),s.isFixed?v=s.delta:(v=t-s.timePrev||s.delta,s.timePrev=t,s.deltaHistory.push(v),s.deltaHistory=s.deltaHistory.slice(-s.deltaSampleSize),v=Math.min.apply(null,s.deltaHistory),v=v<s.deltaMin?s.deltaMin:v,v=v>s.deltaMax?s.deltaMax:v,p=v/s.delta,s.delta=v),s.timeScalePrev!==0&&(p*=l.timeScale/s.timeScalePrev),l.timeScale===0&&(p=0),s.timeScalePrev=l.timeScale,s.correction=p,s.frameCounter+=1,t-s.counterTimestamp>=1e3&&(s.fps=s.frameCounter*((t-s.counterTimestamp)/1e3),s.counterTimestamp=t,s.frameCounter=0),n.trigger(s,"tick",S),n.trigger(s,"beforeUpdate",S),a.update(f,v,p),n.trigger(s,"afterUpdate",S),n.trigger(s,"afterTick",S)},e.stop=function(s){o(s.frameRequestId)},e.start=function(s,f){e.run(s,f)}})()},function(g,h,r){var e={};g.exports=e;var n=r(8),a=r(0),i=a.deprecated;(function(){e.collides=function(c,o){return n.collides(c,o)},i(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(g,h,r){var e={};g.exports=e;var n=r(1),a=r(0);(function(){e.pathToVertices=function(i,c){typeof window<"u"&&!("SVGPathSeg"in window)&&a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var o,u,s,f,t,l,p,v,S,P,m=[],d,y,x=0,w=0,I=0;c=c||15;var C=function(E,A,T){var O=T%2===1&&T>1;if(!S||E!=S.x||A!=S.y){S&&O?(d=S.x,y=S.y):(d=0,y=0);var R={x:d+E,y:y+A};(O||!S)&&(S=R),m.push(R),w=d+E,I=y+A}},M=function(E){var A=E.pathSegTypeAsLetter.toUpperCase();if(A!=="Z"){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":w=E.x,I=E.y;break;case"H":w=E.x;break;case"V":I=E.y;break}C(w,I,E.pathSegType)}};for(e._svgPathToAbsolute(i),s=i.getTotalLength(),l=[],o=0;o<i.pathSegList.numberOfItems;o+=1)l.push(i.pathSegList.getItem(o));for(p=l.concat();x<s;){if(P=i.getPathSegAtLength(x),t=l[P],t!=v){for(;p.length&&p[0]!=t;)M(p.shift());v=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=i.getPointAtLength(x),C(f.x,f.y,0);break}x+=c}for(o=0,u=p.length;o<u;++o)M(p[o]);return m},e._svgPathToAbsolute=function(i){for(var c,o,u,s,f,t,l=i.pathSegList,p=0,v=0,S=l.numberOfItems,P=0;P<S;++P){var m=l.getItem(P),d=m.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(d))"x"in m&&(p=m.x),"y"in m&&(v=m.y);else switch("x1"in m&&(u=p+m.x1),"x2"in m&&(f=p+m.x2),"y1"in m&&(s=v+m.y1),"y2"in m&&(t=v+m.y2),"x"in m&&(p+=m.x),"y"in m&&(v+=m.y),d){case"m":l.replaceItem(i.createSVGPathSegMovetoAbs(p,v),P);break;case"l":l.replaceItem(i.createSVGPathSegLinetoAbs(p,v),P);break;case"h":l.replaceItem(i.createSVGPathSegLinetoHorizontalAbs(p),P);break;case"v":l.replaceItem(i.createSVGPathSegLinetoVerticalAbs(v),P);break;case"c":l.replaceItem(i.createSVGPathSegCurvetoCubicAbs(p,v,u,s,f,t),P);break;case"s":l.replaceItem(i.createSVGPathSegCurvetoCubicSmoothAbs(p,v,f,t),P);break;case"q":l.replaceItem(i.createSVGPathSegCurvetoQuadraticAbs(p,v,u,s),P);break;case"t":l.replaceItem(i.createSVGPathSegCurvetoQuadraticSmoothAbs(p,v),P);break;case"a":l.replaceItem(i.createSVGPathSegArcAbs(p,v,m.r1,m.r2,m.angle,m.largeArcFlag,m.sweepFlag),P);break;case"z":case"Z":p=c,v=o;break}(d=="M"||d=="m")&&(c=p,o=v)}}})()},function(g,h,r){var e={};g.exports=e;var n=r(5),a=r(0);(function(){e.create=n.create,e.add=n.add,e.remove=n.remove,e.clear=n.clear,e.addComposite=n.addComposite,e.addBody=n.addBody,e.addConstraint=n.addConstraint})()}])})});var Ae=N((_i,ct)=>{"use strict";ct.exports=function(h,r){return function(){for(var n=new Array(arguments.length),a=0;a<n.length;a++)n[a]=arguments[a];return h.apply(r,n)}}});var V=N((er,dt)=>{"use strict";var _n=Ae(),K=Object.prototype.toString;function Oe(g){return Array.isArray(g)}function Te(g){return typeof g>"u"}function ei(g){return g!==null&&!Te(g)&&g.constructor!==null&&!Te(g.constructor)&&typeof g.constructor.isBuffer=="function"&&g.constructor.isBuffer(g)}function ht(g){return K.call(g)==="[object ArrayBuffer]"}function ti(g){return K.call(g)==="[object FormData]"}function ni(g){var h;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?h=ArrayBuffer.isView(g):h=g&&g.buffer&&ht(g.buffer),h}function ii(g){return typeof g=="string"}function ri(g){return typeof g=="number"}function vt(g){return g!==null&&typeof g=="object"}function ue(g){if(K.call(g)!=="[object Object]")return!1;var h=Object.getPrototypeOf(g);return h===null||h===Object.prototype}function si(g){return K.call(g)==="[object Date]"}function ai(g){return K.call(g)==="[object File]"}function oi(g){return K.call(g)==="[object Blob]"}function mt(g){return K.call(g)==="[object Function]"}function li(g){return vt(g)&&mt(g.pipe)}function fi(g){return K.call(g)==="[object URLSearchParams]"}function ui(g){return g.trim?g.trim():g.replace(/^\s+|\s+$/g,"")}function ci(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Le(g,h){if(!(g===null||typeof g>"u"))if(typeof g!="object"&&(g=[g]),Oe(g))for(var r=0,e=g.length;r<e;r++)h.call(null,g[r],r,g);else for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&h.call(null,g[n],n,g)}function Re(){var g={};function h(n,a){ue(g[a])&&ue(n)?g[a]=Re(g[a],n):ue(n)?g[a]=Re({},n):Oe(n)?g[a]=n.slice():g[a]=n}for(var r=0,e=arguments.length;r<e;r++)Le(arguments[r],h);return g}function hi(g,h,r){return Le(h,function(n,a){r&&typeof n=="function"?g[a]=_n(n,r):g[a]=n}),g}function vi(g){return g.charCodeAt(0)===65279&&(g=g.slice(1)),g}dt.exports={isArray:Oe,isArrayBuffer:ht,isBuffer:ei,isFormData:ti,isArrayBufferView:ni,isString:ii,isNumber:ri,isObject:vt,isPlainObject:ue,isUndefined:Te,isDate:si,isFile:ai,isBlob:oi,isFunction:mt,isStream:li,isURLSearchParams:fi,isStandardBrowserEnv:ci,forEach:Le,merge:Re,extend:hi,trim:ui,stripBOM:vi}});var Be=N((tr,gt)=>{"use strict";var Y=V();function pt(g){return encodeURIComponent(g).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}gt.exports=function(h,r,e){if(!r)return h;var n;if(e)n=e(r);else if(Y.isURLSearchParams(r))n=r.toString();else{var a=[];Y.forEach(r,function(o,u){o===null||typeof o>"u"||(Y.isArray(o)?u=u+"[]":o=[o],Y.forEach(o,function(f){Y.isDate(f)?f=f.toISOString():Y.isObject(f)&&(f=JSON.stringify(f)),a.push(pt(u)+"="+pt(f))}))}),n=a.join("&")}if(n){var i=h.indexOf("#");i!==-1&&(h=h.slice(0,i)),h+=(h.indexOf("?")===-1?"?":"&")+n}return h}});var yt=N((nr,xt)=>{"use strict";var mi=V();function ce(){this.handlers=[]}ce.prototype.use=function(h,r,e){return this.handlers.push({fulfilled:h,rejected:r,synchronous:e?e.synchronous:!1,runWhen:e?e.runWhen:null}),this.handlers.length-1};ce.prototype.eject=function(h){this.handlers[h]&&(this.handlers[h]=null)};ce.prototype.forEach=function(h){mi.forEach(this.handlers,function(e){e!==null&&h(e)})};xt.exports=ce});var Ct=N((ir,St)=>{"use strict";var di=V();St.exports=function(h,r){di.forEach(h,function(n,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(h[r]=n,delete h[a])})}});var be=N((rr,wt)=>{"use strict";wt.exports=function(h,r,e,n,a){return h.config=r,e&&(h.code=e),h.request=n,h.response=a,h.isAxiosError=!0,h.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},h}});var Ne=N((sr,Pt)=>{"use strict";var pi=be();Pt.exports=function(h,r,e,n,a){var i=new Error(h);return pi(i,r,e,n,a)}});var It=N((ar,Et)=>{"use strict";var gi=Ne();Et.exports=function(h,r,e){var n=e.config.validateStatus;!e.status||!n||n(e.status)?h(e):r(gi("Request failed with status code "+e.status,e.config,null,e.request,e))}});var At=N((or,Mt)=>{"use strict";var he=V();Mt.exports=he.isStandardBrowserEnv()?function(){return{write:function(r,e,n,a,i,c){var o=[];o.push(r+"="+encodeURIComponent(e)),he.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),he.isString(a)&&o.push("path="+a),he.isString(i)&&o.push("domain="+i),c===!0&&o.push("secure"),document.cookie=o.join("; ")},read:function(r){var e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Rt=N((lr,Tt)=>{"use strict";Tt.exports=function(h){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(h)}});var Lt=N((fr,Ot)=>{"use strict";Ot.exports=function(h,r){return r?h.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):h}});var bt=N((ur,Bt)=>{"use strict";var xi=Rt(),yi=Lt();Bt.exports=function(h,r){return h&&!xi(r)?yi(h,r):r}});var Ft=N((cr,Nt)=>{"use strict";var Fe=V(),Si=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Nt.exports=function(h){var r={},e,n,a;return h&&Fe.forEach(h.split(`
`),function(c){if(a=c.indexOf(":"),e=Fe.trim(c.substr(0,a)).toLowerCase(),n=Fe.trim(c.substr(a+1)),e){if(r[e]&&Si.indexOf(e)>=0)return;e==="set-cookie"?r[e]=(r[e]?r[e]:[]).concat([n]):r[e]=r[e]?r[e]+", "+n:n}}),r}});var kt=N((hr,Ht)=>{"use strict";var Dt=V();Ht.exports=Dt.isStandardBrowserEnv()?function(){var h=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),e;function n(a){var i=a;return h&&(r.setAttribute("href",i),i=r.href),r.setAttribute("href",i),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(i){var c=Dt.isString(i)?n(i):i;return c.protocol===e.protocol&&c.host===e.host}}():function(){return function(){return!0}}()});var ie=N((vr,Wt)=>{"use strict";function De(g){this.message=g}De.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};De.prototype.__CANCEL__=!0;Wt.exports=De});var ke=N((mr,Ut)=>{"use strict";var ve=V(),Ci=It(),wi=At(),Pi=Be(),Ei=bt(),Ii=Ft(),Mi=kt(),He=Ne(),Ai=re(),Ti=ie();Ut.exports=function(h){return new Promise(function(e,n){var a=h.data,i=h.headers,c=h.responseType,o;function u(){h.cancelToken&&h.cancelToken.unsubscribe(o),h.signal&&h.signal.removeEventListener("abort",o)}ve.isFormData(a)&&delete i["Content-Type"];var s=new XMLHttpRequest;if(h.auth){var f=h.auth.username||"",t=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";i.Authorization="Basic "+btoa(f+":"+t)}var l=Ei(h.baseURL,h.url);s.open(h.method.toUpperCase(),Pi(l,h.params,h.paramsSerializer),!0),s.timeout=h.timeout;function p(){if(!!s){var S="getAllResponseHeaders"in s?Ii(s.getAllResponseHeaders()):null,P=!c||c==="text"||c==="json"?s.responseText:s.response,m={data:P,status:s.status,statusText:s.statusText,headers:S,config:h,request:s};Ci(function(y){e(y),u()},function(y){n(y),u()},m),s=null}}if("onloadend"in s?s.onloadend=p:s.onreadystatechange=function(){!s||s.readyState!==4||s.status===0&&!(s.responseURL&&s.responseURL.indexOf("file:")===0)||setTimeout(p)},s.onabort=function(){!s||(n(He("Request aborted",h,"ECONNABORTED",s)),s=null)},s.onerror=function(){n(He("Network Error",h,null,s)),s=null},s.ontimeout=function(){var P=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",m=h.transitional||Ai.transitional;h.timeoutErrorMessage&&(P=h.timeoutErrorMessage),n(He(P,h,m.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",s)),s=null},ve.isStandardBrowserEnv()){var v=(h.withCredentials||Mi(l))&&h.xsrfCookieName?wi.read(h.xsrfCookieName):void 0;v&&(i[h.xsrfHeaderName]=v)}"setRequestHeader"in s&&ve.forEach(i,function(P,m){typeof a>"u"&&m.toLowerCase()==="content-type"?delete i[m]:s.setRequestHeader(m,P)}),ve.isUndefined(h.withCredentials)||(s.withCredentials=!!h.withCredentials),c&&c!=="json"&&(s.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&s.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&s.upload&&s.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(o=function(S){!s||(n(!S||S&&S.type?new Ti("canceled"):S),s.abort(),s=null)},h.cancelToken&&h.cancelToken.subscribe(o),h.signal&&(h.signal.aborted?o():h.signal.addEventListener("abort",o))),a||(a=null),s.send(a)})}});var re=N((dr,qt)=>{"use strict";var U=V(),Vt=Ct(),Ri=be(),Oi={"Content-Type":"application/x-www-form-urlencoded"};function jt(g,h){!U.isUndefined(g)&&U.isUndefined(g["Content-Type"])&&(g["Content-Type"]=h)}function Li(){var g;return typeof XMLHttpRequest<"u"?g=ke():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(g=ke()),g}function Bi(g,h,r){if(U.isString(g))try{return(h||JSON.parse)(g),U.trim(g)}catch(e){if(e.name!=="SyntaxError")throw e}return(r||JSON.stringify)(g)}var me={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Li(),transformRequest:[function(h,r){return Vt(r,"Accept"),Vt(r,"Content-Type"),U.isFormData(h)||U.isArrayBuffer(h)||U.isBuffer(h)||U.isStream(h)||U.isFile(h)||U.isBlob(h)?h:U.isArrayBufferView(h)?h.buffer:U.isURLSearchParams(h)?(jt(r,"application/x-www-form-urlencoded;charset=utf-8"),h.toString()):U.isObject(h)||r&&r["Content-Type"]==="application/json"?(jt(r,"application/json"),Bi(h)):h}],transformResponse:[function(h){var r=this.transitional||me.transitional,e=r&&r.silentJSONParsing,n=r&&r.forcedJSONParsing,a=!e&&this.responseType==="json";if(a||n&&U.isString(h)&&h.length)try{return JSON.parse(h)}catch(i){if(a)throw i.name==="SyntaxError"?Ri(i,this,"E_JSON_PARSE"):i}return h}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(h){return h>=200&&h<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};U.forEach(["delete","get","head"],function(h){me.headers[h]={}});U.forEach(["post","put","patch"],function(h){me.headers[h]=U.merge(Oi)});qt.exports=me});var Gt=N((pr,zt)=>{"use strict";var bi=V(),Ni=re();zt.exports=function(h,r,e){var n=this||Ni;return bi.forEach(e,function(i){h=i.call(n,h,r)}),h}});var We=N((gr,Jt)=>{"use strict";Jt.exports=function(h){return!!(h&&h.__CANCEL__)}});var Qt=N((xr,Xt)=>{"use strict";var $t=V(),Ue=Gt(),Fi=We(),Di=re(),Hi=ie();function Ve(g){if(g.cancelToken&&g.cancelToken.throwIfRequested(),g.signal&&g.signal.aborted)throw new Hi("canceled")}Xt.exports=function(h){Ve(h),h.headers=h.headers||{},h.data=Ue.call(h,h.data,h.headers,h.transformRequest),h.headers=$t.merge(h.headers.common||{},h.headers[h.method]||{},h.headers),$t.forEach(["delete","get","head","post","put","patch","common"],function(n){delete h.headers[n]});var r=h.adapter||Di.adapter;return r(h).then(function(n){return Ve(h),n.data=Ue.call(h,n.data,n.headers,h.transformResponse),n},function(n){return Fi(n)||(Ve(h),n&&n.response&&(n.response.data=Ue.call(h,n.response.data,n.response.headers,h.transformResponse))),Promise.reject(n)})}});var je=N((yr,Kt)=>{"use strict";var z=V();Kt.exports=function(h,r){r=r||{};var e={};function n(s,f){return z.isPlainObject(s)&&z.isPlainObject(f)?z.merge(s,f):z.isPlainObject(f)?z.merge({},f):z.isArray(f)?f.slice():f}function a(s){if(z.isUndefined(r[s])){if(!z.isUndefined(h[s]))return n(void 0,h[s])}else return n(h[s],r[s])}function i(s){if(!z.isUndefined(r[s]))return n(void 0,r[s])}function c(s){if(z.isUndefined(r[s])){if(!z.isUndefined(h[s]))return n(void 0,h[s])}else return n(void 0,r[s])}function o(s){if(s in r)return n(h[s],r[s]);if(s in h)return n(void 0,h[s])}var u={url:i,method:i,data:i,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:o};return z.forEach(Object.keys(h).concat(Object.keys(r)),function(f){var t=u[f]||a,l=t(f);z.isUndefined(l)&&t!==o||(e[f]=l)}),e}});var qe=N((Sr,Zt)=>{Zt.exports={version:"0.26.0"}});var en=N((Cr,_t)=>{"use strict";var ki=qe().version,ze={};["object","boolean","number","function","string","symbol"].forEach(function(g,h){ze[g]=function(e){return typeof e===g||"a"+(h<1?"n ":" ")+g}});var Yt={};ze.transitional=function(h,r,e){function n(a,i){return"[Axios v"+ki+"] Transitional option '"+a+"'"+i+(e?". "+e:"")}return function(a,i,c){if(h===!1)throw new Error(n(i," has been removed"+(r?" in "+r:"")));return r&&!Yt[i]&&(Yt[i]=!0,console.warn(n(i," has been deprecated since v"+r+" and will be removed in the near future"))),h?h(a,i,c):!0}};function Wi(g,h,r){if(typeof g!="object")throw new TypeError("options must be an object");for(var e=Object.keys(g),n=e.length;n-- >0;){var a=e[n],i=h[a];if(i){var c=g[a],o=c===void 0||i(c,a,g);if(o!==!0)throw new TypeError("option "+a+" must be "+o);continue}if(r!==!0)throw Error("Unknown option "+a)}}_t.exports={assertOptions:Wi,validators:ze}});var on=N((wr,an)=>{"use strict";var rn=V(),Ui=Be(),tn=yt(),nn=Qt(),de=je(),sn=en(),_=sn.validators;function se(g){this.defaults=g,this.interceptors={request:new tn,response:new tn}}se.prototype.request=function(h,r){typeof h=="string"?(r=r||{},r.url=h):r=h||{},r=de(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var e=r.transitional;e!==void 0&&sn.assertOptions(e,{silentJSONParsing:_.transitional(_.boolean),forcedJSONParsing:_.transitional(_.boolean),clarifyTimeoutError:_.transitional(_.boolean)},!1);var n=[],a=!0;this.interceptors.request.forEach(function(l){typeof l.runWhen=="function"&&l.runWhen(r)===!1||(a=a&&l.synchronous,n.unshift(l.fulfilled,l.rejected))});var i=[];this.interceptors.response.forEach(function(l){i.push(l.fulfilled,l.rejected)});var c;if(!a){var o=[nn,void 0];for(Array.prototype.unshift.apply(o,n),o=o.concat(i),c=Promise.resolve(r);o.length;)c=c.then(o.shift(),o.shift());return c}for(var u=r;n.length;){var s=n.shift(),f=n.shift();try{u=s(u)}catch(t){f(t);break}}try{c=nn(u)}catch(t){return Promise.reject(t)}for(;i.length;)c=c.then(i.shift(),i.shift());return c};se.prototype.getUri=function(h){return h=de(this.defaults,h),Ui(h.url,h.params,h.paramsSerializer).replace(/^\?/,"")};rn.forEach(["delete","get","head","options"],function(h){se.prototype[h]=function(r,e){return this.request(de(e||{},{method:h,url:r,data:(e||{}).data}))}});rn.forEach(["post","put","patch"],function(h){se.prototype[h]=function(r,e,n){return this.request(de(n||{},{method:h,url:r,data:e}))}});an.exports=se});var fn=N((Pr,ln)=>{"use strict";var Vi=ie();function ee(g){if(typeof g!="function")throw new TypeError("executor must be a function.");var h;this.promise=new Promise(function(n){h=n});var r=this;this.promise.then(function(e){if(!!r._listeners){var n,a=r._listeners.length;for(n=0;n<a;n++)r._listeners[n](e);r._listeners=null}}),this.promise.then=function(e){var n,a=new Promise(function(i){r.subscribe(i),n=i}).then(e);return a.cancel=function(){r.unsubscribe(n)},a},g(function(n){r.reason||(r.reason=new Vi(n),h(r.reason))})}ee.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};ee.prototype.subscribe=function(h){if(this.reason){h(this.reason);return}this._listeners?this._listeners.push(h):this._listeners=[h]};ee.prototype.unsubscribe=function(h){if(!!this._listeners){var r=this._listeners.indexOf(h);r!==-1&&this._listeners.splice(r,1)}};ee.source=function(){var h,r=new ee(function(n){h=n});return{token:r,cancel:h}};ln.exports=ee});var cn=N((Er,un)=>{"use strict";un.exports=function(h){return function(e){return h.apply(null,e)}}});var vn=N((Ir,hn)=>{"use strict";var ji=V();hn.exports=function(h){return ji.isObject(h)&&h.isAxiosError===!0}});var pn=N((Mr,Ge)=>{"use strict";var mn=V(),qi=Ae(),pe=on(),zi=je(),Gi=re();function dn(g){var h=new pe(g),r=qi(pe.prototype.request,h);return mn.extend(r,pe.prototype,h),mn.extend(r,h),r.create=function(n){return dn(zi(g,n))},r}var X=dn(Gi);X.Axios=pe;X.Cancel=ie();X.CancelToken=fn();X.isCancel=We();X.VERSION=qe().version;X.all=function(h){return Promise.all(h)};X.spread=cn();X.isAxiosError=vn();Ge.exports=X;Ge.exports.default=X});var xn=N((Ar,gn)=>{gn.exports=pn()});function Ce(g,h){if(!(g instanceof h))throw new TypeError("Cannot call a class as a function")}function nt(g,h){for(var r=0;r<h.length;r++){var e=h[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(g,e.key,e)}}function we(g,h,r){return h&&nt(g.prototype,h),r&&nt(g,r),g}function it(g){return+g.replace(/px/,"")}function Ln(g){var h=window.devicePixelRatio,r=getComputedStyle(g),e=it(r.getPropertyValue("width")),n=it(r.getPropertyValue("height"));g.setAttribute("width",(e*h).toString()),g.setAttribute("height",(n*h).toString())}function $(g,h){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,e=Math.random()*(h-g)+g;return Math.floor(e*Math.pow(10,r))/Math.pow(10,r)}function Se(g){return g[$(0,g.length)]}var Bn=.00125,bn=5e-4,Nn=9e-4,Fn=1e-5,Dn=6,Hn=80,kn=.9,Wn=1.7,Un=.2,Vn=.6,jn=.03,qn=.07,rt=15,st=82,zn=150,Gn=100,Jn=250,$n=40,Xn=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function at(g){var h=1920;return Math.log(g)/Math.log(h)}var ot=function(){function g(h){Ce(this,g);var r=h.initialPosition,e=h.direction,n=h.confettiRadius,a=h.confettiColors,i=h.emojis,c=h.emojiSize,o=h.canvasWidth;h.images;var u=h.resources,s=$(kn,Wn,3),f=s*at(o);this.confettiSpeed={x:f,y:f},this.finalConfettiSpeedX=$(Un,Vn,3),this.rotationSpeed=i.length||u.length?.01:$(jn,qn,3)*at(o),this.dragForceCoefficient=$(bn,Nn,6),this.radius={x:n,y:n},this.initialRadius=n,this.rotationAngle=e==="left"?$(0,.2,3):$(-.2,0,3),this.emojiSize=c,this.emojiRotationAngle=$(0,2*Math.PI),this.radiusYUpdateDirection="down";var t=e==="left"?$(st,rt)*Math.PI/180:$(-rt,-st)*Math.PI/180;this.absCos=Math.abs(Math.cos(t)),this.absSin=Math.abs(Math.sin(t));var l=$(-zn,0),p={x:r.x+(e==="left"?-l:l)*this.absCos,y:r.y-l*this.absSin};this.currentPosition=Object.assign({},p),this.initialPosition=Object.assign({},p),this.color=i.length||u.length?null:Se(a),this.emoji=i.length?Se(i):null,this.image=u.length?Se(u):null,this.createdAt=new Date().getTime(),this.direction=e}return we(g,[{key:"draw",value:function(r){var e=this.currentPosition,n=this.radius,a=this.color,i=this.emoji,c=this.rotationAngle,o=this.emojiRotationAngle,u=this.emojiSize,s=this.image,f=window.devicePixelRatio;a?(r.fillStyle=a,r.beginPath(),r.ellipse(e.x*f,e.y*f,n.x*f,n.y*f,c,0,2*Math.PI),r.fill()):s?(r.save(),r.translate(f*e.x,f*e.y),r.rotate(o),r.drawImage(s,-s.width/2,-s.height/2,s.width,s.height),r.restore()):i&&(r.font="".concat(u,"px serif"),r.save(),r.translate(f*e.x,f*e.y),r.rotate(o),r.textAlign="center",r.fillText(i,0,0),r.restore())}},{key:"updatePosition",value:function(r,e){var n=this.confettiSpeed,a=this.dragForceCoefficient,i=this.finalConfettiSpeedX,c=this.radiusYUpdateDirection,o=this.rotationSpeed,u=this.createdAt,s=this.direction,f=e-u;if(n.x>i&&(this.confettiSpeed.x-=a*r),this.currentPosition.x+=n.x*(s==="left"?-this.absCos:this.absCos)*r,this.currentPosition.y=this.initialPosition.y-n.y*this.absSin*f+Bn*Math.pow(f,2)/2,this.rotationSpeed-=this.emoji||this.image?1e-4:Fn*r,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji||this.image){this.emojiRotationAngle+=this.rotationSpeed*r%(2*Math.PI);return}c==="down"?(this.radius.y-=r*o,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=r*o,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(r){return this.currentPosition.y<r+Gn}}]),g}();function Qn(){var g=document.createElement("canvas");return g.style.position="fixed",g.style.width="100%",g.style.height="100%",g.style.top="0",g.style.left="0",g.style.zIndex="1000",g.style.pointerEvents="none",document.body.appendChild(g),g}function Kn(g){var h=g.confettiRadius,r=h===void 0?Dn:h,e=g.confettiNumber,n=e===void 0?g.confettiesNumber||(g.emojis?$n:Jn):e,a=g.confettiColors,i=a===void 0?Xn:a,c=g.emojis,o=c===void 0?g.emojies||[]:c,u=g.emojiSize,s=u===void 0?Hn:u,f=g.images,t=f===void 0?[]:f;return g.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),g.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:r,confettiNumber:n,confettiColors:i,emojis:o,emojiSize:s,images:t}}var Zn=function(){function g(h){var r=this;Ce(this,g),this.canvasContext=h,this.shapes=[],this.promise=new Promise(function(e){return r.resolvePromise=e})}return we(g,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var r;(r=this.shapes).push.apply(r,arguments)}},{key:"complete",value:function(){var r;return this.shapes.length?!1:((r=this.resolvePromise)===null||r===void 0||r.call(this),!0)}},{key:"processShapes",value:function(r,e,n){var a=this,i=r.timeDelta,c=r.currentTime;this.shapes=this.shapes.filter(function(o){return o.updatePosition(i,c),o.draw(a.canvasContext),n?o.getIsVisibleOnCanvas(e):!0})}}]),g}(),Yn=function(){function g(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ce(this,g),this.activeConfettiBatches=[],this.canvas=h.canvas||Qn(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=new Date().getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return we(g,[{key:"loop",value:function(){this.requestAnimationFrameRequested=!1,Ln(this.canvas);var r=new Date().getTime(),e=r-this.lastUpdated,n=this.canvas.offsetHeight,a=this.iterationIndex%10===0;this.activeConfettiBatches=this.activeConfettiBatches.filter(function(i){return i.processShapes({timeDelta:e,currentTime:r},n,a),a?!i.complete():!0}),this.iterationIndex++,this.queueAnimationFrameIfNeeded(r)}},{key:"queueAnimationFrameIfNeeded",value:function(r){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=r||new Date().getTime(),requestAnimationFrame(this.loop))}},{key:"_load",value:function(r){return new Promise(function(e,n){var a=new Image;a.onload=function(){e(a)},a.onerror=function(i){n(i)},a.src=r,a.complete&&(a.onload=null,e(a))})}},{key:"_loadImages",value:function(r){var e=this;if(r.length===0)return Promise.resolve([]);var n=r.map(function(a){return e._load(a)});return Promise.all(n)}},{key:"addConfetti",value:function(){var r=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=Kn(e),a=n.confettiRadius,i=n.confettiNumber,c=n.confettiColors,o=n.emojis,u=n.emojiSize,s=n.images,f=this.canvas.getBoundingClientRect(),t=f.width,l=f.height,p=l*5/7,v={x:0,y:p},S={x:t,y:p},P=new Zn(this.canvasContext);return this._loadImages(s).then(function(m){for(var d=0;d<i/2;d++){var y=new ot({initialPosition:v,direction:"right",confettiRadius:a,confettiColors:c,confettiNumber:i,emojis:o,emojiSize:u,canvasWidth:t,images:s,resources:m}),x=new ot({initialPosition:S,direction:"left",confettiRadius:a,confettiColors:c,confettiNumber:i,emojis:o,emojiSize:u,canvasWidth:t,images:s,resources:m});P.addShapes(y,x)}r.activeConfettiBatches.push(P),r.queueAnimationFrameIfNeeded()}),P.getBatchCompletePromise()}}]),g}(),lt=Yn;var Pe=class{constructor(h={}){this.confetti=new lt({canvas:document.getElementById("popper")});this.options={pattern:[/8+|👏+/gim]};this._confetti=async()=>this.confetti.addConfetti(this.options);Object.assign(this.options,h),document.body.addEventListener("click",()=>this._confetti())}verify(h){let r=h.reduce((e,n)=>this.options.pattern.reduce((a,i)=>(typeof i=="string"&&(i=new RegExp(i,"igm")),n.data.comment.search(i)!==-1?a+1:a),e),0);for(let e=0;e<Math.min(r,10);e++)setTimeout(this._confetti,e*200)}};var W=tt(ft()),Z=30,Ie={isStatic:!0,render:{fillStyle:"transparent"}};var fe={pattern:[/w/gim],lifeTime:3e3,textures:[],magnification:3,maxItems:50},ut=class{constructor(h,r,e,n,a){this.x=h;this.y=r;this.lifeTime=e;this.texture=n;this.callback=a;this._item=W.Bodies.circle(h,r,n.size,{restitution:.9,render:{sprite:{texture:n.src,xScale:n.xScale||1,yScale:n.yScale||1}}}),this._timer=setTimeout(()=>{a(this._item)},e)}get body(){return this._item}remove(){clearTimeout(this._timer),this.callback(this._item)}},Me=class{constructor(h){this.stageWidth=window.innerWidth;this.stageHeight=window.innerHeight;this.engine=W.Engine.create();this.options=Object.assign({},fe);this._items=[];Object.assign(this.options,h);let r=document.getElementById("dropper");this.render=W.Render.create({canvas:r,engine:this.engine,options:{background:"transparent",width:this.stageWidth,height:this.stageHeight,wireframes:!1}});let e=W.Bodies.rectangle(-(Z/2-1),this.stageHeight/2,Z,this.stageHeight,Ie),n=W.Bodies.rectangle(this.stageWidth+Z/2-1,this.stageHeight/2,Z,this.stageHeight,Ie),a=W.Bodies.rectangle(this.stageWidth/2,this.stageHeight+Z/2-1,this.stageWidth,Z,Ie);W.Composite.add(this.engine.world,[a,e,n]),W.Render.run(this.render);let i=W.Runner.create();W.Runner.run(i,this.engine),document.body.addEventListener("click",()=>this.drop())}drop(){let h=Math.random()*this.stageWidth,r=Math.random()*this.stageHeight/3,e=this.options.textures[Math.floor(Math.random()*this.options.textures.length)],n=new ut(h,r,this.options.lifeTime||fe.lifeTime,e,i=>{W.Composite.remove(this.engine.world,i)});this._items.unshift(n),W.Composite.add(this.engine.world,[n.body]);let a=this.options.maxItems||fe.maxItems;this._items.length>a&&this._items.splice(a,this._items.length).forEach(c=>{c.remove()})}verify(h){let r=h.reduce((n,a)=>this.options.pattern.reduce((i,c)=>{typeof c=="string"&&(c=new RegExp(c,"igm"));let o=a.data.comment.split(c).length-1;return i+o},n),0),e=this.options.magnification||fe.magnification;for(let n=0;n<r*e;n++)this.drop()}};var yn=tt(xn()),Je={_timer:-1,_lastId:"",_commentSubscribers:new Map,_listenerSubscribers:new Map,init(g){let h=()=>{yn.default.get(g).then(r=>r.data).then(async r=>{let{comments:e,listeners:n}=r,a=e.findIndex(c=>this._lastId===c.data.id);a===-1&&(a=0);let i=e.slice(a+1);i.length!==0&&(this._lastId=i[i.length-1].data.id,this._publishComment(i)),this._publishListener(n),this._timer=setTimeout(h,2e3)}).catch(r=>{console.error(r),this._timer=setTimeout(h,5e3)})};h()},_publishComment(g){this._commentSubscribers.forEach(h=>{h(g)})},_publishListener(g){this._listenerSubscribers.forEach(h=>{h(g)})},subscribeComment(g){this._commentSubscribers.set(g,g)},unsbscribeComment(g){this._commentSubscribers.delete(g)},subscribeListener(g){this._listenerSubscribers.set(g,g)},unsubscribeListener(g){this._listenerSubscribers.delete(g)}};var ge=300,Sn=class{constructor(h,r,e){this.parent=h;this.conf=r;this._element=document.createElement("div");let n=new Image;n.src=r.image,r.width&&(n.width=r.width),r.height&&(n.height=r.height);let a=typeof r.x=="number"?r.x:this._getRandomPositionX(r.x),i=typeof r.y=="number"?r.y:this._getRandomPositionY(r.y);this._element.className="notify",this._element.style.transform=`translate(${a}px, ${i}px)`,this._element.appendChild(n),this.parent.appendChild(this._element),this._timer=setTimeout(()=>{this.remove()},r.lifeTime||5e3)}_getRandomPosition(h){if(h)return Math.random()*(h[1]-h[0])+h[0]}_getRandomPositionX(h){return h?this._getRandomPosition(h):Math.floor(Math.random()*window.innerWidth-ge+ge/2)}_getRandomPositionY(h){return h?this._getRandomPosition(h):Math.floor(Math.random()*window.innerHeight-ge+ge/2)}remove(){clearInterval(this._timer),this._element&&(this.parent.removeChild(this._element),this._element=null)}},$e=class{constructor(h){this._options={items:[],maxItems:20};this._container=document.getElementById("notify");this._items=[];Object.assign(this._options,h),document.body.addEventListener("click",()=>{let r=this._options.items[Math.floor(Math.random()*this._options.items.length)];this.showItem(r)})}showItem(h){let r=new Sn(this._container,h,n=>{n.remove()});if(h.only){let n=this._items.findIndex(a=>a.conf===h);n!==-1&&this._items.splice(n,1).forEach(i=>{i.remove()})}this._items.unshift(r);let e=this._options.maxItems||20;this._items.length>e&&this._items.splice(e,this._items.length).forEach(a=>{a.remove()})}verify(h){let r=[];h.forEach(e=>{let n=this._options.items.find(a=>a.pattern.some(i=>(typeof i=="string"&&(i=new RegExp(i,"gim")),e.data.comment.search(i)!==-1)));n&&r.push(n)}),r.length!==0&&r.forEach(e=>{this.showItem(e)})}};var Ji={jsonPath:"../../comment.json",use:{popper:!0,dropper:!0,notify:!0},popperConfig:{pattern:["88","\u{1F44F}"]},dropperConfig:{pattern:["ww","\u8349"],textures:[{src:"./paw.png",size:24,xScale:1.5,yScale:1.5}]},notifyConfig:{items:[],maxItems:20}};function $i(g={}){let h=Object.assign({},Ji,g),r=[];if(h.use.popper){let e=new Pe(h.popperConfig);r.push(e)}if(h.use.dropper){let e=new Me(h.dropperConfig);r.push(e)}if(h.use.notify){let e=new $e(h.notifyConfig);r.push(e)}Je.init(h.jsonPath),Je.subscribeComment(e=>{r.forEach(n=>{n.verify(e)})})}window.WordParty={start:$i};})();
/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
